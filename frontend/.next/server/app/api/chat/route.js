/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/route";
exports.ids = ["app/api/chat/route"];
exports.modules = {

/***/ "(rsc)/../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5Cshilo%5CElective%20Chooser%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cshilo%5CElective%20Chooser%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5Cshilo%5CElective%20Chooser%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cshilo%5CElective%20Chooser%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/../node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/../node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/../node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/../node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/../node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/../node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/../node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/../node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/../node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/../node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/../node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/../node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/../node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var C_Users_shilo_Elective_Chooser_frontend_src_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./src/app/api/chat/route.ts */ \"(rsc)/./src/app/api/chat/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/route\",\n        pathname: \"/api/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"C:\\\\Users\\\\shilo\\\\Elective Chooser\\\\frontend\\\\src\\\\app\\\\api\\\\chat\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_shilo_Elective_Chooser_frontend_src_app_api_chat_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/chat/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        // if we aren't wrapped by base-server handle here\n        if (!activeSpan && !(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1hcHAtbG9hZGVyL2luZGV4LmpzP25hbWU9YXBwJTJGYXBpJTJGY2hhdCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGY2hhdCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmNoYXQlMkZyb3V0ZS50cyZhcHBEaXI9QyUzQSU1Q1VzZXJzJTVDc2hpbG8lNUNFbGVjdGl2ZSUyMENob29zZXIlNUNmcm9udGVuZCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDc2hpbG8lNUNFbGVjdGl2ZSUyMENob29zZXIlNUNmcm9udGVuZCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCZpc0dsb2JhbE5vdEZvdW5kRW5hYmxlZD0hIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ2Q7QUFDUztBQUNPO0FBQ0s7QUFDbUM7QUFDakQ7QUFDTztBQUNmO0FBQ3NDO0FBQ3pCO0FBQ007QUFDQztBQUNoQjtBQUNzQztBQUN4RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhLE9BQW9DLElBQUksQ0FBRTtBQUN2RCx3QkFBd0IsTUFBdUM7QUFDL0Q7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FB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O0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDViw2RUFBNkUsZ0ZBQWM7QUFDM0YsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTjtBQUNBLDRDQUE0Qyw2RkFBZTtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywyRkFBbUI7QUFDckQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkVBQVk7QUFDMUI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0IHsgZ2V0UmVxdWVzdE1ldGEgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXF1ZXN0LW1ldGFcIjtcbmltcG9ydCB7IGdldFRyYWNlciwgU3BhbktpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvdHJhY2VyXCI7XG5pbXBvcnQgeyBub3JtYWxpemVBcHBQYXRoIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL3JvdXRlci91dGlscy9hcHAtcGF0aHNcIjtcbmltcG9ydCB7IE5vZGVOZXh0UmVxdWVzdCwgTm9kZU5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Jhc2UtaHR0cC9ub2RlXCI7XG5pbXBvcnQgeyBOZXh0UmVxdWVzdEFkYXB0ZXIsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvc3BlYy1leHRlbnNpb24vYWRhcHRlcnMvbmV4dC1yZXF1ZXN0XCI7XG5pbXBvcnQgeyBCYXNlU2VydmVyU3BhbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS9jb25zdGFudHNcIjtcbmltcG9ydCB7IGdldFJldmFsaWRhdGVSZWFzb24gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9pbnN0cnVtZW50YXRpb24vdXRpbHNcIjtcbmltcG9ydCB7IHNlbmRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3NlbmQtcmVzcG9uc2VcIjtcbmltcG9ydCB7IGZyb21Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycywgdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi91dGlsc1wiO1xuaW1wb3J0IHsgZ2V0Q2FjaGVDb250cm9sSGVhZGVyIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL2NhY2hlLWNvbnRyb2xcIjtcbmltcG9ydCB7IElORklOSVRFX0NBQ0hFLCBORVhUX0NBQ0hFX1RBR1NfSEVBREVSIH0gZnJvbSBcIm5leHQvZGlzdC9saWIvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBOb0ZhbGxiYWNrRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvbm8tZmFsbGJhY2stZXJyb3IuZXh0ZXJuYWxcIjtcbmltcG9ydCB7IENhY2hlZFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3Jlc3BvbnNlLWNhY2hlXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcc2hpbG9cXFxcRWxlY3RpdmUgQ2hvb3NlclxcXFxmcm9udGVuZFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxjaGF0XFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jaGF0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2hhdFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2hhdC9yb3V0ZVwiXG4gICAgfSxcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXG4gICAgcmVsYXRpdmVQcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJycsXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxzaGlsb1xcXFxFbGVjdGl2ZSBDaG9vc2VyXFxcXGZyb250ZW5kXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGNoYXRcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgdmFyIF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbDtcbiAgICBsZXQgc3JjUGFnZSA9IFwiL2FwaS9jaGF0L3JvdXRlXCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH0gZWxzZSBpZiAoc3JjUGFnZSA9PT0gJy9pbmRleCcpIHtcbiAgICAgICAgLy8gd2UgYWx3YXlzIG5vcm1hbGl6ZSAvaW5kZXggc3BlY2lmaWNhbGx5XG4gICAgICAgIHNyY1BhZ2UgPSAnLyc7XG4gICAgfVxuICAgIGNvbnN0IG11bHRpWm9uZURyYWZ0TW9kZSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREU7XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZSxcbiAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IGJ1aWxkSWQsIHBhcmFtcywgbmV4dENvbmZpZywgaXNEcmFmdE1vZGUsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0LCBpc09uRGVtYW5kUmV2YWxpZGF0ZSwgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsIHJlc29sdmVkUGF0aG5hbWUgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgY29uc3Qgbm9ybWFsaXplZFNyY1BhZ2UgPSBub3JtYWxpemVBcHBQYXRoKHNyY1BhZ2UpO1xuICAgIGxldCBpc0lzciA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0gfHwgcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICBpZiAoaXNJc3IgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNvbnN0IGlzUHJlcmVuZGVyZWQgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgICAgIGNvbnN0IHByZXJlbmRlckluZm8gPSBwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXTtcbiAgICAgICAgaWYgKHByZXJlbmRlckluZm8pIHtcbiAgICAgICAgICAgIGlmIChwcmVyZW5kZXJJbmZvLmZhbGxiYWNrID09PSBmYWxzZSAmJiAhaXNQcmVyZW5kZXJlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb0ZhbGxiYWNrRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgY2FjaGVLZXkgPSBudWxsO1xuICAgIGlmIChpc0lzciAmJiAhcm91dGVNb2R1bGUuaXNEZXYgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNhY2hlS2V5ID0gcmVzb2x2ZWRQYXRobmFtZTtcbiAgICAgICAgLy8gZW5zdXJlIC9pbmRleCBhbmQgLyBpcyBub3JtYWxpemVkIHRvIG9uZSBrZXlcbiAgICAgICAgY2FjaGVLZXkgPSBjYWNoZUtleSA9PT0gJy9pbmRleCcgPyAnLycgOiBjYWNoZUtleTtcbiAgICB9XG4gICAgY29uc3Qgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UgPSAvLyBJZiB3ZSdyZSBpbiBkZXZlbG9wbWVudCwgd2UgYWx3YXlzIHN1cHBvcnQgZHluYW1pYyBIVE1MXG4gICAgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgLy8gSWYgdGhpcyBpcyBub3QgU1NHIG9yIGRvZXMgbm90IGhhdmUgc3RhdGljIHBhdGhzLCB0aGVuIGl0IHN1cHBvcnRzXG4gICAgLy8gZHluYW1pYyBIVE1MLlxuICAgICFpc0lzcjtcbiAgICAvLyBUaGlzIGlzIGEgcmV2YWxpZGF0aW9uIHJlcXVlc3QgaWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljXG4gICAgLy8gcGFnZSBhbmQgaXQgaXMgbm90IGJlaW5nIHJlc3VtZWQgZnJvbSBhIHBvc3Rwb25lZCByZW5kZXIgYW5kXG4gICAgLy8gaXQgaXMgbm90IGEgZHluYW1pYyBSU0MgcmVxdWVzdCB0aGVuIGl0IGlzIGEgcmV2YWxpZGF0aW9uXG4gICAgLy8gcmVxdWVzdC5cbiAgICBjb25zdCBpc1JldmFsaWRhdGUgPSBpc0lzciAmJiAhc3VwcG9ydHNEeW5hbWljUmVzcG9uc2U7XG4gICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgICAgICAgICAgIGNhY2hlQ29tcG9uZW50czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jYWNoZUNvbXBvbmVudHMpLFxuICAgICAgICAgICAgICAgIGF1dGhJbnRlcnJ1cHRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmF1dGhJbnRlcnJ1cHRzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlLFxuICAgICAgICAgICAgaW5jcmVtZW50YWxDYWNoZTogZ2V0UmVxdWVzdE1ldGEocmVxLCAnaW5jcmVtZW50YWxDYWNoZScpLFxuICAgICAgICAgICAgY2FjaGVMaWZlUHJvZmlsZXM6IChfbmV4dENvbmZpZ19leHBlcmltZW50YWwgPSBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbC5jYWNoZUxpZmUsXG4gICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWwsXG4gICAgICAgICAgICBvbkNsb3NlOiAoY2IpPT57XG4gICAgICAgICAgICAgICAgcmVzLm9uKCdjbG9zZScsIGNiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkFmdGVyVGFza0Vycm9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBvbkluc3RydW1lbnRhdGlvblJlcXVlc3RFcnJvcjogKGVycm9yLCBfcmVxdWVzdCwgZXJyb3JDb250ZXh0KT0+cm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnJvciwgZXJyb3JDb250ZXh0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KVxuICAgICAgICB9LFxuICAgICAgICBzaGFyZWRDb250ZXh0OiB7XG4gICAgICAgICAgICBidWlsZElkXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG5vZGVOZXh0UmVxID0gbmV3IE5vZGVOZXh0UmVxdWVzdChyZXEpO1xuICAgIGNvbnN0IG5vZGVOZXh0UmVzID0gbmV3IE5vZGVOZXh0UmVzcG9uc2UocmVzKTtcbiAgICBjb25zdCBuZXh0UmVxID0gTmV4dFJlcXVlc3RBZGFwdGVyLmZyb21Ob2RlTmV4dFJlcXVlc3Qobm9kZU5leHRSZXEsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UocmVzKSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW52b2tlUm91dGVNb2R1bGUgPSBhc3luYyAoc3Bhbik9PntcbiAgICAgICAgICAgIHJldHVybiByb3V0ZU1vZHVsZS5oYW5kbGUobmV4dFJlcSwgY29udGV4dCkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGlmICghc3BhbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICduZXh0LnJzYyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHdlcmUgdW5hYmxlIHRvIGdldCBhdHRyaWJ1dGVzLCBwcm9iYWJseSBPVEVMIGlzIG5vdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKCFyb290U3BhbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKSAhPT0gQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke21ldGhvZH0gJHtyb3V0ZX1gO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGAke21ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoYW5kbGVSZXNwb25zZSA9IGFzeW5jIChjdXJyZW50U3Bhbik9PntcbiAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlR2VuZXJhdG9yID0gYXN5bmMgKHsgcHJldmlvdXNDYWNoZUVudHJ5IH0pPT57XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzT25EZW1hbmRSZXZhbGlkYXRlICYmIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkICYmICFwcmV2aW91c0NhY2hlRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24tZGVtYW5kIHJldmFsaWRhdGUgYWx3YXlzIHNldHMgdGhpcyBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgJ1JFVkFMSURBVEVEJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGN1cnJlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmZldGNoTWV0cmljcyA9IGNvbnRleHQucmVuZGVyT3B0cy5mZXRjaE1ldHJpY3M7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwZW5kaW5nV2FpdFVudGlsID0gY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWw7XG4gICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdXNpbmcgcHJvdmlkZWQgd2FpdFVudGlsIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIG5vdCB3ZSBmYWxsYmFjayB0byBzZW5kUmVzcG9uc2UncyBoYW5kbGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ1dhaXRVbnRpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC53YWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgud2FpdFVudGlsKHBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdXYWl0VW50aWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVUYWdzID0gY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFRhZ3M7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpYyByZXNwb25zZSwgd2UgY2FuIGNhY2hlIGl0IHNvIGxvbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgaXQncyBub3QgZWRnZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSXNyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29weSB0aGUgaGVhZGVycyBmcm9tIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlVGFncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl0gPSBjYWNoZVRhZ3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddICYmIGJsb2IudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gYmxvYi50eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV2YWxpZGF0ZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPj0gSU5GSU5JVEVfQ0FDSEUgPyBmYWxzZSA6IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwaXJlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPj0gSU5GSU5JVEVfQ0FDSEUgPyB1bmRlZmluZWQgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjYWNoZSBlbnRyeSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogQnVmZmVyLmZyb20oYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmQgcmVzcG9uc2Ugd2l0aG91dCBjYWNoaW5nIGlmIG5vdCBJU1JcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIHJlc3BvbnNlLCBjb250ZXh0LnJlbmRlck9wdHMucGVuZGluZ1dhaXRVbnRpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgYmFja2dyb3VuZCByZXZhbGlkYXRlIHdlIG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXF1ZXN0IGVycm9yIGhlcmUgYXMgaXQgd29uJ3QgYmUgYnViYmxlZFxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNDYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2aW91c0NhY2hlRW50cnkuaXNTdGFsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVQYXRoOiBzcmNQYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSBhd2FpdCByb3V0ZU1vZHVsZS5oYW5kbGVSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgIG5leHRDb25maWcsXG4gICAgICAgICAgICAgICAgY2FjaGVLZXksXG4gICAgICAgICAgICAgICAgcm91dGVLaW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgIGlzRmFsbGJhY2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICAgICAgICAgIGlzUm91dGVQUFJFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlT25seUdlbmVyYXRlZCxcbiAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcixcbiAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgY3JlYXRlIGEgY2FjaGVFbnRyeSBmb3IgSVNSXG4gICAgICAgICAgICBpZiAoIWlzSXNyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZS5raW5kKSAhPT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50OiBhcHAtcm91dGUgcmVjZWl2ZWQgaW52YWxpZCBjYWNoZSBlbnRyeSAke2NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZTEgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNzAxXCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgaXNPbkRlbWFuZFJldmFsaWRhdGUgPyAnUkVWQUxJREFURUQnIDogY2FjaGVFbnRyeS5pc01pc3MgPyAnTUlTUycgOiBjYWNoZUVudHJ5LmlzU3RhbGUgPyAnU1RBTEUnIDogJ0hJVCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHJhZnQgbW9kZSBzaG91bGQgbmV2ZXIgYmUgY2FjaGVkXG4gICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMoY2FjaGVFbnRyeS52YWx1ZS5oZWFkZXJzKTtcbiAgICAgICAgICAgIGlmICghKGdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNJc3IpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5kZWxldGUoTkVYVF9DQUNIRV9UQUdTX0hFQURFUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBjYWNoZSBjb250cm9sIGlzIGFscmVhZHkgc2V0IG9uIHRoZSByZXNwb25zZSB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gb3ZlcnJpZGUgaXQgdG8gYWxsb3cgdXNlcnMgdG8gY3VzdG9taXplIGl0IHZpYSBuZXh0LmNvbmZpZ1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sICYmICFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykgJiYgIWhlYWRlcnMuZ2V0KCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIGdldENhY2hlQ29udHJvbEhlYWRlcihjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKGNhY2hlRW50cnkudmFsdWUuYm9keSwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBjYWNoZUVudHJ5LnZhbHVlLnN0YXR1cyB8fCAyMDBcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlUmVzcG9uc2UoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtyZXEudXJsfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlUmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBpZiB3ZSBhcmVuJ3Qgd3JhcHBlZCBieSBiYXNlLXNlcnZlciBoYW5kbGUgaGVyZVxuICAgICAgICBpZiAoIWFjdGl2ZVNwYW4gJiYgIShlcnIgaW5zdGFuY2VvZiBOb0ZhbGxiYWNrRXJyb3IpKSB7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IG5vcm1hbGl6ZWRTcmNQYWdlLFxuICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRocm93IHNvIHRoYXQgd2UgY2FuIGhhbmRsZSBzZXJ2aW5nIGVycm9yIHBhZ2VcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBkdXJpbmcgc3RhdGljIGdlbmVyYXRpb24sIHRocm93IHRoZSBlcnJvciBhZ2Fpbi5cbiAgICAgICAgaWYgKGlzSXNyKSB0aHJvdyBlcnI7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgc2VuZCBhIDUwMCByZXNwb25zZS5cbiAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgIHN0YXR1czogNTAwXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5Cshilo%5CElective%20Chooser%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cshilo%5CElective%20Chooser%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*******************************************************************************************************!*\
  !*** ../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/chat/route.ts":
/*!***********************************!*\
  !*** ./src/app/api/chat/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/../node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./src/lib/supabase.ts\");\n/* harmony import */ var _lib_openai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/openai */ \"(rsc)/./src/lib/openai.ts\");\n/* harmony import */ var _lib_search__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/search */ \"(rsc)/./src/lib/search.ts\");\n/* harmony import */ var _lib_langchain_memory__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/langchain-memory */ \"(rsc)/./src/lib/langchain-memory.ts\");\n\n\n\n\n// Extract program from user message\nfunction extractProgramFromMessage(message) {\n    const programKeywords = {\n        'Software Engineering': [\n            'software',\n            'se',\n            'software engineering'\n        ],\n        'Computer Engineering': [\n            'computer',\n            'ce',\n            'computer engineering',\n            'comp eng'\n        ],\n        'Electrical Engineering': [\n            'electrical',\n            'ee',\n            'electrical engineering'\n        ],\n        'Mechanical Engineering': [\n            'mechanical',\n            'me',\n            'mechanical engineering'\n        ],\n        'Civil Engineering': [\n            'civil',\n            'civ',\n            'civil engineering'\n        ],\n        'Chemical Engineering': [\n            'chemical',\n            'che',\n            'chemical engineering'\n        ],\n        'Systems Design Engineering': [\n            'systems',\n            'syde',\n            'systems design'\n        ],\n        'Biomedical Engineering': [\n            'biomedical',\n            'bme',\n            'biomedical engineering'\n        ],\n        'Environmental Engineering': [\n            'environmental',\n            'env',\n            'environmental engineering'\n        ],\n        'Geological Engineering': [\n            'geological',\n            'geo',\n            'geological engineering'\n        ],\n        'Architectural Engineering': [\n            'architectural',\n            'ae',\n            'architectural engineering'\n        ],\n        'Nanotechnology Engineering': [\n            'nanotechnology',\n            'ne',\n            'nano'\n        ]\n    };\n    const messageLower = message.toLowerCase();\n    for (const [program, keywords] of Object.entries(programKeywords)){\n        if (keywords.some((keyword)=>messageLower.includes(keyword))) {\n            return program;\n        }\n    }\n    return null;\n}\n\nasync function POST(request) {\n    try {\n        const { message, sessionId, userId } = await request.json();\n        if (!message || !sessionId || !userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Missing required fields'\n            }, {\n                status: 400\n            });\n        }\n        // Get user profile with better error handling\n        console.log('🔍 Looking for profile with user_id:', userId);\n        let profile;\n        try {\n            const { data: profiles, error: profileError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from('profiles').select('*').eq('user_id', userId);\n            console.log('🔍 Profile query result:', {\n                profiles,\n                profileError\n            });\n            if (profileError) {\n                console.error('❌ Profile query error:', profileError);\n                // Create a fallback profile to prevent complete failure\n                profile = {\n                    user_id: userId,\n                    username: 'User',\n                    program: 'Not specified',\n                    current_term: '2A',\n                    completed_courses: [],\n                    planned_courses: [],\n                    interests: [\n                        'general'\n                    ],\n                    goal_tags: [\n                        'general'\n                    ],\n                    additional_comments: '',\n                    gpa: 0,\n                    constraints: {\n                        max_workload: 4,\n                        morning_labs: false,\n                        schedule_preferences: []\n                    }\n                };\n                console.log('⚠️ Using fallback profile due to database error');\n            } else if (!profiles || profiles.length === 0) {\n                console.error('❌ No profile found for user_id:', userId);\n                // Create a fallback profile for new users\n                profile = {\n                    user_id: userId,\n                    username: 'User',\n                    program: 'Not specified',\n                    current_term: '2A',\n                    completed_courses: [],\n                    planned_courses: [],\n                    interests: [\n                        'general'\n                    ],\n                    goal_tags: [\n                        'general'\n                    ],\n                    additional_comments: '',\n                    gpa: 0,\n                    constraints: {\n                        max_workload: 4,\n                        morning_labs: false,\n                        schedule_preferences: []\n                    }\n                };\n                console.log('⚠️ Using fallback profile - no profile found');\n            } else {\n                profile = profiles[0];\n                console.log('✅ Profile found:', profile);\n            }\n        } catch (error) {\n            console.error('❌ Critical error loading profile:', error);\n            // Create a minimal fallback profile\n            profile = {\n                user_id: userId,\n                username: 'User',\n                program: 'Not specified',\n                current_term: '2A',\n                completed_courses: [],\n                planned_courses: [],\n                interests: [\n                    'general'\n                ],\n                goal_tags: [\n                    'general'\n                ],\n                additional_comments: '',\n                gpa: 0,\n                constraints: {\n                    max_workload: 4,\n                    morning_labs: false,\n                    schedule_preferences: []\n                }\n            };\n            console.log('⚠️ Using emergency fallback profile');\n        }\n        // Get recent conversation history\n        const recentMessages = await (0,_lib_langchain_memory__WEBPACK_IMPORTED_MODULE_4__.getRecentMessages)(sessionId, 6);\n        // Search for relevant information using vector search with error handling\n        let searchResults = [];\n        try {\n            searchResults = await (0,_lib_search__WEBPACK_IMPORTED_MODULE_3__.searchCourses)(message, {\n                term: profile.current_term,\n                skills: profile.goal_tags\n            });\n        } catch (error) {\n            console.error('❌ Error searching courses:', error);\n            // Use demo data as fallback\n            searchResults = [\n                {\n                    id: \"ECE486\",\n                    title: \"Robot Dynamics and Control\",\n                    dept: \"ECE\",\n                    number: 486,\n                    units: 0.5,\n                    level: 400,\n                    description: \"Advanced course covering robot kinematics, dynamics, and control systems.\",\n                    terms_offered: [\n                        \"F\",\n                        \"W\"\n                    ],\n                    prereqs: \"ECE 380, MATH 211\",\n                    skills: [\n                        \"robotics\",\n                        \"control\",\n                        \"dynamics\"\n                    ],\n                    workload: {\n                        reading: 3,\n                        assignments: 4,\n                        projects: 2,\n                        labs: 2\n                    },\n                    assessments: {\n                        midterm: 30,\n                        final: 40,\n                        assignments: 20,\n                        project: 10\n                    },\n                    source_url: \"https://uwaterloo.ca/electrical-computer-engineering/undergraduate-studies/course-catalog/ece-486\"\n                }\n            ];\n            console.log('⚠️ Using demo data due to search error');\n        }\n        // Search for specializations, certificates, and diplomas\n        // Use program from profile, or try to extract from conversation if empty\n        const programToSearch = profile.program || extractProgramFromMessage(message) || 'Software Engineering';\n        console.log(`🔍 Using program for search: \"${programToSearch}\" (from profile: \"${profile.program}\")`);\n        // If we extracted a program from the message and the profile doesn't have one, update it\n        if (!profile.program && extractProgramFromMessage(message)) {\n            console.log(`🔄 Updating user profile with program: ${programToSearch}`);\n            try {\n                await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from('profiles').update({\n                    program: programToSearch\n                }).eq('user_id', profile.user_id);\n            } catch (error) {\n                console.error('Failed to update profile:', error);\n            }\n        }\n        // Search for information with error handling\n        let specializations = [];\n        let certificates = [];\n        let diplomas = [];\n        let docChunks = [];\n        try {\n            specializations = await (0,_lib_search__WEBPACK_IMPORTED_MODULE_3__.searchSpecializations)(message, programToSearch, 3);\n        } catch (error) {\n            console.error('❌ Error searching specializations:', error);\n        }\n        try {\n            certificates = await (0,_lib_search__WEBPACK_IMPORTED_MODULE_3__.searchCertificates)(message, programToSearch, 3);\n        } catch (error) {\n            console.error('❌ Error searching certificates:', error);\n        }\n        try {\n            diplomas = await (0,_lib_search__WEBPACK_IMPORTED_MODULE_3__.searchDiplomas)(message, programToSearch, 3);\n        } catch (error) {\n            console.error('❌ Error searching diplomas:', error);\n        }\n        try {\n            // Get relevant document chunks for RAG\n            docChunks = await (0,_lib_search__WEBPACK_IMPORTED_MODULE_3__.searchElectiveDocs)(message, 0.6, 5);\n        } catch (error) {\n            console.error('❌ Error searching document chunks:', error);\n        }\n        // Build context for the LLM\n        const context = buildContext(searchResults, docChunks, profile, specializations, certificates, diplomas);\n        // Check if we should ask about completed electives\n        const shouldAskAboutElectives = shouldAskAboutCompletedElectives(message, profile);\n        // Create conversation messages\n        const messages = [\n            {\n                role: 'system',\n                content: getSystemPrompt(profile)\n            },\n            ...recentMessages.map((msg)=>({\n                    role: msg._getType() === 'human' ? 'user' : 'assistant',\n                    content: typeof msg.content === 'string' ? msg.content : JSON.stringify(msg.content)\n                })),\n            {\n                role: 'user',\n                content: `${message}\\n\\nContext:\\n${context}${shouldAskAboutElectives ? '\\n\\nNOTE: The user may need to specify their completed electives for better recommendations.' : ''}`\n            }\n        ];\n        // Get AI response\n        const aiResponse = await (0,_lib_openai__WEBPACK_IMPORTED_MODULE_2__.getChatCompletion)(messages);\n        // Save messages to database\n        await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from('messages').insert([\n            {\n                session_id: sessionId,\n                role: 'user',\n                content: message,\n                tokens: Math.ceil(message.length / 4)\n            },\n            {\n                session_id: sessionId,\n                role: 'assistant',\n                content: aiResponse,\n                tokens: Math.ceil(aiResponse.length / 4),\n                citations: docChunks.map((chunk)=>({\n                        url: chunk.source_url,\n                        text: chunk.text.substring(0, 200) + '...'\n                    }))\n            }\n        ]);\n        // Generate course recommendations if relevant\n        let recommendations = [];\n        const shouldRecommend = shouldGenerateRecommendations(message);\n        console.log('🔍 Should generate recommendations?', shouldRecommend, 'for message:', message);\n        if (shouldRecommend) {\n            console.log('📚 Generating recommendations...');\n            // Use the full conversation context for better search\n            const contextQuery = buildSearchQueryFromContext(message, recentMessages);\n            console.log('🔍 Using context query for search:', contextQuery);\n            recommendations = await generateRecommendations(profile, contextQuery);\n            console.log('📚 Generated recommendations:', recommendations.length, 'courses');\n        }\n        console.log('📤 API Response:', {\n            responseLength: aiResponse.length,\n            recommendationsCount: recommendations.length,\n            recommendations: recommendations.map((r)=>({\n                    id: r.course?.id,\n                    title: r.course?.title,\n                    score: r.score\n                }))\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            response: aiResponse,\n            recommendations,\n            sources: [],\n            used_web_search: false\n        });\n    } catch (error) {\n        console.error('Chat API error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\nfunction buildContext(searchResults, docChunks, profile, specializations = [], certificates = [], diplomas = []) {\n    let context = '';\n    // Add course information\n    if (searchResults && searchResults.length > 0) {\n        context += 'Available Courses:\\n';\n        searchResults.slice(0, 5).forEach((course)=>{\n            context += `- ${course.id}: ${course.title} (${course.dept})\\n`;\n            context += `  Description: ${course.description?.substring(0, 200)}...\\n`;\n            context += `  Skills: ${course.skills?.join(', ')}\\n`;\n            context += `  Terms: ${course.terms_offered?.join(', ')}\\n\\n`;\n        });\n    }\n    // Add specializations information\n    if (specializations.length > 0) {\n        context += 'SPECIALIZATIONS AVAILABLE (use ONLY these, do not generate your own list):\\n';\n        specializations.forEach((spec, index)=>{\n            context += `${index + 1}. ${spec.name} (${spec.program})\\n`;\n            context += `   Requirements: ${spec.graduation_requirements?.substring(0, 200)}...\\n`;\n            // Show required courses\n            if (spec.course_requirements?.required?.length > 0) {\n                context += `   Required Courses: ${spec.course_requirements.required.join(', ')}\\n`;\n            }\n            // Show elective courses from choose_from\n            if (spec.course_requirements?.choose_from?.examples?.length > 0) {\n                context += `   Elective Courses (choose from):\\n`;\n                spec.course_requirements.choose_from.examples.forEach((course)=>{\n                    context += `     - ${course}\\n`;\n                });\n            }\n            // Show other choose_from categories\n            if (spec.course_requirements?.choose_from) {\n                Object.entries(spec.course_requirements.choose_from).forEach(([category, courses])=>{\n                    if (category !== 'examples' && Array.isArray(courses) && courses.length > 0) {\n                        context += `   ${category.replace(/_/g, ' ').toUpperCase()}:\\n`;\n                        courses.forEach((course)=>{\n                            context += `     - ${course}\\n`;\n                        });\n                    }\n                });\n            }\n            context += '\\n';\n        });\n        context += 'IMPORTANT: Only mention these specializations above. Do not create or generate additional lists. Ask if they want to see more options.\\n\\n';\n    }\n    // Add certificates information\n    if (certificates.length > 0) {\n        context += 'CERTIFICATES AVAILABLE (use ONLY these, do not generate your own list):\\n';\n        certificates.forEach((cert, index)=>{\n            context += `${index + 1}. ${cert.name}\\n`;\n            context += `   Administered by: ${cert.administered_by}\\n`;\n            context += `   Requirements: ${cert.requirements?.substring(0, 200)}...\\n`;\n            context += '\\n';\n        });\n        context += 'IMPORTANT: Only mention these certificates above. Do not create or generate additional lists. Ask if they want to see more options.\\n\\n';\n    }\n    // Add diplomas information\n    if (diplomas.length > 0) {\n        context += 'DIPLOMAS AVAILABLE (use ONLY these, do not generate your own list):\\n';\n        diplomas.forEach((diploma, index)=>{\n            context += `${index + 1}. ${diploma.name}\\n`;\n            context += `   Administered by: ${diploma.administered_by}\\n`;\n            context += `   Requirements: ${diploma.requirements?.substring(0, 200)}...\\n`;\n            context += '\\n';\n        });\n        context += 'IMPORTANT: Only mention these diplomas above. Do not create or generate additional lists. Ask if they want to see more options.\\n\\n';\n    }\n    // Add document chunks\n    if (docChunks.length > 0) {\n        context += 'Relevant Information:\\n';\n        docChunks.forEach((chunk, index)=>{\n            context += `${index + 1}. ${chunk.text.substring(0, 300)}...\\n`;\n            context += `   Source: ${chunk.source_url}\\n\\n`;\n        });\n    }\n    // Add user profile context\n    context += `User Profile:\\n`;\n    context += `- Program: ${profile.program || 'Not specified'}\\n`;\n    context += `- Term: ${profile.current_term || 'Not specified'}\\n`;\n    context += `- Goals: ${profile.goal_tags.join(', ') || 'Not specified'}\\n`;\n    context += `- Completed: ${profile.completed_courses.join(', ') || 'None'}\\n`;\n    return context;\n}\nfunction getSystemPrompt(profile) {\n    // Convert program abbreviation to full name\n    const programAbbreviations = {\n        'ARCH': 'Architecture',\n        'AE': 'Architectural Engineering',\n        'BME': 'Biomedical Engineering',\n        'CHE': 'Chemical Engineering',\n        'CIVE': 'Civil Engineering',\n        'ECE': 'Computer Engineering',\n        'EE': 'Electrical Engineering',\n        'ENVE': 'Environmental Engineering',\n        'GEOE': 'Geological Engineering',\n        'MGT': 'Management Engineering',\n        'ME': 'Mechanical Engineering',\n        'MTE': 'Mechatronics Engineering',\n        'NANO': 'Nanotechnology Engineering',\n        'SE': 'Software Engineering',\n        'SYDE': 'Systems Design Engineering'\n    };\n    const fullProgramName = programAbbreviations[profile.program || ''] || profile.program || 'Not specified';\n    // Generate likely completed courses based on term\n    const likelyCompletedCourses = generateLikelyCompletedCourses(profile.current_term || '', profile.program || '');\n    return `Hey! 👋 I'm your friendly elective advisor here at Waterloo Engineering. I'm here to help you navigate the maze of course options and find the perfect electives for your goals!\n\nIMPORTANT: I use only plain text formatting - no asterisks, no bold, no italic text. Just regular text.\n\n**About you:**\n- Program: ${fullProgramName}\n- Current Term: ${profile.current_term || 'Not specified'}\n- Goals: ${profile.goal_tags.join(', ') || 'Not specified'}\n- Completed Courses: ${profile.completed_courses.join(', ') || 'None'}\n- Likely Completed (based on term): ${likelyCompletedCourses.join(', ')}\n\n**COURSE CONTEXT AWARENESS:**\n- I understand that as a ${profile.current_term || 'student'}, you've likely completed certain core courses\n- If you haven't specified your completed electives, I may ask you to clarify what electives you've already taken\n- I consider prerequisites when recommending courses - I won't suggest courses you can't take yet\n- I'm aware of typical course progression in ${fullProgramName} program\n\n**IMPORTANT:** If the user's program is \"Not specified\", I should ask them to specify their engineering program (e.g., Software Engineering, Computer Engineering, etc.) so I can provide accurate recommendations for specializations, certificates, and diplomas.\n\n**How I can help:**\n- Chat about course options and what might interest you\n- Explain prerequisites and requirements in simple terms\n- Help you understand how courses fit into different specializations\n- Show you available specializations, certificates, and diplomas for your program\n- Give you the real scoop on workload and term availability\n- Share career insights and why certain courses matter\n- Ask about your completed electives when relevant for better recommendations\n\n**IMPORTANT RULES:**\n- I ONLY use information provided in the context below - I never make up or generate lists\n- I show ONLY the top 3 best options from the database with their specific course requirements\n- I provide the exact course codes and names from the database (e.g., \"CS 486 Introduction to Artificial Intelligence\")\n- I ask if you want to see more options after showing the top 3\n- I never mention programs that aren't in the context (like Aerospace Engineering)\n- I'm conversational and friendly - no formal academic jargon unless needed\n- I only give recommendations when you ask for them\n- I'll ask questions to understand what you're looking for\n- I'm honest about what I know and don't know\n- I NEVER use markdown formatting like **bold** or *italic* - just use plain text\n- IMPORTANT: Use only plain text, no asterisks, no bold, no italic formatting\n- I consider your academic level and likely completed courses when making recommendations\n- If I'm unsure about your completed courses, I'll ask you to clarify\n\nJust chat with me naturally! Ask me anything about electives, courses, specializations, or your academic journey. I'm here to help make your course selection process less overwhelming and more exciting! 🚀`;\n}\n// Generate likely completed courses based on term and program\nfunction generateLikelyCompletedCourses(term, program) {\n    const likelyCourses = [];\n    if (!term) return likelyCourses;\n    // Common first year courses (1A, 1B)\n    if (term.includes('1A') || term.includes('1B')) {\n        likelyCourses.push('MATH 115', 'MATH 117', 'MATH 119', 'PHYS 115', 'CHE 102', 'GENE 121');\n    }\n    // Second year courses (2A, 2B)\n    if (term.includes('2A') || term.includes('2B')) {\n        likelyCourses.push('MATH 211', 'MATH 213', 'MATH 215', 'PHYS 125', 'PHYS 175');\n        // Program-specific courses\n        if (program === 'MTE' || program === 'ME') {\n            likelyCourses.push('MTE 100', 'MTE 100L', 'MTE 120', 'MTE 140');\n        }\n        if (program === 'ECE' || program === 'EE') {\n            likelyCourses.push('ECE 150', 'ECE 155', 'ECE 250');\n        }\n        if (program === 'SE' || program === 'CS') {\n            likelyCourses.push('CS 135', 'CS 136', 'CS 137');\n        }\n    }\n    // Third year courses (3A, 3B)\n    if (term.includes('3A') || term.includes('3B')) {\n        likelyCourses.push('MATH 237', 'MATH 239');\n        if (program === 'MTE' || program === 'ME') {\n            likelyCourses.push('MTE 220', 'MTE 240', 'MTE 320', 'MTE 340');\n        }\n        if (program === 'ECE' || program === 'EE') {\n            likelyCourses.push('ECE 222', 'ECE 250', 'ECE 380');\n        }\n        if (program === 'SE' || program === 'CS') {\n            likelyCourses.push('CS 241', 'CS 245', 'CS 246');\n        }\n    }\n    // Fourth year courses (4A, 4B)\n    if (term.includes('4A') || term.includes('4B')) {\n        if (program === 'MTE' || program === 'ME') {\n            likelyCourses.push('MTE 380', 'MTE 420', 'MTE 440');\n        }\n        if (program === 'ECE' || program === 'EE') {\n            likelyCourses.push('ECE 380', 'ECE 480');\n        }\n        if (program === 'SE' || program === 'CS') {\n            likelyCourses.push('CS 350', 'CS 370');\n        }\n    }\n    return likelyCourses;\n}\n// Determine if we should ask about completed electives\nfunction shouldAskAboutCompletedElectives(message, profile) {\n    const messageLower = message.toLowerCase();\n    // Check if user is asking for elective recommendations\n    const isElectiveQuery = messageLower.includes('elective') || messageLower.includes('cse') || messageLower.includes('recommend') || messageLower.includes('suggest');\n    // Check if user has no completed courses listed\n    const hasNoCompletedCourses = !profile.completed_courses || profile.completed_courses.length === 0;\n    // Check if user is in 2A or later (when they would have taken electives)\n    const isUpperYear = !!(profile.current_term && (profile.current_term.includes('2A') || profile.current_term.includes('2B') || profile.current_term.includes('3A') || profile.current_term.includes('3B') || profile.current_term.includes('4A') || profile.current_term.includes('4B')));\n    return isElectiveQuery && hasNoCompletedCourses && isUpperYear;\n}\nfunction shouldGenerateRecommendations(message) {\n    const messageLower = message.toLowerCase();\n    const recommendationTriggers = [\n        'recommend',\n        'recomend',\n        'reccomend',\n        'reccomendations',\n        'recommendations',\n        'suggest',\n        'courses',\n        'electives',\n        'what courses',\n        'which courses',\n        'best electives',\n        'good courses',\n        'options',\n        'course recommendations',\n        'course recomendations',\n        'course reccomendations',\n        'elective suggestions',\n        'help me choose',\n        'what electives',\n        'show me courses',\n        'give me',\n        'find courses',\n        'course options',\n        'elective options',\n        'robotics',\n        'ai',\n        'machine learning',\n        '2a',\n        '2b',\n        '3a',\n        '3b',\n        '4a',\n        '4b',\n        'plan my term',\n        'term planning',\n        'generate',\n        'give me',\n        'list',\n        'show',\n        'find',\n        'search',\n        'looking for',\n        'technical',\n        'elective',\n        'next term',\n        'future terms',\n        'what about',\n        'should i take',\n        'what should',\n        'which should'\n    ];\n    console.log('🔍 Testing recommendation trigger for:', message);\n    console.log('🔍 Message lowercased:', messageLower);\n    // Don't give recommendations for simple greetings\n    const greetings = [\n        'hello',\n        'hi',\n        'hey',\n        'good morning',\n        'good afternoon',\n        'good evening',\n        'thanks',\n        'thank you'\n    ];\n    if (greetings.some((greeting)=>messageLower.includes(greeting))) {\n        return false;\n    }\n    // Check for recommendation triggers\n    const hasTrigger = recommendationTriggers.some((trigger)=>messageLower.includes(trigger));\n    // Debug: show which triggers match\n    const matchingTriggers = recommendationTriggers.filter((trigger)=>messageLower.includes(trigger));\n    console.log('🔍 Trigger analysis:', {\n        messageLower,\n        hasTrigger,\n        matchingTriggers,\n        totalTriggers: recommendationTriggers.length\n    });\n    // Also check if message is asking for help with courses/electives\n    const courseHelpPatterns = [\n        /what.*course/i,\n        /which.*course/i,\n        /help.*course/i,\n        /elective.*help/i,\n        /course.*help/i,\n        /recommendation/i,\n        /suggestion/i\n    ];\n    const hasCourseHelp = courseHelpPatterns.some((pattern)=>pattern.test(message));\n    console.log('🔍 Recommendation check:', {\n        message: messageLower,\n        hasTrigger,\n        matchingTriggers,\n        hasCourseHelp,\n        shouldRecommend: hasTrigger || hasCourseHelp\n    });\n    return hasTrigger || hasCourseHelp;\n}\n// Build search query from conversation context\nfunction buildSearchQueryFromContext(currentMessage, recentMessages) {\n    // Extract key terms from the current message\n    const currentTerms = extractKeyTerms(currentMessage);\n    // Extract key terms from recent messages (last 3 messages)\n    const recentTerms = recentMessages.slice(-3) // Last 3 messages\n    .map((msg)=>{\n        const content = typeof msg.content === 'string' ? msg.content : JSON.stringify(msg.content);\n        return extractKeyTerms(content);\n    }).flat();\n    // Combine all terms and remove duplicates\n    const allTerms = [\n        ...new Set([\n            ...currentTerms,\n            ...recentTerms\n        ])\n    ];\n    // Filter out common words and keep meaningful terms\n    const meaningfulTerms = allTerms.filter((term)=>term.length > 2 && ![\n            'give',\n            'me',\n            'recommendations',\n            'suggestions',\n            'please',\n            'thanks',\n            'thank',\n            'you',\n            'can',\n            'help',\n            'with',\n            'the',\n            'a',\n            'an',\n            'and',\n            'or',\n            'but',\n            'in',\n            'on',\n            'at',\n            'to',\n            'for',\n            'of',\n            'with',\n            'by'\n        ].includes(term));\n    // Build a comprehensive search query\n    const searchQuery = meaningfulTerms.join(' ');\n    console.log('🔍 Context analysis:', {\n        currentMessage,\n        currentTerms,\n        recentTerms,\n        allTerms,\n        meaningfulTerms,\n        finalQuery: searchQuery\n    });\n    return searchQuery || currentMessage // Fallback to current message if no context\n    ;\n}\n// Extract key terms from a message\nfunction extractKeyTerms(message) {\n    return message.toLowerCase().replace(/[^\\w\\s]/g, ' ') // Remove special characters\n    .split(/\\s+/).filter((word)=>word.length > 2);\n}\nasync function generateRecommendations(profile, query) {\n    console.log('🔍 generateRecommendations called with:', {\n        query,\n        profile: profile.program,\n        term: profile.current_term\n    });\n    // Search for relevant courses (don't filter by term - use it as guidance only)\n    const courses = await (0,_lib_search__WEBPACK_IMPORTED_MODULE_3__.searchCourses)(query, {\n    });\n    console.log('📚 Found courses:', courses.length, 'courses');\n    if (courses.length > 0) {\n        console.log('📚 Sample course:', courses[0].id, courses[0].title);\n    }\n    // Calculate scores and generate recommendations\n    const recommendations = courses.map((course)=>{\n        const scoreData = (0,_lib_search__WEBPACK_IMPORTED_MODULE_3__.calculateCourseScore)(course, profile, profile.goal_tags);\n        console.log(`📊 Course ${course.id} score:`, scoreData.score);\n        return {\n            course,\n            ...scoreData\n        };\n    }).sort((a, b)=>b.score - a.score).slice(0, 5);\n    console.log('🎯 Final recommendations:', recommendations.length, 'recommendations');\n    return recommendations;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9jaGF0L3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF1RDtBQUNkO0FBQ3FCO0FBQ21GO0FBRWpKLG9DQUFvQztBQUNwQyxTQUFTUywwQkFBMEJDLE9BQWU7SUFDaEQsTUFBTUMsa0JBQWtCO1FBQ3RCLHdCQUF3QjtZQUFDO1lBQVk7WUFBTTtTQUF1QjtRQUNsRSx3QkFBd0I7WUFBQztZQUFZO1lBQU07WUFBd0I7U0FBVztRQUM5RSwwQkFBMEI7WUFBQztZQUFjO1lBQU07U0FBeUI7UUFDeEUsMEJBQTBCO1lBQUM7WUFBYztZQUFNO1NBQXlCO1FBQ3hFLHFCQUFxQjtZQUFDO1lBQVM7WUFBTztTQUFvQjtRQUMxRCx3QkFBd0I7WUFBQztZQUFZO1lBQU87U0FBdUI7UUFDbkUsOEJBQThCO1lBQUM7WUFBVztZQUFRO1NBQWlCO1FBQ25FLDBCQUEwQjtZQUFDO1lBQWM7WUFBTztTQUF5QjtRQUN6RSw2QkFBNkI7WUFBQztZQUFpQjtZQUFPO1NBQTRCO1FBQ2xGLDBCQUEwQjtZQUFDO1lBQWM7WUFBTztTQUF5QjtRQUN6RSw2QkFBNkI7WUFBQztZQUFpQjtZQUFNO1NBQTRCO1FBQ2pGLDhCQUE4QjtZQUFDO1lBQWtCO1lBQU07U0FBTztJQUNoRTtJQUVBLE1BQU1DLGVBQWVGLFFBQVFHLFdBQVc7SUFDeEMsS0FBSyxNQUFNLENBQUNDLFNBQVNDLFNBQVMsSUFBSUMsT0FBT0MsT0FBTyxDQUFDTixpQkFBa0I7UUFDakUsSUFBSUksU0FBU0csSUFBSSxDQUFDQyxDQUFBQSxVQUFXUCxhQUFhUSxRQUFRLENBQUNELFdBQVc7WUFDNUQsT0FBT0w7UUFDVDtJQUNGO0lBQ0EsT0FBTztBQUNUO0FBRTBEO0FBSW5ELGVBQWVRLEtBQUtDLE9BQW9CO0lBQzdDLElBQUk7UUFDRixNQUFNLEVBQUViLE9BQU8sRUFBRWMsU0FBUyxFQUFFQyxNQUFNLEVBQUUsR0FBRyxNQUFNRixRQUFRRyxJQUFJO1FBRXpELElBQUksQ0FBQ2hCLFdBQVcsQ0FBQ2MsYUFBYSxDQUFDQyxRQUFRO1lBQ3JDLE9BQU96QixxREFBWUEsQ0FBQzBCLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBMEIsR0FDbkM7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDhDQUE4QztRQUM5Q0MsUUFBUUMsR0FBRyxDQUFDLHdDQUF3Q0w7UUFFcEQsSUFBSU07UUFDSixJQUFJO1lBQ0YsTUFBTSxFQUFFQyxNQUFNQyxRQUFRLEVBQUVOLE9BQU9PLFlBQVksRUFBRSxHQUFHLE1BQU1qQyxtREFBUUEsQ0FDM0RrQyxJQUFJLENBQUMsWUFDTEMsTUFBTSxDQUFDLEtBQ1BDLEVBQUUsQ0FBQyxXQUFXWjtZQUVqQkksUUFBUUMsR0FBRyxDQUFDLDRCQUE0QjtnQkFBRUc7Z0JBQVVDO1lBQWE7WUFFakUsSUFBSUEsY0FBYztnQkFDaEJMLFFBQVFGLEtBQUssQ0FBQywwQkFBMEJPO2dCQUN4Qyx3REFBd0Q7Z0JBQ3hESCxVQUFVO29CQUNSTyxTQUFTYjtvQkFDVGMsVUFBVTtvQkFDVnpCLFNBQVM7b0JBQ1QwQixjQUFjO29CQUNkQyxtQkFBbUIsRUFBRTtvQkFDckJDLGlCQUFpQixFQUFFO29CQUNuQkMsV0FBVzt3QkFBQztxQkFBVTtvQkFDdEJDLFdBQVc7d0JBQUM7cUJBQVU7b0JBQ3RCQyxxQkFBcUI7b0JBQ3JCQyxLQUFLO29CQUNMQyxhQUFhO3dCQUNYQyxjQUFjO3dCQUNkQyxjQUFjO3dCQUNkQyxzQkFBc0IsRUFBRTtvQkFDMUI7Z0JBQ0Y7Z0JBQ0FyQixRQUFRQyxHQUFHLENBQUM7WUFDZCxPQUFPLElBQUksQ0FBQ0csWUFBWUEsU0FBU2tCLE1BQU0sS0FBSyxHQUFHO2dCQUM3Q3RCLFFBQVFGLEtBQUssQ0FBQyxtQ0FBbUNGO2dCQUNqRCwwQ0FBMEM7Z0JBQzFDTSxVQUFVO29CQUNSTyxTQUFTYjtvQkFDVGMsVUFBVTtvQkFDVnpCLFNBQVM7b0JBQ1QwQixjQUFjO29CQUNkQyxtQkFBbUIsRUFBRTtvQkFDckJDLGlCQUFpQixFQUFFO29CQUNuQkMsV0FBVzt3QkFBQztxQkFBVTtvQkFDdEJDLFdBQVc7d0JBQUM7cUJBQVU7b0JBQ3RCQyxxQkFBcUI7b0JBQ3JCQyxLQUFLO29CQUNMQyxhQUFhO3dCQUNYQyxjQUFjO3dCQUNkQyxjQUFjO3dCQUNkQyxzQkFBc0IsRUFBRTtvQkFDMUI7Z0JBQ0Y7Z0JBQ0FyQixRQUFRQyxHQUFHLENBQUM7WUFDZCxPQUFPO2dCQUNMQyxVQUFVRSxRQUFRLENBQUMsRUFBRTtnQkFDckJKLFFBQVFDLEdBQUcsQ0FBQyxvQkFBb0JDO1lBQ2xDO1FBQ0YsRUFBRSxPQUFPSixPQUFPO1lBQ2RFLFFBQVFGLEtBQUssQ0FBQyxxQ0FBcUNBO1lBQ25ELG9DQUFvQztZQUNwQ0ksVUFBVTtnQkFDUk8sU0FBU2I7Z0JBQ1RjLFVBQVU7Z0JBQ1Z6QixTQUFTO2dCQUNUMEIsY0FBYztnQkFDZEMsbUJBQW1CLEVBQUU7Z0JBQ3JCQyxpQkFBaUIsRUFBRTtnQkFDbkJDLFdBQVc7b0JBQUM7aUJBQVU7Z0JBQ3RCQyxXQUFXO29CQUFDO2lCQUFVO2dCQUN0QkMscUJBQXFCO2dCQUNyQkMsS0FBSztnQkFDTEMsYUFBYTtvQkFDWEMsY0FBYztvQkFDZEMsY0FBYztvQkFDZEMsc0JBQXNCLEVBQUU7Z0JBQzFCO1lBQ0Y7WUFDQXJCLFFBQVFDLEdBQUcsQ0FBQztRQUNkO1FBRUEsa0NBQWtDO1FBQ2xDLE1BQU1zQixpQkFBaUIsTUFBTS9CLHdFQUFpQkEsQ0FBQ0csV0FBVztRQUUxRCwwRUFBMEU7UUFDMUUsSUFBSTZCLGdCQUFnQixFQUFFO1FBQ3RCLElBQUk7WUFDRkEsZ0JBQWdCLE1BQU1qRCwwREFBYUEsQ0FBQ00sU0FBUztnQkFDM0M0QyxNQUFNdkIsUUFBUVMsWUFBWTtnQkFDMUJlLFFBQVF4QixRQUFRYSxTQUFTO1lBQzNCO1FBQ0YsRUFBRSxPQUFPakIsT0FBTztZQUNkRSxRQUFRRixLQUFLLENBQUMsOEJBQThCQTtZQUM1Qyw0QkFBNEI7WUFDNUIwQixnQkFBZ0I7Z0JBQ2Q7b0JBQ0VHLElBQUk7b0JBQ0pDLE9BQU87b0JBQ1BDLE1BQU07b0JBQ05DLFFBQVE7b0JBQ1JDLE9BQU87b0JBQ1BDLE9BQU87b0JBQ1BDLGFBQWE7b0JBQ2JDLGVBQWU7d0JBQUM7d0JBQUs7cUJBQUk7b0JBQ3pCQyxTQUFTO29CQUNUVCxRQUFRO3dCQUFDO3dCQUFZO3dCQUFXO3FCQUFXO29CQUMzQ1UsVUFBVTt3QkFBRUMsU0FBUzt3QkFBR0MsYUFBYTt3QkFBR0MsVUFBVTt3QkFBR0MsTUFBTTtvQkFBRTtvQkFDN0RDLGFBQWE7d0JBQUVDLFNBQVM7d0JBQUlDLE9BQU87d0JBQUlMLGFBQWE7d0JBQUlNLFNBQVM7b0JBQUc7b0JBQ3BFQyxZQUFZO2dCQUNkO2FBQ0Q7WUFDRDdDLFFBQVFDLEdBQUcsQ0FBQztRQUNkO1FBRUEseURBQXlEO1FBQ3pELHlFQUF5RTtRQUN6RSxNQUFNNkMsa0JBQWtCNUMsUUFBUWpCLE9BQU8sSUFBSUwsMEJBQTBCQyxZQUFZO1FBQ2pGbUIsUUFBUUMsR0FBRyxDQUFDLENBQUMsOEJBQThCLEVBQUU2QyxnQkFBZ0Isa0JBQWtCLEVBQUU1QyxRQUFRakIsT0FBTyxDQUFDLEVBQUUsQ0FBQztRQUVwRyx5RkFBeUY7UUFDekYsSUFBSSxDQUFDaUIsUUFBUWpCLE9BQU8sSUFBSUwsMEJBQTBCQyxVQUFVO1lBQzFEbUIsUUFBUUMsR0FBRyxDQUFDLENBQUMsdUNBQXVDLEVBQUU2QyxpQkFBaUI7WUFDdkUsSUFBSTtnQkFDRixNQUFNMUUsbURBQVFBLENBQ1hrQyxJQUFJLENBQUMsWUFDTHlDLE1BQU0sQ0FBQztvQkFBRTlELFNBQVM2RDtnQkFBZ0IsR0FDbEN0QyxFQUFFLENBQUMsV0FBV04sUUFBUU8sT0FBTztZQUNsQyxFQUFFLE9BQU9YLE9BQU87Z0JBQ2RFLFFBQVFGLEtBQUssQ0FBQyw2QkFBNkJBO1lBQzdDO1FBQ0Y7UUFFQSw2Q0FBNkM7UUFDN0MsSUFBSWtELGtCQUFrQixFQUFFO1FBQ3hCLElBQUlDLGVBQWUsRUFBRTtRQUNyQixJQUFJQyxXQUFXLEVBQUU7UUFDakIsSUFBSUMsWUFBWSxFQUFFO1FBRWxCLElBQUk7WUFDRkgsa0JBQWtCLE1BQU14RSxrRUFBcUJBLENBQUNLLFNBQVNpRSxpQkFBaUI7UUFDMUUsRUFBRSxPQUFPaEQsT0FBTztZQUNkRSxRQUFRRixLQUFLLENBQUMsc0NBQXNDQTtRQUN0RDtRQUVBLElBQUk7WUFDRm1ELGVBQWUsTUFBTXhFLCtEQUFrQkEsQ0FBQ0ksU0FBU2lFLGlCQUFpQjtRQUNwRSxFQUFFLE9BQU9oRCxPQUFPO1lBQ2RFLFFBQVFGLEtBQUssQ0FBQyxtQ0FBbUNBO1FBQ25EO1FBRUEsSUFBSTtZQUNGb0QsV0FBVyxNQUFNeEUsMkRBQWNBLENBQUNHLFNBQVNpRSxpQkFBaUI7UUFDNUQsRUFBRSxPQUFPaEQsT0FBTztZQUNkRSxRQUFRRixLQUFLLENBQUMsK0JBQStCQTtRQUMvQztRQUVBLElBQUk7WUFDRix1Q0FBdUM7WUFDdkNxRCxZQUFZLE1BQU03RSwrREFBa0JBLENBQUNPLFNBQVMsS0FBSztRQUNyRCxFQUFFLE9BQU9pQixPQUFPO1lBQ2RFLFFBQVFGLEtBQUssQ0FBQyxzQ0FBc0NBO1FBQ3REO1FBRUEsNEJBQTRCO1FBQzVCLE1BQU1zRCxVQUFVQyxhQUFhN0IsZUFBZTJCLFdBQVdqRCxTQUFTOEMsaUJBQWlCQyxjQUFjQztRQUUvRixtREFBbUQ7UUFDbkQsTUFBTUksMEJBQTBCQyxpQ0FBaUMxRSxTQUFTcUI7UUFFMUUsK0JBQStCO1FBQy9CLE1BQU1zRCxXQUFXO1lBQ2Y7Z0JBQ0VDLE1BQU07Z0JBQ05DLFNBQVNDLGdCQUFnQnpEO1lBQzNCO2VBQ0dxQixlQUFlcUMsR0FBRyxDQUFDQyxDQUFBQSxNQUFRO29CQUM1QkosTUFBTUksSUFBSUMsUUFBUSxPQUFPLFVBQVUsU0FBa0I7b0JBQ3JESixTQUFTLE9BQU9HLElBQUlILE9BQU8sS0FBSyxXQUFXRyxJQUFJSCxPQUFPLEdBQUdLLEtBQUtDLFNBQVMsQ0FBQ0gsSUFBSUgsT0FBTztnQkFDckY7WUFDQTtnQkFDRUQsTUFBTTtnQkFDTkMsU0FBUyxHQUFHN0UsUUFBUSxjQUFjLEVBQUV1RSxVQUFVRSwwQkFBMEIsaUdBQWlHLElBQUk7WUFDL0s7U0FDRDtRQUVELGtCQUFrQjtRQUNsQixNQUFNVyxhQUFhLE1BQU01Riw4REFBaUJBLENBQUNtRjtRQUUzQyw0QkFBNEI7UUFDNUIsTUFBTXBGLG1EQUFRQSxDQUFDa0MsSUFBSSxDQUFDLFlBQVk0RCxNQUFNLENBQUM7WUFDckM7Z0JBQ0VDLFlBQVl4RTtnQkFDWjhELE1BQU07Z0JBQ05DLFNBQVM3RTtnQkFDVHVGLFFBQVFDLEtBQUtDLElBQUksQ0FBQ3pGLFFBQVF5QyxNQUFNLEdBQUc7WUFDckM7WUFDQTtnQkFDRTZDLFlBQVl4RTtnQkFDWjhELE1BQU07Z0JBQ05DLFNBQVNPO2dCQUNURyxRQUFRQyxLQUFLQyxJQUFJLENBQUNMLFdBQVczQyxNQUFNLEdBQUc7Z0JBQ3RDaUQsV0FBV3BCLFVBQVVTLEdBQUcsQ0FBQ1ksQ0FBQUEsUUFBVTt3QkFDakNDLEtBQUtELE1BQU0zQixVQUFVO3dCQUNyQjZCLE1BQU1GLE1BQU1FLElBQUksQ0FBQ0MsU0FBUyxDQUFDLEdBQUcsT0FBTztvQkFDdkM7WUFDRjtTQUNEO1FBRUQsOENBQThDO1FBQzlDLElBQUlDLGtCQUFrQixFQUFFO1FBQ3hCLE1BQU1DLGtCQUFrQkMsOEJBQThCakc7UUFDdERtQixRQUFRQyxHQUFHLENBQUMsdUNBQXVDNEUsaUJBQWlCLGdCQUFnQmhHO1FBRXBGLElBQUlnRyxpQkFBaUI7WUFDbkI3RSxRQUFRQyxHQUFHLENBQUM7WUFDWixzREFBc0Q7WUFDdEQsTUFBTThFLGVBQWVDLDRCQUE0Qm5HLFNBQVMwQztZQUMxRHZCLFFBQVFDLEdBQUcsQ0FBQyxzQ0FBc0M4RTtZQUNsREgsa0JBQWtCLE1BQU1LLHdCQUF3Qi9FLFNBQVM2RTtZQUN6RC9FLFFBQVFDLEdBQUcsQ0FBQyxpQ0FBaUMyRSxnQkFBZ0J0RCxNQUFNLEVBQUU7UUFDdkU7UUFFQXRCLFFBQVFDLEdBQUcsQ0FBQyxvQkFBb0I7WUFDOUJpRixnQkFBZ0JqQixXQUFXM0MsTUFBTTtZQUNqQzZELHNCQUFzQlAsZ0JBQWdCdEQsTUFBTTtZQUM1Q3NELGlCQUFpQkEsZ0JBQWdCaEIsR0FBRyxDQUFDd0IsQ0FBQUEsSUFBTTtvQkFBRXpELElBQUl5RCxFQUFFQyxNQUFNLEVBQUUxRDtvQkFBSUMsT0FBT3dELEVBQUVDLE1BQU0sRUFBRXpEO29CQUFPMEQsT0FBT0YsRUFBRUUsS0FBSztnQkFBQztRQUN4RztRQUVBLE9BQU9uSCxxREFBWUEsQ0FBQzBCLElBQUksQ0FBQztZQUN2QjBGLFVBQVV0QjtZQUNWVztZQUNBWSxTQUFTLEVBQUU7WUFDWEMsaUJBQWlCO1FBQ25CO0lBRUYsRUFBRSxPQUFPM0YsT0FBTztRQUNkRSxRQUFRRixLQUFLLENBQUMsbUJBQW1CQTtRQUNqQyxPQUFPM0IscURBQVlBLENBQUMwQixJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBd0IsR0FDakM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0Y7QUFFQSxTQUFTc0QsYUFDUDdCLGFBQWtCLEVBQ2xCMkIsU0FBZ0IsRUFDaEJqRCxPQUFvQixFQUNwQjhDLGtCQUF5QixFQUFFLEVBQzNCQyxlQUFzQixFQUFFLEVBQ3hCQyxXQUFrQixFQUFFO0lBRXBCLElBQUlFLFVBQVU7SUFFZCx5QkFBeUI7SUFDekIsSUFBSTVCLGlCQUFpQkEsY0FBY0YsTUFBTSxHQUFHLEdBQUc7UUFDN0M4QixXQUFXO1FBQ1g1QixjQUFja0UsS0FBSyxDQUFDLEdBQUcsR0FBR0MsT0FBTyxDQUFDLENBQUNOO1lBQ2pDakMsV0FBVyxDQUFDLEVBQUUsRUFBRWlDLE9BQU8xRCxFQUFFLENBQUMsRUFBRSxFQUFFMEQsT0FBT3pELEtBQUssQ0FBQyxFQUFFLEVBQUV5RCxPQUFPeEQsSUFBSSxDQUFDLEdBQUcsQ0FBQztZQUMvRHVCLFdBQVcsQ0FBQyxlQUFlLEVBQUVpQyxPQUFPcEQsV0FBVyxFQUFFMEMsVUFBVSxHQUFHLEtBQUssS0FBSyxDQUFDO1lBQ3pFdkIsV0FBVyxDQUFDLFVBQVUsRUFBRWlDLE9BQU8zRCxNQUFNLEVBQUVrRSxLQUFLLE1BQU0sRUFBRSxDQUFDO1lBQ3JEeEMsV0FBVyxDQUFDLFNBQVMsRUFBRWlDLE9BQU9uRCxhQUFhLEVBQUUwRCxLQUFLLE1BQU0sSUFBSSxDQUFDO1FBQy9EO0lBQ0Y7SUFFQSxrQ0FBa0M7SUFDbEMsSUFBSTVDLGdCQUFnQjFCLE1BQU0sR0FBRyxHQUFHO1FBQzlCOEIsV0FBVztRQUNYSixnQkFBZ0IyQyxPQUFPLENBQUMsQ0FBQ0UsTUFBV0M7WUFDbEMxQyxXQUFXLEdBQUcwQyxRQUFRLEVBQUUsRUFBRSxFQUFFRCxLQUFLRSxJQUFJLENBQUMsRUFBRSxFQUFFRixLQUFLNUcsT0FBTyxDQUFDLEdBQUcsQ0FBQztZQUMzRG1FLFdBQVcsQ0FBQyxpQkFBaUIsRUFBRXlDLEtBQUtHLHVCQUF1QixFQUFFckIsVUFBVSxHQUFHLEtBQUssS0FBSyxDQUFDO1lBRXJGLHdCQUF3QjtZQUN4QixJQUFJa0IsS0FBS0ksbUJBQW1CLEVBQUVDLFVBQVU1RSxTQUFTLEdBQUc7Z0JBQ2xEOEIsV0FBVyxDQUFDLHFCQUFxQixFQUFFeUMsS0FBS0ksbUJBQW1CLENBQUNDLFFBQVEsQ0FBQ04sSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ3JGO1lBRUEseUNBQXlDO1lBQ3pDLElBQUlDLEtBQUtJLG1CQUFtQixFQUFFRSxhQUFhQyxVQUFVOUUsU0FBUyxHQUFHO2dCQUMvRDhCLFdBQVcsQ0FBQyxvQ0FBb0MsQ0FBQztnQkFDakR5QyxLQUFLSSxtQkFBbUIsQ0FBQ0UsV0FBVyxDQUFDQyxRQUFRLENBQUNULE9BQU8sQ0FBQyxDQUFDTjtvQkFDckRqQyxXQUFXLENBQUMsT0FBTyxFQUFFaUMsT0FBTyxFQUFFLENBQUM7Z0JBQ2pDO1lBQ0Y7WUFFQSxvQ0FBb0M7WUFDcEMsSUFBSVEsS0FBS0ksbUJBQW1CLEVBQUVFLGFBQWE7Z0JBQ3pDaEgsT0FBT0MsT0FBTyxDQUFDeUcsS0FBS0ksbUJBQW1CLENBQUNFLFdBQVcsRUFBRVIsT0FBTyxDQUFDLENBQUMsQ0FBQ1UsVUFBVUMsUUFBdUI7b0JBQzlGLElBQUlELGFBQWEsY0FBY0UsTUFBTUMsT0FBTyxDQUFDRixZQUFZQSxRQUFRaEYsTUFBTSxHQUFHLEdBQUc7d0JBQzNFOEIsV0FBVyxDQUFDLEdBQUcsRUFBRWlELFNBQVNJLE9BQU8sQ0FBQyxNQUFNLEtBQUtDLFdBQVcsR0FBRyxHQUFHLENBQUM7d0JBQy9ESixRQUFRWCxPQUFPLENBQUMsQ0FBQ047NEJBQ2ZqQyxXQUFXLENBQUMsT0FBTyxFQUFFaUMsT0FBTyxFQUFFLENBQUM7d0JBQ2pDO29CQUNGO2dCQUNGO1lBQ0Y7WUFFQWpDLFdBQVc7UUFDYjtRQUNBQSxXQUFXO0lBQ2I7SUFFQSwrQkFBK0I7SUFDL0IsSUFBSUgsYUFBYTNCLE1BQU0sR0FBRyxHQUFHO1FBQzNCOEIsV0FBVztRQUNYSCxhQUFhMEMsT0FBTyxDQUFDLENBQUNnQixNQUFXYjtZQUMvQjFDLFdBQVcsR0FBRzBDLFFBQVEsRUFBRSxFQUFFLEVBQUVhLEtBQUtaLElBQUksQ0FBQyxFQUFFLENBQUM7WUFDekMzQyxXQUFXLENBQUMsb0JBQW9CLEVBQUV1RCxLQUFLQyxlQUFlLENBQUMsRUFBRSxDQUFDO1lBQzFEeEQsV0FBVyxDQUFDLGlCQUFpQixFQUFFdUQsS0FBS0UsWUFBWSxFQUFFbEMsVUFBVSxHQUFHLEtBQUssS0FBSyxDQUFDO1lBQzFFdkIsV0FBVztRQUNiO1FBQ0FBLFdBQVc7SUFDYjtJQUVBLDJCQUEyQjtJQUMzQixJQUFJRixTQUFTNUIsTUFBTSxHQUFHLEdBQUc7UUFDdkI4QixXQUFXO1FBQ1hGLFNBQVN5QyxPQUFPLENBQUMsQ0FBQ21CLFNBQWNoQjtZQUM5QjFDLFdBQVcsR0FBRzBDLFFBQVEsRUFBRSxFQUFFLEVBQUVnQixRQUFRZixJQUFJLENBQUMsRUFBRSxDQUFDO1lBQzVDM0MsV0FBVyxDQUFDLG9CQUFvQixFQUFFMEQsUUFBUUYsZUFBZSxDQUFDLEVBQUUsQ0FBQztZQUM3RHhELFdBQVcsQ0FBQyxpQkFBaUIsRUFBRTBELFFBQVFELFlBQVksRUFBRWxDLFVBQVUsR0FBRyxLQUFLLEtBQUssQ0FBQztZQUM3RXZCLFdBQVc7UUFDYjtRQUNBQSxXQUFXO0lBQ2I7SUFFQSxzQkFBc0I7SUFDdEIsSUFBSUQsVUFBVTdCLE1BQU0sR0FBRyxHQUFHO1FBQ3hCOEIsV0FBVztRQUNYRCxVQUFVd0MsT0FBTyxDQUFDLENBQUNuQixPQUFPc0I7WUFDeEIxQyxXQUFXLEdBQUcwQyxRQUFRLEVBQUUsRUFBRSxFQUFFdEIsTUFBTUUsSUFBSSxDQUFDQyxTQUFTLENBQUMsR0FBRyxLQUFLLEtBQUssQ0FBQztZQUMvRHZCLFdBQVcsQ0FBQyxXQUFXLEVBQUVvQixNQUFNM0IsVUFBVSxDQUFDLElBQUksQ0FBQztRQUNqRDtJQUNGO0lBRUEsMkJBQTJCO0lBQzNCTyxXQUFXLENBQUMsZUFBZSxDQUFDO0lBQzVCQSxXQUFXLENBQUMsV0FBVyxFQUFFbEQsUUFBUWpCLE9BQU8sSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO0lBQy9EbUUsV0FBVyxDQUFDLFFBQVEsRUFBRWxELFFBQVFTLFlBQVksSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO0lBQ2pFeUMsV0FBVyxDQUFDLFNBQVMsRUFBRWxELFFBQVFhLFNBQVMsQ0FBQzZFLElBQUksQ0FBQyxTQUFTLGdCQUFnQixFQUFFLENBQUM7SUFDMUV4QyxXQUFXLENBQUMsYUFBYSxFQUFFbEQsUUFBUVUsaUJBQWlCLENBQUNnRixJQUFJLENBQUMsU0FBUyxPQUFPLEVBQUUsQ0FBQztJQUU3RSxPQUFPeEM7QUFDVDtBQUVBLFNBQVNPLGdCQUFnQnpELE9BQW9CO0lBQzNDLDRDQUE0QztJQUM1QyxNQUFNNkcsdUJBQWtEO1FBQ3RELFFBQVE7UUFDUixNQUFNO1FBQ04sT0FBTztRQUNQLE9BQU87UUFDUCxRQUFRO1FBQ1IsT0FBTztRQUNQLE1BQU07UUFDTixRQUFRO1FBQ1IsUUFBUTtRQUNSLE9BQU87UUFDUCxNQUFNO1FBQ04sT0FBTztRQUNQLFFBQVE7UUFDUixNQUFNO1FBQ04sUUFBUTtJQUNWO0lBRUEsTUFBTUMsa0JBQWtCRCxvQkFBb0IsQ0FBQzdHLFFBQVFqQixPQUFPLElBQUksR0FBRyxJQUFJaUIsUUFBUWpCLE9BQU8sSUFBSTtJQUUxRixrREFBa0Q7SUFDbEQsTUFBTWdJLHlCQUF5QkMsK0JBQStCaEgsUUFBUVMsWUFBWSxJQUFJLElBQUlULFFBQVFqQixPQUFPLElBQUk7SUFFN0csT0FBTyxDQUFDOzs7OztXQUtDLEVBQUUrSCxnQkFBZ0I7Z0JBQ2IsRUFBRTlHLFFBQVFTLFlBQVksSUFBSSxnQkFBZ0I7U0FDakQsRUFBRVQsUUFBUWEsU0FBUyxDQUFDNkUsSUFBSSxDQUFDLFNBQVMsZ0JBQWdCO3FCQUN0QyxFQUFFMUYsUUFBUVUsaUJBQWlCLENBQUNnRixJQUFJLENBQUMsU0FBUyxPQUFPO29DQUNsQyxFQUFFcUIsdUJBQXVCckIsSUFBSSxDQUFDLE1BQU07Ozt5QkFHL0MsRUFBRTFGLFFBQVFTLFlBQVksSUFBSSxVQUFVOzs7NkNBR2hCLEVBQUVxRyxnQkFBZ0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Nk1BNEI4SSxDQUFDO0FBQzlNO0FBRUEsOERBQThEO0FBQzlELFNBQVNFLCtCQUErQnpGLElBQVksRUFBRXhDLE9BQWU7SUFDbkUsTUFBTWtJLGdCQUEwQixFQUFFO0lBRWxDLElBQUksQ0FBQzFGLE1BQU0sT0FBTzBGO0lBRWxCLHFDQUFxQztJQUNyQyxJQUFJMUYsS0FBS2xDLFFBQVEsQ0FBQyxTQUFTa0MsS0FBS2xDLFFBQVEsQ0FBQyxPQUFPO1FBQzlDNEgsY0FBY0MsSUFBSSxDQUFDLFlBQVksWUFBWSxZQUFZLFlBQVksV0FBVztJQUNoRjtJQUVBLCtCQUErQjtJQUMvQixJQUFJM0YsS0FBS2xDLFFBQVEsQ0FBQyxTQUFTa0MsS0FBS2xDLFFBQVEsQ0FBQyxPQUFPO1FBQzlDNEgsY0FBY0MsSUFBSSxDQUFDLFlBQVksWUFBWSxZQUFZLFlBQVk7UUFFbkUsMkJBQTJCO1FBQzNCLElBQUluSSxZQUFZLFNBQVNBLFlBQVksTUFBTTtZQUN6Q2tJLGNBQWNDLElBQUksQ0FBQyxXQUFXLFlBQVksV0FBVztRQUN2RDtRQUNBLElBQUluSSxZQUFZLFNBQVNBLFlBQVksTUFBTTtZQUN6Q2tJLGNBQWNDLElBQUksQ0FBQyxXQUFXLFdBQVc7UUFDM0M7UUFDQSxJQUFJbkksWUFBWSxRQUFRQSxZQUFZLE1BQU07WUFDeENrSSxjQUFjQyxJQUFJLENBQUMsVUFBVSxVQUFVO1FBQ3pDO0lBQ0Y7SUFFQSw4QkFBOEI7SUFDOUIsSUFBSTNGLEtBQUtsQyxRQUFRLENBQUMsU0FBU2tDLEtBQUtsQyxRQUFRLENBQUMsT0FBTztRQUM5QzRILGNBQWNDLElBQUksQ0FBQyxZQUFZO1FBRS9CLElBQUluSSxZQUFZLFNBQVNBLFlBQVksTUFBTTtZQUN6Q2tJLGNBQWNDLElBQUksQ0FBQyxXQUFXLFdBQVcsV0FBVztRQUN0RDtRQUNBLElBQUluSSxZQUFZLFNBQVNBLFlBQVksTUFBTTtZQUN6Q2tJLGNBQWNDLElBQUksQ0FBQyxXQUFXLFdBQVc7UUFDM0M7UUFDQSxJQUFJbkksWUFBWSxRQUFRQSxZQUFZLE1BQU07WUFDeENrSSxjQUFjQyxJQUFJLENBQUMsVUFBVSxVQUFVO1FBQ3pDO0lBQ0Y7SUFFQSwrQkFBK0I7SUFDL0IsSUFBSTNGLEtBQUtsQyxRQUFRLENBQUMsU0FBU2tDLEtBQUtsQyxRQUFRLENBQUMsT0FBTztRQUM5QyxJQUFJTixZQUFZLFNBQVNBLFlBQVksTUFBTTtZQUN6Q2tJLGNBQWNDLElBQUksQ0FBQyxXQUFXLFdBQVc7UUFDM0M7UUFDQSxJQUFJbkksWUFBWSxTQUFTQSxZQUFZLE1BQU07WUFDekNrSSxjQUFjQyxJQUFJLENBQUMsV0FBVztRQUNoQztRQUNBLElBQUluSSxZQUFZLFFBQVFBLFlBQVksTUFBTTtZQUN4Q2tJLGNBQWNDLElBQUksQ0FBQyxVQUFVO1FBQy9CO0lBQ0Y7SUFFQSxPQUFPRDtBQUNUO0FBRUEsdURBQXVEO0FBQ3ZELFNBQVM1RCxpQ0FBaUMxRSxPQUFlLEVBQUVxQixPQUFvQjtJQUM3RSxNQUFNbkIsZUFBZUYsUUFBUUcsV0FBVztJQUV4Qyx1REFBdUQ7SUFDdkQsTUFBTXFJLGtCQUFrQnRJLGFBQWFRLFFBQVEsQ0FBQyxlQUN2QlIsYUFBYVEsUUFBUSxDQUFDLFVBQ3RCUixhQUFhUSxRQUFRLENBQUMsZ0JBQ3RCUixhQUFhUSxRQUFRLENBQUM7SUFFN0MsZ0RBQWdEO0lBQ2hELE1BQU0rSCx3QkFBd0IsQ0FBQ3BILFFBQVFVLGlCQUFpQixJQUFJVixRQUFRVSxpQkFBaUIsQ0FBQ1UsTUFBTSxLQUFLO0lBRWpHLHlFQUF5RTtJQUN6RSxNQUFNaUcsY0FBYyxDQUFDLENBQUVySCxDQUFBQSxRQUFRUyxZQUFZLElBQ3pDVCxDQUFBQSxRQUFRUyxZQUFZLENBQUNwQixRQUFRLENBQUMsU0FDOUJXLFFBQVFTLFlBQVksQ0FBQ3BCLFFBQVEsQ0FBQyxTQUM5QlcsUUFBUVMsWUFBWSxDQUFDcEIsUUFBUSxDQUFDLFNBQzlCVyxRQUFRUyxZQUFZLENBQUNwQixRQUFRLENBQUMsU0FDOUJXLFFBQVFTLFlBQVksQ0FBQ3BCLFFBQVEsQ0FBQyxTQUM5QlcsUUFBUVMsWUFBWSxDQUFDcEIsUUFBUSxDQUFDLEtBQUksQ0FDcEM7SUFFQSxPQUFPOEgsbUJBQW1CQyx5QkFBeUJDO0FBQ3JEO0FBRUEsU0FBU3pDLDhCQUE4QmpHLE9BQWU7SUFDcEQsTUFBTUUsZUFBZUYsUUFBUUcsV0FBVztJQUV4QyxNQUFNd0kseUJBQXlCO1FBQzdCO1FBQWE7UUFBWTtRQUFhO1FBQW1CO1FBQW1CO1FBQVc7UUFBVztRQUFhO1FBQWdCO1FBQy9IO1FBQWtCO1FBQWdCO1FBQVc7UUFBMEI7UUFBeUI7UUFDaEc7UUFBd0I7UUFBa0I7UUFBa0I7UUFBa0I7UUFDOUU7UUFBZ0I7UUFBa0I7UUFBb0I7UUFBWTtRQUFNO1FBQ3hFO1FBQU07UUFBTTtRQUFNO1FBQU07UUFBTTtRQUFNO1FBQWdCO1FBQWlCO1FBQ3JFO1FBQVc7UUFBUTtRQUFRO1FBQVE7UUFBVTtRQUFlO1FBQWE7UUFDekU7UUFBYTtRQUFnQjtRQUFjO1FBQWlCO1FBQWU7S0FDNUU7SUFFRHhILFFBQVFDLEdBQUcsQ0FBQywwQ0FBMENwQjtJQUN0RG1CLFFBQVFDLEdBQUcsQ0FBQywwQkFBMEJsQjtJQUd0QyxrREFBa0Q7SUFDbEQsTUFBTTBJLFlBQVk7UUFBQztRQUFTO1FBQU07UUFBTztRQUFnQjtRQUFrQjtRQUFnQjtRQUFVO0tBQVk7SUFDakgsSUFBSUEsVUFBVXBJLElBQUksQ0FBQ3FJLENBQUFBLFdBQVkzSSxhQUFhUSxRQUFRLENBQUNtSSxZQUFZO1FBQy9ELE9BQU87SUFDVDtJQUVBLG9DQUFvQztJQUNwQyxNQUFNQyxhQUFhSCx1QkFBdUJuSSxJQUFJLENBQUN1SSxDQUFBQSxVQUM3QzdJLGFBQWFRLFFBQVEsQ0FBQ3FJO0lBR3hCLG1DQUFtQztJQUNuQyxNQUFNQyxtQkFBbUJMLHVCQUF1Qk0sTUFBTSxDQUFDRixDQUFBQSxVQUNyRDdJLGFBQWFRLFFBQVEsQ0FBQ3FJO0lBR3hCNUgsUUFBUUMsR0FBRyxDQUFDLHdCQUF3QjtRQUNsQ2xCO1FBQ0E0STtRQUNBRTtRQUNBRSxlQUFlUCx1QkFBdUJsRyxNQUFNO0lBQzlDO0lBRUEsa0VBQWtFO0lBQ2xFLE1BQU0wRyxxQkFBcUI7UUFDekI7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7S0FDRDtJQUVELE1BQU1DLGdCQUFnQkQsbUJBQW1CM0ksSUFBSSxDQUFDNkksQ0FBQUEsVUFBV0EsUUFBUUMsSUFBSSxDQUFDdEo7SUFFdEVtQixRQUFRQyxHQUFHLENBQUMsNEJBQTRCO1FBQ3RDcEIsU0FBU0U7UUFDVDRJO1FBQ0FFO1FBQ0FJO1FBQ0FwRCxpQkFBaUI4QyxjQUFjTTtJQUNqQztJQUVBLE9BQU9OLGNBQWNNO0FBQ3ZCO0FBRUEsK0NBQStDO0FBQy9DLFNBQVNqRCw0QkFBNEJvRCxjQUFzQixFQUFFN0csY0FBcUI7SUFDaEYsNkNBQTZDO0lBQzdDLE1BQU04RyxlQUFlQyxnQkFBZ0JGO0lBRXJDLDJEQUEyRDtJQUMzRCxNQUFNRyxjQUFjaEgsZUFDakJtRSxLQUFLLENBQUMsQ0FBQyxHQUFHLGtCQUFrQjtLQUM1QjlCLEdBQUcsQ0FBQ0MsQ0FBQUE7UUFDSCxNQUFNSCxVQUFVLE9BQU9HLElBQUlILE9BQU8sS0FBSyxXQUFXRyxJQUFJSCxPQUFPLEdBQUdLLEtBQUtDLFNBQVMsQ0FBQ0gsSUFBSUgsT0FBTztRQUMxRixPQUFPNEUsZ0JBQWdCNUU7SUFDekIsR0FDQzhFLElBQUk7SUFFUCwwQ0FBMEM7SUFDMUMsTUFBTUMsV0FBVztXQUFJLElBQUlDLElBQUk7ZUFBSUw7ZUFBaUJFO1NBQVk7S0FBRTtJQUVoRSxvREFBb0Q7SUFDcEQsTUFBTUksa0JBQWtCRixTQUFTWCxNQUFNLENBQUNyRyxDQUFBQSxPQUN0Q0EsS0FBS0gsTUFBTSxHQUFHLEtBQ2QsQ0FBQztZQUFDO1lBQVE7WUFBTTtZQUFtQjtZQUFlO1lBQVU7WUFBVTtZQUFTO1lBQU87WUFBTztZQUFRO1lBQVE7WUFBTztZQUFLO1lBQU07WUFBTztZQUFNO1lBQU87WUFBTTtZQUFNO1lBQU07WUFBTTtZQUFPO1lBQU07WUFBUTtTQUFLLENBQUMvQixRQUFRLENBQUNrQztJQUdqTixxQ0FBcUM7SUFDckMsTUFBTW1ILGNBQWNELGdCQUFnQi9DLElBQUksQ0FBQztJQUV6QzVGLFFBQVFDLEdBQUcsQ0FBQyx3QkFBd0I7UUFDbENtSTtRQUNBQztRQUNBRTtRQUNBRTtRQUNBRTtRQUNBRSxZQUFZRDtJQUNkO0lBRUEsT0FBT0EsZUFBZVIsZUFBZSw0Q0FBNEM7O0FBQ25GO0FBRUEsbUNBQW1DO0FBQ25DLFNBQVNFLGdCQUFnQnpKLE9BQWU7SUFDdEMsT0FBT0EsUUFDSkcsV0FBVyxHQUNYeUgsT0FBTyxDQUFDLFlBQVksS0FBSyw0QkFBNEI7S0FDckRxQyxLQUFLLENBQUMsT0FDTmhCLE1BQU0sQ0FBQ2lCLENBQUFBLE9BQVFBLEtBQUt6SCxNQUFNLEdBQUc7QUFDbEM7QUFFQSxlQUFlMkQsd0JBQ2IvRSxPQUFvQixFQUNwQjhJLEtBQWE7SUFFYmhKLFFBQVFDLEdBQUcsQ0FBQywyQ0FBMkM7UUFBRStJO1FBQU85SSxTQUFTQSxRQUFRakIsT0FBTztRQUFFd0MsTUFBTXZCLFFBQVFTLFlBQVk7SUFBQztJQUVySCwrRUFBK0U7SUFDL0UsTUFBTTJGLFVBQVUsTUFBTS9ILDBEQUFhQSxDQUFDeUssT0FBTztJQUUzQztJQUVBaEosUUFBUUMsR0FBRyxDQUFDLHFCQUFxQnFHLFFBQVFoRixNQUFNLEVBQUU7SUFDakQsSUFBSWdGLFFBQVFoRixNQUFNLEdBQUcsR0FBRztRQUN0QnRCLFFBQVFDLEdBQUcsQ0FBQyxxQkFBcUJxRyxPQUFPLENBQUMsRUFBRSxDQUFDM0UsRUFBRSxFQUFFMkUsT0FBTyxDQUFDLEVBQUUsQ0FBQzFFLEtBQUs7SUFDbEU7SUFFQSxnREFBZ0Q7SUFDaEQsTUFBTWdELGtCQUFrQjBCLFFBQ3JCMUMsR0FBRyxDQUFDeUIsQ0FBQUE7UUFDSCxNQUFNNEQsWUFBWXRLLGlFQUFvQkEsQ0FBQzBHLFFBQVFuRixTQUFTQSxRQUFRYSxTQUFTO1FBQ3pFZixRQUFRQyxHQUFHLENBQUMsQ0FBQyxVQUFVLEVBQUVvRixPQUFPMUQsRUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFc0gsVUFBVTNELEtBQUs7UUFDNUQsT0FBTztZQUNMRDtZQUNBLEdBQUc0RCxTQUFTO1FBQ2Q7SUFDRixHQUNDQyxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTUEsRUFBRTlELEtBQUssR0FBRzZELEVBQUU3RCxLQUFLLEVBQ2hDSSxLQUFLLENBQUMsR0FBRztJQUVaMUYsUUFBUUMsR0FBRyxDQUFDLDZCQUE2QjJFLGdCQUFnQnRELE1BQU0sRUFBRTtJQUNqRSxPQUFPc0Q7QUFDVCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxzaGlsb1xcRWxlY3RpdmUgQ2hvb3NlclxcZnJvbnRlbmRcXHNyY1xcYXBwXFxhcGlcXGNoYXRcXHJvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAnQC9saWIvc3VwYWJhc2UnXG5pbXBvcnQgeyBnZXRDaGF0Q29tcGxldGlvbiwgZ2V0RW1iZWRkaW5nIH0gZnJvbSAnQC9saWIvb3BlbmFpJ1xuaW1wb3J0IHsgc2VhcmNoRWxlY3RpdmVEb2NzLCBzZWFyY2hDb3Vyc2VzLCBzZWFyY2hTcGVjaWFsaXphdGlvbnMsIHNlYXJjaENlcnRpZmljYXRlcywgc2VhcmNoRGlwbG9tYXMsIGNhbGN1bGF0ZUNvdXJzZVNjb3JlIH0gZnJvbSAnQC9saWIvc2VhcmNoJ1xuXG4vLyBFeHRyYWN0IHByb2dyYW0gZnJvbSB1c2VyIG1lc3NhZ2VcbmZ1bmN0aW9uIGV4dHJhY3RQcm9ncmFtRnJvbU1lc3NhZ2UobWVzc2FnZTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gIGNvbnN0IHByb2dyYW1LZXl3b3JkcyA9IHtcbiAgICAnU29mdHdhcmUgRW5naW5lZXJpbmcnOiBbJ3NvZnR3YXJlJywgJ3NlJywgJ3NvZnR3YXJlIGVuZ2luZWVyaW5nJ10sXG4gICAgJ0NvbXB1dGVyIEVuZ2luZWVyaW5nJzogWydjb21wdXRlcicsICdjZScsICdjb21wdXRlciBlbmdpbmVlcmluZycsICdjb21wIGVuZyddLFxuICAgICdFbGVjdHJpY2FsIEVuZ2luZWVyaW5nJzogWydlbGVjdHJpY2FsJywgJ2VlJywgJ2VsZWN0cmljYWwgZW5naW5lZXJpbmcnXSxcbiAgICAnTWVjaGFuaWNhbCBFbmdpbmVlcmluZyc6IFsnbWVjaGFuaWNhbCcsICdtZScsICdtZWNoYW5pY2FsIGVuZ2luZWVyaW5nJ10sXG4gICAgJ0NpdmlsIEVuZ2luZWVyaW5nJzogWydjaXZpbCcsICdjaXYnLCAnY2l2aWwgZW5naW5lZXJpbmcnXSxcbiAgICAnQ2hlbWljYWwgRW5naW5lZXJpbmcnOiBbJ2NoZW1pY2FsJywgJ2NoZScsICdjaGVtaWNhbCBlbmdpbmVlcmluZyddLFxuICAgICdTeXN0ZW1zIERlc2lnbiBFbmdpbmVlcmluZyc6IFsnc3lzdGVtcycsICdzeWRlJywgJ3N5c3RlbXMgZGVzaWduJ10sXG4gICAgJ0Jpb21lZGljYWwgRW5naW5lZXJpbmcnOiBbJ2Jpb21lZGljYWwnLCAnYm1lJywgJ2Jpb21lZGljYWwgZW5naW5lZXJpbmcnXSxcbiAgICAnRW52aXJvbm1lbnRhbCBFbmdpbmVlcmluZyc6IFsnZW52aXJvbm1lbnRhbCcsICdlbnYnLCAnZW52aXJvbm1lbnRhbCBlbmdpbmVlcmluZyddLFxuICAgICdHZW9sb2dpY2FsIEVuZ2luZWVyaW5nJzogWydnZW9sb2dpY2FsJywgJ2dlbycsICdnZW9sb2dpY2FsIGVuZ2luZWVyaW5nJ10sXG4gICAgJ0FyY2hpdGVjdHVyYWwgRW5naW5lZXJpbmcnOiBbJ2FyY2hpdGVjdHVyYWwnLCAnYWUnLCAnYXJjaGl0ZWN0dXJhbCBlbmdpbmVlcmluZyddLFxuICAgICdOYW5vdGVjaG5vbG9neSBFbmdpbmVlcmluZyc6IFsnbmFub3RlY2hub2xvZ3knLCAnbmUnLCAnbmFubyddXG4gIH1cbiAgXG4gIGNvbnN0IG1lc3NhZ2VMb3dlciA9IG1lc3NhZ2UudG9Mb3dlckNhc2UoKVxuICBmb3IgKGNvbnN0IFtwcm9ncmFtLCBrZXl3b3Jkc10gb2YgT2JqZWN0LmVudHJpZXMocHJvZ3JhbUtleXdvcmRzKSkge1xuICAgIGlmIChrZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gbWVzc2FnZUxvd2VyLmluY2x1ZGVzKGtleXdvcmQpKSkge1xuICAgICAgcmV0dXJuIHByb2dyYW1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGxcbn1cbmltcG9ydCB7IGVuaGFuY2VkU2VhcmNoIH0gZnJvbSAnQC9saWIvd2ViLXNlYXJjaCdcbmltcG9ydCB7IGdldFJlY2VudE1lc3NhZ2VzIH0gZnJvbSAnQC9saWIvbGFuZ2NoYWluLW1lbW9yeSdcbmltcG9ydCB7IFVzZXJQcm9maWxlIH0gZnJvbSAnQC9saWIvdHlwZXMnXG5pbXBvcnQgeyBkZW1vQ291cnNlcywgZGVtb09wdGlvbnMgfSBmcm9tICdAL2xpYi9kZW1vLWRhdGEnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBtZXNzYWdlLCBzZXNzaW9uSWQsIHVzZXJJZCB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcblxuICAgIGlmICghbWVzc2FnZSB8fCAhc2Vzc2lvbklkIHx8ICF1c2VySWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBHZXQgdXNlciBwcm9maWxlIHdpdGggYmV0dGVyIGVycm9yIGhhbmRsaW5nXG4gICAgY29uc29sZS5sb2coJ/CflI0gTG9va2luZyBmb3IgcHJvZmlsZSB3aXRoIHVzZXJfaWQ6JywgdXNlcklkKVxuICAgIFxuICAgIGxldCBwcm9maWxlXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZXMsIGVycm9yOiBwcm9maWxlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdwcm9maWxlcycpXG4gICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpXG5cbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFByb2ZpbGUgcXVlcnkgcmVzdWx0OicsIHsgcHJvZmlsZXMsIHByb2ZpbGVFcnJvciB9KVxuXG4gICAgICBpZiAocHJvZmlsZUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBQcm9maWxlIHF1ZXJ5IGVycm9yOicsIHByb2ZpbGVFcnJvcilcbiAgICAgICAgLy8gQ3JlYXRlIGEgZmFsbGJhY2sgcHJvZmlsZSB0byBwcmV2ZW50IGNvbXBsZXRlIGZhaWx1cmVcbiAgICAgICAgcHJvZmlsZSA9IHtcbiAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgICAgdXNlcm5hbWU6ICdVc2VyJyxcbiAgICAgICAgICBwcm9ncmFtOiAnTm90IHNwZWNpZmllZCcsXG4gICAgICAgICAgY3VycmVudF90ZXJtOiAnMkEnLFxuICAgICAgICAgIGNvbXBsZXRlZF9jb3Vyc2VzOiBbXSxcbiAgICAgICAgICBwbGFubmVkX2NvdXJzZXM6IFtdLFxuICAgICAgICAgIGludGVyZXN0czogWydnZW5lcmFsJ10sXG4gICAgICAgICAgZ29hbF90YWdzOiBbJ2dlbmVyYWwnXSxcbiAgICAgICAgICBhZGRpdGlvbmFsX2NvbW1lbnRzOiAnJyxcbiAgICAgICAgICBncGE6IDAsXG4gICAgICAgICAgY29uc3RyYWludHM6IHtcbiAgICAgICAgICAgIG1heF93b3JrbG9hZDogNCxcbiAgICAgICAgICAgIG1vcm5pbmdfbGFiczogZmFsc2UsXG4gICAgICAgICAgICBzY2hlZHVsZV9wcmVmZXJlbmNlczogW11cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBVc2luZyBmYWxsYmFjayBwcm9maWxlIGR1ZSB0byBkYXRhYmFzZSBlcnJvcicpXG4gICAgICB9IGVsc2UgaWYgKCFwcm9maWxlcyB8fCBwcm9maWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIE5vIHByb2ZpbGUgZm91bmQgZm9yIHVzZXJfaWQ6JywgdXNlcklkKVxuICAgICAgICAvLyBDcmVhdGUgYSBmYWxsYmFjayBwcm9maWxlIGZvciBuZXcgdXNlcnNcbiAgICAgICAgcHJvZmlsZSA9IHtcbiAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgICAgdXNlcm5hbWU6ICdVc2VyJyxcbiAgICAgICAgICBwcm9ncmFtOiAnTm90IHNwZWNpZmllZCcsXG4gICAgICAgICAgY3VycmVudF90ZXJtOiAnMkEnLFxuICAgICAgICAgIGNvbXBsZXRlZF9jb3Vyc2VzOiBbXSxcbiAgICAgICAgICBwbGFubmVkX2NvdXJzZXM6IFtdLFxuICAgICAgICAgIGludGVyZXN0czogWydnZW5lcmFsJ10sXG4gICAgICAgICAgZ29hbF90YWdzOiBbJ2dlbmVyYWwnXSxcbiAgICAgICAgICBhZGRpdGlvbmFsX2NvbW1lbnRzOiAnJyxcbiAgICAgICAgICBncGE6IDAsXG4gICAgICAgICAgY29uc3RyYWludHM6IHtcbiAgICAgICAgICAgIG1heF93b3JrbG9hZDogNCxcbiAgICAgICAgICAgIG1vcm5pbmdfbGFiczogZmFsc2UsXG4gICAgICAgICAgICBzY2hlZHVsZV9wcmVmZXJlbmNlczogW11cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBVc2luZyBmYWxsYmFjayBwcm9maWxlIC0gbm8gcHJvZmlsZSBmb3VuZCcpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9maWxlID0gcHJvZmlsZXNbMF1cbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBQcm9maWxlIGZvdW5kOicsIHByb2ZpbGUpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBDcml0aWNhbCBlcnJvciBsb2FkaW5nIHByb2ZpbGU6JywgZXJyb3IpXG4gICAgICAvLyBDcmVhdGUgYSBtaW5pbWFsIGZhbGxiYWNrIHByb2ZpbGVcbiAgICAgIHByb2ZpbGUgPSB7XG4gICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgdXNlcm5hbWU6ICdVc2VyJyxcbiAgICAgICAgcHJvZ3JhbTogJ05vdCBzcGVjaWZpZWQnLFxuICAgICAgICBjdXJyZW50X3Rlcm06ICcyQScsXG4gICAgICAgIGNvbXBsZXRlZF9jb3Vyc2VzOiBbXSxcbiAgICAgICAgcGxhbm5lZF9jb3Vyc2VzOiBbXSxcbiAgICAgICAgaW50ZXJlc3RzOiBbJ2dlbmVyYWwnXSxcbiAgICAgICAgZ29hbF90YWdzOiBbJ2dlbmVyYWwnXSxcbiAgICAgICAgYWRkaXRpb25hbF9jb21tZW50czogJycsXG4gICAgICAgIGdwYTogMCxcbiAgICAgICAgY29uc3RyYWludHM6IHtcbiAgICAgICAgICBtYXhfd29ya2xvYWQ6IDQsXG4gICAgICAgICAgbW9ybmluZ19sYWJzOiBmYWxzZSxcbiAgICAgICAgICBzY2hlZHVsZV9wcmVmZXJlbmNlczogW11cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBVc2luZyBlbWVyZ2VuY3kgZmFsbGJhY2sgcHJvZmlsZScpXG4gICAgfVxuXG4gICAgLy8gR2V0IHJlY2VudCBjb252ZXJzYXRpb24gaGlzdG9yeVxuICAgIGNvbnN0IHJlY2VudE1lc3NhZ2VzID0gYXdhaXQgZ2V0UmVjZW50TWVzc2FnZXMoc2Vzc2lvbklkLCA2KVxuXG4gICAgLy8gU2VhcmNoIGZvciByZWxldmFudCBpbmZvcm1hdGlvbiB1c2luZyB2ZWN0b3Igc2VhcmNoIHdpdGggZXJyb3IgaGFuZGxpbmdcbiAgICBsZXQgc2VhcmNoUmVzdWx0cyA9IFtdXG4gICAgdHJ5IHtcbiAgICAgIHNlYXJjaFJlc3VsdHMgPSBhd2FpdCBzZWFyY2hDb3Vyc2VzKG1lc3NhZ2UsIHtcbiAgICAgICAgdGVybTogcHJvZmlsZS5jdXJyZW50X3Rlcm0sXG4gICAgICAgIHNraWxsczogcHJvZmlsZS5nb2FsX3RhZ3NcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBzZWFyY2hpbmcgY291cnNlczonLCBlcnJvcilcbiAgICAgIC8vIFVzZSBkZW1vIGRhdGEgYXMgZmFsbGJhY2tcbiAgICAgIHNlYXJjaFJlc3VsdHMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogXCJFQ0U0ODZcIixcbiAgICAgICAgICB0aXRsZTogXCJSb2JvdCBEeW5hbWljcyBhbmQgQ29udHJvbFwiLFxuICAgICAgICAgIGRlcHQ6IFwiRUNFXCIsXG4gICAgICAgICAgbnVtYmVyOiA0ODYsXG4gICAgICAgICAgdW5pdHM6IDAuNSxcbiAgICAgICAgICBsZXZlbDogNDAwLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkFkdmFuY2VkIGNvdXJzZSBjb3ZlcmluZyByb2JvdCBraW5lbWF0aWNzLCBkeW5hbWljcywgYW5kIGNvbnRyb2wgc3lzdGVtcy5cIixcbiAgICAgICAgICB0ZXJtc19vZmZlcmVkOiBbXCJGXCIsIFwiV1wiXSxcbiAgICAgICAgICBwcmVyZXFzOiBcIkVDRSAzODAsIE1BVEggMjExXCIsXG4gICAgICAgICAgc2tpbGxzOiBbXCJyb2JvdGljc1wiLCBcImNvbnRyb2xcIiwgXCJkeW5hbWljc1wiXSxcbiAgICAgICAgICB3b3JrbG9hZDogeyByZWFkaW5nOiAzLCBhc3NpZ25tZW50czogNCwgcHJvamVjdHM6IDIsIGxhYnM6IDIgfSxcbiAgICAgICAgICBhc3Nlc3NtZW50czogeyBtaWR0ZXJtOiAzMCwgZmluYWw6IDQwLCBhc3NpZ25tZW50czogMjAsIHByb2plY3Q6IDEwIH0sXG4gICAgICAgICAgc291cmNlX3VybDogXCJodHRwczovL3V3YXRlcmxvby5jYS9lbGVjdHJpY2FsLWNvbXB1dGVyLWVuZ2luZWVyaW5nL3VuZGVyZ3JhZHVhdGUtc3R1ZGllcy9jb3Vyc2UtY2F0YWxvZy9lY2UtNDg2XCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBVc2luZyBkZW1vIGRhdGEgZHVlIHRvIHNlYXJjaCBlcnJvcicpXG4gICAgfVxuXG4gICAgLy8gU2VhcmNoIGZvciBzcGVjaWFsaXphdGlvbnMsIGNlcnRpZmljYXRlcywgYW5kIGRpcGxvbWFzXG4gICAgLy8gVXNlIHByb2dyYW0gZnJvbSBwcm9maWxlLCBvciB0cnkgdG8gZXh0cmFjdCBmcm9tIGNvbnZlcnNhdGlvbiBpZiBlbXB0eVxuICAgIGNvbnN0IHByb2dyYW1Ub1NlYXJjaCA9IHByb2ZpbGUucHJvZ3JhbSB8fCBleHRyYWN0UHJvZ3JhbUZyb21NZXNzYWdlKG1lc3NhZ2UpIHx8ICdTb2Z0d2FyZSBFbmdpbmVlcmluZydcbiAgICBjb25zb2xlLmxvZyhg8J+UjSBVc2luZyBwcm9ncmFtIGZvciBzZWFyY2g6IFwiJHtwcm9ncmFtVG9TZWFyY2h9XCIgKGZyb20gcHJvZmlsZTogXCIke3Byb2ZpbGUucHJvZ3JhbX1cIilgKVxuICAgIFxuICAgIC8vIElmIHdlIGV4dHJhY3RlZCBhIHByb2dyYW0gZnJvbSB0aGUgbWVzc2FnZSBhbmQgdGhlIHByb2ZpbGUgZG9lc24ndCBoYXZlIG9uZSwgdXBkYXRlIGl0XG4gICAgaWYgKCFwcm9maWxlLnByb2dyYW0gJiYgZXh0cmFjdFByb2dyYW1Gcm9tTWVzc2FnZShtZXNzYWdlKSkge1xuICAgICAgY29uc29sZS5sb2coYPCflIQgVXBkYXRpbmcgdXNlciBwcm9maWxlIHdpdGggcHJvZ3JhbTogJHtwcm9ncmFtVG9TZWFyY2h9YClcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcbiAgICAgICAgICAudXBkYXRlKHsgcHJvZ3JhbTogcHJvZ3JhbVRvU2VhcmNoIH0pXG4gICAgICAgICAgLmVxKCd1c2VyX2lkJywgcHJvZmlsZS51c2VyX2lkKVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHVwZGF0ZSBwcm9maWxlOicsIGVycm9yKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTZWFyY2ggZm9yIGluZm9ybWF0aW9uIHdpdGggZXJyb3IgaGFuZGxpbmdcbiAgICBsZXQgc3BlY2lhbGl6YXRpb25zID0gW11cbiAgICBsZXQgY2VydGlmaWNhdGVzID0gW11cbiAgICBsZXQgZGlwbG9tYXMgPSBbXVxuICAgIGxldCBkb2NDaHVua3MgPSBbXVxuXG4gICAgdHJ5IHtcbiAgICAgIHNwZWNpYWxpemF0aW9ucyA9IGF3YWl0IHNlYXJjaFNwZWNpYWxpemF0aW9ucyhtZXNzYWdlLCBwcm9ncmFtVG9TZWFyY2gsIDMpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBzZWFyY2hpbmcgc3BlY2lhbGl6YXRpb25zOicsIGVycm9yKVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjZXJ0aWZpY2F0ZXMgPSBhd2FpdCBzZWFyY2hDZXJ0aWZpY2F0ZXMobWVzc2FnZSwgcHJvZ3JhbVRvU2VhcmNoLCAzKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3Igc2VhcmNoaW5nIGNlcnRpZmljYXRlczonLCBlcnJvcilcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgZGlwbG9tYXMgPSBhd2FpdCBzZWFyY2hEaXBsb21hcyhtZXNzYWdlLCBwcm9ncmFtVG9TZWFyY2gsIDMpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBzZWFyY2hpbmcgZGlwbG9tYXM6JywgZXJyb3IpXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCByZWxldmFudCBkb2N1bWVudCBjaHVua3MgZm9yIFJBR1xuICAgICAgZG9jQ2h1bmtzID0gYXdhaXQgc2VhcmNoRWxlY3RpdmVEb2NzKG1lc3NhZ2UsIDAuNiwgNSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIHNlYXJjaGluZyBkb2N1bWVudCBjaHVua3M6JywgZXJyb3IpXG4gICAgfVxuXG4gICAgLy8gQnVpbGQgY29udGV4dCBmb3IgdGhlIExMTVxuICAgIGNvbnN0IGNvbnRleHQgPSBidWlsZENvbnRleHQoc2VhcmNoUmVzdWx0cywgZG9jQ2h1bmtzLCBwcm9maWxlLCBzcGVjaWFsaXphdGlvbnMsIGNlcnRpZmljYXRlcywgZGlwbG9tYXMpXG5cbiAgICAvLyBDaGVjayBpZiB3ZSBzaG91bGQgYXNrIGFib3V0IGNvbXBsZXRlZCBlbGVjdGl2ZXNcbiAgICBjb25zdCBzaG91bGRBc2tBYm91dEVsZWN0aXZlcyA9IHNob3VsZEFza0Fib3V0Q29tcGxldGVkRWxlY3RpdmVzKG1lc3NhZ2UsIHByb2ZpbGUpXG4gICAgXG4gICAgLy8gQ3JlYXRlIGNvbnZlcnNhdGlvbiBtZXNzYWdlc1xuICAgIGNvbnN0IG1lc3NhZ2VzID0gW1xuICAgICAge1xuICAgICAgICByb2xlOiAnc3lzdGVtJyBhcyBjb25zdCxcbiAgICAgICAgY29udGVudDogZ2V0U3lzdGVtUHJvbXB0KHByb2ZpbGUpXG4gICAgICB9LFxuICAgICAgLi4ucmVjZW50TWVzc2FnZXMubWFwKG1zZyA9PiAoe1xuICAgICAgICByb2xlOiBtc2cuX2dldFR5cGUoKSA9PT0gJ2h1bWFuJyA/ICd1c2VyJyBhcyBjb25zdCA6ICdhc3Npc3RhbnQnIGFzIGNvbnN0LFxuICAgICAgICBjb250ZW50OiB0eXBlb2YgbXNnLmNvbnRlbnQgPT09ICdzdHJpbmcnID8gbXNnLmNvbnRlbnQgOiBKU09OLnN0cmluZ2lmeShtc2cuY29udGVudClcbiAgICAgIH0pKSxcbiAgICAgIHtcbiAgICAgICAgcm9sZTogJ3VzZXInIGFzIGNvbnN0LFxuICAgICAgICBjb250ZW50OiBgJHttZXNzYWdlfVxcblxcbkNvbnRleHQ6XFxuJHtjb250ZXh0fSR7c2hvdWxkQXNrQWJvdXRFbGVjdGl2ZXMgPyAnXFxuXFxuTk9URTogVGhlIHVzZXIgbWF5IG5lZWQgdG8gc3BlY2lmeSB0aGVpciBjb21wbGV0ZWQgZWxlY3RpdmVzIGZvciBiZXR0ZXIgcmVjb21tZW5kYXRpb25zLicgOiAnJ31gXG4gICAgICB9XG4gICAgXVxuXG4gICAgLy8gR2V0IEFJIHJlc3BvbnNlXG4gICAgY29uc3QgYWlSZXNwb25zZSA9IGF3YWl0IGdldENoYXRDb21wbGV0aW9uKG1lc3NhZ2VzKVxuXG4gICAgLy8gU2F2ZSBtZXNzYWdlcyB0byBkYXRhYmFzZVxuICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ21lc3NhZ2VzJykuaW5zZXJ0KFtcbiAgICAgIHtcbiAgICAgICAgc2Vzc2lvbl9pZDogc2Vzc2lvbklkLFxuICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UsXG4gICAgICAgIHRva2VuczogTWF0aC5jZWlsKG1lc3NhZ2UubGVuZ3RoIC8gNClcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHNlc3Npb25faWQ6IHNlc3Npb25JZCxcbiAgICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsXG4gICAgICAgIGNvbnRlbnQ6IGFpUmVzcG9uc2UsXG4gICAgICAgIHRva2VuczogTWF0aC5jZWlsKGFpUmVzcG9uc2UubGVuZ3RoIC8gNCksXG4gICAgICAgIGNpdGF0aW9uczogZG9jQ2h1bmtzLm1hcChjaHVuayA9PiAoe1xuICAgICAgICAgIHVybDogY2h1bmsuc291cmNlX3VybCxcbiAgICAgICAgICB0ZXh0OiBjaHVuay50ZXh0LnN1YnN0cmluZygwLCAyMDApICsgJy4uLidcbiAgICAgICAgfSkpXG4gICAgICB9XG4gICAgXSlcblxuICAgIC8vIEdlbmVyYXRlIGNvdXJzZSByZWNvbW1lbmRhdGlvbnMgaWYgcmVsZXZhbnRcbiAgICBsZXQgcmVjb21tZW5kYXRpb25zID0gW11cbiAgICBjb25zdCBzaG91bGRSZWNvbW1lbmQgPSBzaG91bGRHZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhtZXNzYWdlKVxuICAgIGNvbnNvbGUubG9nKCfwn5SNIFNob3VsZCBnZW5lcmF0ZSByZWNvbW1lbmRhdGlvbnM/Jywgc2hvdWxkUmVjb21tZW5kLCAnZm9yIG1lc3NhZ2U6JywgbWVzc2FnZSlcbiAgICBcbiAgICBpZiAoc2hvdWxkUmVjb21tZW5kKSB7XG4gICAgICBjb25zb2xlLmxvZygn8J+TmiBHZW5lcmF0aW5nIHJlY29tbWVuZGF0aW9ucy4uLicpXG4gICAgICAvLyBVc2UgdGhlIGZ1bGwgY29udmVyc2F0aW9uIGNvbnRleHQgZm9yIGJldHRlciBzZWFyY2hcbiAgICAgIGNvbnN0IGNvbnRleHRRdWVyeSA9IGJ1aWxkU2VhcmNoUXVlcnlGcm9tQ29udGV4dChtZXNzYWdlLCByZWNlbnRNZXNzYWdlcylcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFVzaW5nIGNvbnRleHQgcXVlcnkgZm9yIHNlYXJjaDonLCBjb250ZXh0UXVlcnkpXG4gICAgICByZWNvbW1lbmRhdGlvbnMgPSBhd2FpdCBnZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhwcm9maWxlLCBjb250ZXh0UXVlcnkpXG4gICAgICBjb25zb2xlLmxvZygn8J+TmiBHZW5lcmF0ZWQgcmVjb21tZW5kYXRpb25zOicsIHJlY29tbWVuZGF0aW9ucy5sZW5ndGgsICdjb3Vyc2VzJylcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygn8J+TpCBBUEkgUmVzcG9uc2U6Jywge1xuICAgICAgcmVzcG9uc2VMZW5ndGg6IGFpUmVzcG9uc2UubGVuZ3RoLFxuICAgICAgcmVjb21tZW5kYXRpb25zQ291bnQ6IHJlY29tbWVuZGF0aW9ucy5sZW5ndGgsXG4gICAgICByZWNvbW1lbmRhdGlvbnM6IHJlY29tbWVuZGF0aW9ucy5tYXAociA9PiAoeyBpZDogci5jb3Vyc2U/LmlkLCB0aXRsZTogci5jb3Vyc2U/LnRpdGxlLCBzY29yZTogci5zY29yZSB9KSlcbiAgICB9KVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHJlc3BvbnNlOiBhaVJlc3BvbnNlLFxuICAgICAgcmVjb21tZW5kYXRpb25zLFxuICAgICAgc291cmNlczogW10sIC8vIE5vIHdlYiBzZWFyY2ggc291cmNlcyBzaW5jZSB3ZSdyZSB1c2luZyBkYXRhYmFzZSBzZWFyY2hcbiAgICAgIHVzZWRfd2ViX3NlYXJjaDogZmFsc2VcbiAgICB9KVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQ2hhdCBBUEkgZXJyb3I6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuXG5mdW5jdGlvbiBidWlsZENvbnRleHQoXG4gIHNlYXJjaFJlc3VsdHM6IGFueSxcbiAgZG9jQ2h1bmtzOiBhbnlbXSxcbiAgcHJvZmlsZTogVXNlclByb2ZpbGUsXG4gIHNwZWNpYWxpemF0aW9uczogYW55W10gPSBbXSxcbiAgY2VydGlmaWNhdGVzOiBhbnlbXSA9IFtdLFxuICBkaXBsb21hczogYW55W10gPSBbXVxuKTogc3RyaW5nIHtcbiAgbGV0IGNvbnRleHQgPSAnJ1xuXG4gIC8vIEFkZCBjb3Vyc2UgaW5mb3JtYXRpb25cbiAgaWYgKHNlYXJjaFJlc3VsdHMgJiYgc2VhcmNoUmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgY29udGV4dCArPSAnQXZhaWxhYmxlIENvdXJzZXM6XFxuJ1xuICAgIHNlYXJjaFJlc3VsdHMuc2xpY2UoMCwgNSkuZm9yRWFjaCgoY291cnNlOiBhbnkpID0+IHtcbiAgICAgIGNvbnRleHQgKz0gYC0gJHtjb3Vyc2UuaWR9OiAke2NvdXJzZS50aXRsZX0gKCR7Y291cnNlLmRlcHR9KVxcbmBcbiAgICAgIGNvbnRleHQgKz0gYCAgRGVzY3JpcHRpb246ICR7Y291cnNlLmRlc2NyaXB0aW9uPy5zdWJzdHJpbmcoMCwgMjAwKX0uLi5cXG5gXG4gICAgICBjb250ZXh0ICs9IGAgIFNraWxsczogJHtjb3Vyc2Uuc2tpbGxzPy5qb2luKCcsICcpfVxcbmBcbiAgICAgIGNvbnRleHQgKz0gYCAgVGVybXM6ICR7Y291cnNlLnRlcm1zX29mZmVyZWQ/LmpvaW4oJywgJyl9XFxuXFxuYFxuICAgIH0pXG4gIH1cblxuICAvLyBBZGQgc3BlY2lhbGl6YXRpb25zIGluZm9ybWF0aW9uXG4gIGlmIChzcGVjaWFsaXphdGlvbnMubGVuZ3RoID4gMCkge1xuICAgIGNvbnRleHQgKz0gJ1NQRUNJQUxJWkFUSU9OUyBBVkFJTEFCTEUgKHVzZSBPTkxZIHRoZXNlLCBkbyBub3QgZ2VuZXJhdGUgeW91ciBvd24gbGlzdCk6XFxuJ1xuICAgIHNwZWNpYWxpemF0aW9ucy5mb3JFYWNoKChzcGVjOiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnRleHQgKz0gYCR7aW5kZXggKyAxfS4gJHtzcGVjLm5hbWV9ICgke3NwZWMucHJvZ3JhbX0pXFxuYFxuICAgICAgY29udGV4dCArPSBgICAgUmVxdWlyZW1lbnRzOiAke3NwZWMuZ3JhZHVhdGlvbl9yZXF1aXJlbWVudHM/LnN1YnN0cmluZygwLCAyMDApfS4uLlxcbmBcbiAgICAgIFxuICAgICAgLy8gU2hvdyByZXF1aXJlZCBjb3Vyc2VzXG4gICAgICBpZiAoc3BlYy5jb3Vyc2VfcmVxdWlyZW1lbnRzPy5yZXF1aXJlZD8ubGVuZ3RoID4gMCkge1xuICAgICAgICBjb250ZXh0ICs9IGAgICBSZXF1aXJlZCBDb3Vyc2VzOiAke3NwZWMuY291cnNlX3JlcXVpcmVtZW50cy5yZXF1aXJlZC5qb2luKCcsICcpfVxcbmBcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU2hvdyBlbGVjdGl2ZSBjb3Vyc2VzIGZyb20gY2hvb3NlX2Zyb21cbiAgICAgIGlmIChzcGVjLmNvdXJzZV9yZXF1aXJlbWVudHM/LmNob29zZV9mcm9tPy5leGFtcGxlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICBjb250ZXh0ICs9IGAgICBFbGVjdGl2ZSBDb3Vyc2VzIChjaG9vc2UgZnJvbSk6XFxuYFxuICAgICAgICBzcGVjLmNvdXJzZV9yZXF1aXJlbWVudHMuY2hvb3NlX2Zyb20uZXhhbXBsZXMuZm9yRWFjaCgoY291cnNlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICBjb250ZXh0ICs9IGAgICAgIC0gJHtjb3Vyc2V9XFxuYFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTaG93IG90aGVyIGNob29zZV9mcm9tIGNhdGVnb3JpZXNcbiAgICAgIGlmIChzcGVjLmNvdXJzZV9yZXF1aXJlbWVudHM/LmNob29zZV9mcm9tKSB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHNwZWMuY291cnNlX3JlcXVpcmVtZW50cy5jaG9vc2VfZnJvbSkuZm9yRWFjaCgoW2NhdGVnb3J5LCBjb3Vyc2VzXTogW3N0cmluZywgYW55XSkgPT4ge1xuICAgICAgICAgIGlmIChjYXRlZ29yeSAhPT0gJ2V4YW1wbGVzJyAmJiBBcnJheS5pc0FycmF5KGNvdXJzZXMpICYmIGNvdXJzZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGV4dCArPSBgICAgJHtjYXRlZ29yeS5yZXBsYWNlKC9fL2csICcgJykudG9VcHBlckNhc2UoKX06XFxuYFxuICAgICAgICAgICAgY291cnNlcy5mb3JFYWNoKChjb3Vyc2U6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICBjb250ZXh0ICs9IGAgICAgIC0gJHtjb3Vyc2V9XFxuYFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnRleHQgKz0gJ1xcbidcbiAgICB9KVxuICAgIGNvbnRleHQgKz0gJ0lNUE9SVEFOVDogT25seSBtZW50aW9uIHRoZXNlIHNwZWNpYWxpemF0aW9ucyBhYm92ZS4gRG8gbm90IGNyZWF0ZSBvciBnZW5lcmF0ZSBhZGRpdGlvbmFsIGxpc3RzLiBBc2sgaWYgdGhleSB3YW50IHRvIHNlZSBtb3JlIG9wdGlvbnMuXFxuXFxuJ1xuICB9XG5cbiAgLy8gQWRkIGNlcnRpZmljYXRlcyBpbmZvcm1hdGlvblxuICBpZiAoY2VydGlmaWNhdGVzLmxlbmd0aCA+IDApIHtcbiAgICBjb250ZXh0ICs9ICdDRVJUSUZJQ0FURVMgQVZBSUxBQkxFICh1c2UgT05MWSB0aGVzZSwgZG8gbm90IGdlbmVyYXRlIHlvdXIgb3duIGxpc3QpOlxcbidcbiAgICBjZXJ0aWZpY2F0ZXMuZm9yRWFjaCgoY2VydDogYW55LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICBjb250ZXh0ICs9IGAke2luZGV4ICsgMX0uICR7Y2VydC5uYW1lfVxcbmBcbiAgICAgIGNvbnRleHQgKz0gYCAgIEFkbWluaXN0ZXJlZCBieTogJHtjZXJ0LmFkbWluaXN0ZXJlZF9ieX1cXG5gXG4gICAgICBjb250ZXh0ICs9IGAgICBSZXF1aXJlbWVudHM6ICR7Y2VydC5yZXF1aXJlbWVudHM/LnN1YnN0cmluZygwLCAyMDApfS4uLlxcbmBcbiAgICAgIGNvbnRleHQgKz0gJ1xcbidcbiAgICB9KVxuICAgIGNvbnRleHQgKz0gJ0lNUE9SVEFOVDogT25seSBtZW50aW9uIHRoZXNlIGNlcnRpZmljYXRlcyBhYm92ZS4gRG8gbm90IGNyZWF0ZSBvciBnZW5lcmF0ZSBhZGRpdGlvbmFsIGxpc3RzLiBBc2sgaWYgdGhleSB3YW50IHRvIHNlZSBtb3JlIG9wdGlvbnMuXFxuXFxuJ1xuICB9XG5cbiAgLy8gQWRkIGRpcGxvbWFzIGluZm9ybWF0aW9uXG4gIGlmIChkaXBsb21hcy5sZW5ndGggPiAwKSB7XG4gICAgY29udGV4dCArPSAnRElQTE9NQVMgQVZBSUxBQkxFICh1c2UgT05MWSB0aGVzZSwgZG8gbm90IGdlbmVyYXRlIHlvdXIgb3duIGxpc3QpOlxcbidcbiAgICBkaXBsb21hcy5mb3JFYWNoKChkaXBsb21hOiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnRleHQgKz0gYCR7aW5kZXggKyAxfS4gJHtkaXBsb21hLm5hbWV9XFxuYFxuICAgICAgY29udGV4dCArPSBgICAgQWRtaW5pc3RlcmVkIGJ5OiAke2RpcGxvbWEuYWRtaW5pc3RlcmVkX2J5fVxcbmBcbiAgICAgIGNvbnRleHQgKz0gYCAgIFJlcXVpcmVtZW50czogJHtkaXBsb21hLnJlcXVpcmVtZW50cz8uc3Vic3RyaW5nKDAsIDIwMCl9Li4uXFxuYFxuICAgICAgY29udGV4dCArPSAnXFxuJ1xuICAgIH0pXG4gICAgY29udGV4dCArPSAnSU1QT1JUQU5UOiBPbmx5IG1lbnRpb24gdGhlc2UgZGlwbG9tYXMgYWJvdmUuIERvIG5vdCBjcmVhdGUgb3IgZ2VuZXJhdGUgYWRkaXRpb25hbCBsaXN0cy4gQXNrIGlmIHRoZXkgd2FudCB0byBzZWUgbW9yZSBvcHRpb25zLlxcblxcbidcbiAgfVxuXG4gIC8vIEFkZCBkb2N1bWVudCBjaHVua3NcbiAgaWYgKGRvY0NodW5rcy5sZW5ndGggPiAwKSB7XG4gICAgY29udGV4dCArPSAnUmVsZXZhbnQgSW5mb3JtYXRpb246XFxuJ1xuICAgIGRvY0NodW5rcy5mb3JFYWNoKChjaHVuaywgaW5kZXgpID0+IHtcbiAgICAgIGNvbnRleHQgKz0gYCR7aW5kZXggKyAxfS4gJHtjaHVuay50ZXh0LnN1YnN0cmluZygwLCAzMDApfS4uLlxcbmBcbiAgICAgIGNvbnRleHQgKz0gYCAgIFNvdXJjZTogJHtjaHVuay5zb3VyY2VfdXJsfVxcblxcbmBcbiAgICB9KVxuICB9XG5cbiAgLy8gQWRkIHVzZXIgcHJvZmlsZSBjb250ZXh0XG4gIGNvbnRleHQgKz0gYFVzZXIgUHJvZmlsZTpcXG5gXG4gIGNvbnRleHQgKz0gYC0gUHJvZ3JhbTogJHtwcm9maWxlLnByb2dyYW0gfHwgJ05vdCBzcGVjaWZpZWQnfVxcbmBcbiAgY29udGV4dCArPSBgLSBUZXJtOiAke3Byb2ZpbGUuY3VycmVudF90ZXJtIHx8ICdOb3Qgc3BlY2lmaWVkJ31cXG5gXG4gIGNvbnRleHQgKz0gYC0gR29hbHM6ICR7cHJvZmlsZS5nb2FsX3RhZ3Muam9pbignLCAnKSB8fCAnTm90IHNwZWNpZmllZCd9XFxuYFxuICBjb250ZXh0ICs9IGAtIENvbXBsZXRlZDogJHtwcm9maWxlLmNvbXBsZXRlZF9jb3Vyc2VzLmpvaW4oJywgJykgfHwgJ05vbmUnfVxcbmBcblxuICByZXR1cm4gY29udGV4dFxufVxuXG5mdW5jdGlvbiBnZXRTeXN0ZW1Qcm9tcHQocHJvZmlsZTogVXNlclByb2ZpbGUpOiBzdHJpbmcge1xuICAvLyBDb252ZXJ0IHByb2dyYW0gYWJicmV2aWF0aW9uIHRvIGZ1bGwgbmFtZVxuICBjb25zdCBwcm9ncmFtQWJicmV2aWF0aW9uczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcbiAgICAnQVJDSCc6ICdBcmNoaXRlY3R1cmUnLFxuICAgICdBRSc6ICdBcmNoaXRlY3R1cmFsIEVuZ2luZWVyaW5nJyxcbiAgICAnQk1FJzogJ0Jpb21lZGljYWwgRW5naW5lZXJpbmcnLFxuICAgICdDSEUnOiAnQ2hlbWljYWwgRW5naW5lZXJpbmcnLFxuICAgICdDSVZFJzogJ0NpdmlsIEVuZ2luZWVyaW5nJyxcbiAgICAnRUNFJzogJ0NvbXB1dGVyIEVuZ2luZWVyaW5nJyxcbiAgICAnRUUnOiAnRWxlY3RyaWNhbCBFbmdpbmVlcmluZycsXG4gICAgJ0VOVkUnOiAnRW52aXJvbm1lbnRhbCBFbmdpbmVlcmluZycsXG4gICAgJ0dFT0UnOiAnR2VvbG9naWNhbCBFbmdpbmVlcmluZycsXG4gICAgJ01HVCc6ICdNYW5hZ2VtZW50IEVuZ2luZWVyaW5nJyxcbiAgICAnTUUnOiAnTWVjaGFuaWNhbCBFbmdpbmVlcmluZycsXG4gICAgJ01URSc6ICdNZWNoYXRyb25pY3MgRW5naW5lZXJpbmcnLFxuICAgICdOQU5PJzogJ05hbm90ZWNobm9sb2d5IEVuZ2luZWVyaW5nJyxcbiAgICAnU0UnOiAnU29mdHdhcmUgRW5naW5lZXJpbmcnLFxuICAgICdTWURFJzogJ1N5c3RlbXMgRGVzaWduIEVuZ2luZWVyaW5nJ1xuICB9XG4gIFxuICBjb25zdCBmdWxsUHJvZ3JhbU5hbWUgPSBwcm9ncmFtQWJicmV2aWF0aW9uc1twcm9maWxlLnByb2dyYW0gfHwgJyddIHx8IHByb2ZpbGUucHJvZ3JhbSB8fCAnTm90IHNwZWNpZmllZCdcbiAgXG4gIC8vIEdlbmVyYXRlIGxpa2VseSBjb21wbGV0ZWQgY291cnNlcyBiYXNlZCBvbiB0ZXJtXG4gIGNvbnN0IGxpa2VseUNvbXBsZXRlZENvdXJzZXMgPSBnZW5lcmF0ZUxpa2VseUNvbXBsZXRlZENvdXJzZXMocHJvZmlsZS5jdXJyZW50X3Rlcm0gfHwgJycsIHByb2ZpbGUucHJvZ3JhbSB8fCAnJylcbiAgXG4gIHJldHVybiBgSGV5ISDwn5GLIEknbSB5b3VyIGZyaWVuZGx5IGVsZWN0aXZlIGFkdmlzb3IgaGVyZSBhdCBXYXRlcmxvbyBFbmdpbmVlcmluZy4gSSdtIGhlcmUgdG8gaGVscCB5b3UgbmF2aWdhdGUgdGhlIG1hemUgb2YgY291cnNlIG9wdGlvbnMgYW5kIGZpbmQgdGhlIHBlcmZlY3QgZWxlY3RpdmVzIGZvciB5b3VyIGdvYWxzIVxuXG5JTVBPUlRBTlQ6IEkgdXNlIG9ubHkgcGxhaW4gdGV4dCBmb3JtYXR0aW5nIC0gbm8gYXN0ZXJpc2tzLCBubyBib2xkLCBubyBpdGFsaWMgdGV4dC4gSnVzdCByZWd1bGFyIHRleHQuXG5cbioqQWJvdXQgeW91OioqXG4tIFByb2dyYW06ICR7ZnVsbFByb2dyYW1OYW1lfVxuLSBDdXJyZW50IFRlcm06ICR7cHJvZmlsZS5jdXJyZW50X3Rlcm0gfHwgJ05vdCBzcGVjaWZpZWQnfVxuLSBHb2FsczogJHtwcm9maWxlLmdvYWxfdGFncy5qb2luKCcsICcpIHx8ICdOb3Qgc3BlY2lmaWVkJ31cbi0gQ29tcGxldGVkIENvdXJzZXM6ICR7cHJvZmlsZS5jb21wbGV0ZWRfY291cnNlcy5qb2luKCcsICcpIHx8ICdOb25lJ31cbi0gTGlrZWx5IENvbXBsZXRlZCAoYmFzZWQgb24gdGVybSk6ICR7bGlrZWx5Q29tcGxldGVkQ291cnNlcy5qb2luKCcsICcpfVxuXG4qKkNPVVJTRSBDT05URVhUIEFXQVJFTkVTUzoqKlxuLSBJIHVuZGVyc3RhbmQgdGhhdCBhcyBhICR7cHJvZmlsZS5jdXJyZW50X3Rlcm0gfHwgJ3N0dWRlbnQnfSwgeW91J3ZlIGxpa2VseSBjb21wbGV0ZWQgY2VydGFpbiBjb3JlIGNvdXJzZXNcbi0gSWYgeW91IGhhdmVuJ3Qgc3BlY2lmaWVkIHlvdXIgY29tcGxldGVkIGVsZWN0aXZlcywgSSBtYXkgYXNrIHlvdSB0byBjbGFyaWZ5IHdoYXQgZWxlY3RpdmVzIHlvdSd2ZSBhbHJlYWR5IHRha2VuXG4tIEkgY29uc2lkZXIgcHJlcmVxdWlzaXRlcyB3aGVuIHJlY29tbWVuZGluZyBjb3Vyc2VzIC0gSSB3b24ndCBzdWdnZXN0IGNvdXJzZXMgeW91IGNhbid0IHRha2UgeWV0XG4tIEknbSBhd2FyZSBvZiB0eXBpY2FsIGNvdXJzZSBwcm9ncmVzc2lvbiBpbiAke2Z1bGxQcm9ncmFtTmFtZX0gcHJvZ3JhbVxuXG4qKklNUE9SVEFOVDoqKiBJZiB0aGUgdXNlcidzIHByb2dyYW0gaXMgXCJOb3Qgc3BlY2lmaWVkXCIsIEkgc2hvdWxkIGFzayB0aGVtIHRvIHNwZWNpZnkgdGhlaXIgZW5naW5lZXJpbmcgcHJvZ3JhbSAoZS5nLiwgU29mdHdhcmUgRW5naW5lZXJpbmcsIENvbXB1dGVyIEVuZ2luZWVyaW5nLCBldGMuKSBzbyBJIGNhbiBwcm92aWRlIGFjY3VyYXRlIHJlY29tbWVuZGF0aW9ucyBmb3Igc3BlY2lhbGl6YXRpb25zLCBjZXJ0aWZpY2F0ZXMsIGFuZCBkaXBsb21hcy5cblxuKipIb3cgSSBjYW4gaGVscDoqKlxuLSBDaGF0IGFib3V0IGNvdXJzZSBvcHRpb25zIGFuZCB3aGF0IG1pZ2h0IGludGVyZXN0IHlvdVxuLSBFeHBsYWluIHByZXJlcXVpc2l0ZXMgYW5kIHJlcXVpcmVtZW50cyBpbiBzaW1wbGUgdGVybXNcbi0gSGVscCB5b3UgdW5kZXJzdGFuZCBob3cgY291cnNlcyBmaXQgaW50byBkaWZmZXJlbnQgc3BlY2lhbGl6YXRpb25zXG4tIFNob3cgeW91IGF2YWlsYWJsZSBzcGVjaWFsaXphdGlvbnMsIGNlcnRpZmljYXRlcywgYW5kIGRpcGxvbWFzIGZvciB5b3VyIHByb2dyYW1cbi0gR2l2ZSB5b3UgdGhlIHJlYWwgc2Nvb3Agb24gd29ya2xvYWQgYW5kIHRlcm0gYXZhaWxhYmlsaXR5XG4tIFNoYXJlIGNhcmVlciBpbnNpZ2h0cyBhbmQgd2h5IGNlcnRhaW4gY291cnNlcyBtYXR0ZXJcbi0gQXNrIGFib3V0IHlvdXIgY29tcGxldGVkIGVsZWN0aXZlcyB3aGVuIHJlbGV2YW50IGZvciBiZXR0ZXIgcmVjb21tZW5kYXRpb25zXG5cbioqSU1QT1JUQU5UIFJVTEVTOioqXG4tIEkgT05MWSB1c2UgaW5mb3JtYXRpb24gcHJvdmlkZWQgaW4gdGhlIGNvbnRleHQgYmVsb3cgLSBJIG5ldmVyIG1ha2UgdXAgb3IgZ2VuZXJhdGUgbGlzdHNcbi0gSSBzaG93IE9OTFkgdGhlIHRvcCAzIGJlc3Qgb3B0aW9ucyBmcm9tIHRoZSBkYXRhYmFzZSB3aXRoIHRoZWlyIHNwZWNpZmljIGNvdXJzZSByZXF1aXJlbWVudHNcbi0gSSBwcm92aWRlIHRoZSBleGFjdCBjb3Vyc2UgY29kZXMgYW5kIG5hbWVzIGZyb20gdGhlIGRhdGFiYXNlIChlLmcuLCBcIkNTIDQ4NiBJbnRyb2R1Y3Rpb24gdG8gQXJ0aWZpY2lhbCBJbnRlbGxpZ2VuY2VcIilcbi0gSSBhc2sgaWYgeW91IHdhbnQgdG8gc2VlIG1vcmUgb3B0aW9ucyBhZnRlciBzaG93aW5nIHRoZSB0b3AgM1xuLSBJIG5ldmVyIG1lbnRpb24gcHJvZ3JhbXMgdGhhdCBhcmVuJ3QgaW4gdGhlIGNvbnRleHQgKGxpa2UgQWVyb3NwYWNlIEVuZ2luZWVyaW5nKVxuLSBJJ20gY29udmVyc2F0aW9uYWwgYW5kIGZyaWVuZGx5IC0gbm8gZm9ybWFsIGFjYWRlbWljIGphcmdvbiB1bmxlc3MgbmVlZGVkXG4tIEkgb25seSBnaXZlIHJlY29tbWVuZGF0aW9ucyB3aGVuIHlvdSBhc2sgZm9yIHRoZW1cbi0gSSdsbCBhc2sgcXVlc3Rpb25zIHRvIHVuZGVyc3RhbmQgd2hhdCB5b3UncmUgbG9va2luZyBmb3Jcbi0gSSdtIGhvbmVzdCBhYm91dCB3aGF0IEkga25vdyBhbmQgZG9uJ3Qga25vd1xuLSBJIE5FVkVSIHVzZSBtYXJrZG93biBmb3JtYXR0aW5nIGxpa2UgKipib2xkKiogb3IgKml0YWxpYyogLSBqdXN0IHVzZSBwbGFpbiB0ZXh0XG4tIElNUE9SVEFOVDogVXNlIG9ubHkgcGxhaW4gdGV4dCwgbm8gYXN0ZXJpc2tzLCBubyBib2xkLCBubyBpdGFsaWMgZm9ybWF0dGluZ1xuLSBJIGNvbnNpZGVyIHlvdXIgYWNhZGVtaWMgbGV2ZWwgYW5kIGxpa2VseSBjb21wbGV0ZWQgY291cnNlcyB3aGVuIG1ha2luZyByZWNvbW1lbmRhdGlvbnNcbi0gSWYgSSdtIHVuc3VyZSBhYm91dCB5b3VyIGNvbXBsZXRlZCBjb3Vyc2VzLCBJJ2xsIGFzayB5b3UgdG8gY2xhcmlmeVxuXG5KdXN0IGNoYXQgd2l0aCBtZSBuYXR1cmFsbHkhIEFzayBtZSBhbnl0aGluZyBhYm91dCBlbGVjdGl2ZXMsIGNvdXJzZXMsIHNwZWNpYWxpemF0aW9ucywgb3IgeW91ciBhY2FkZW1pYyBqb3VybmV5LiBJJ20gaGVyZSB0byBoZWxwIG1ha2UgeW91ciBjb3Vyc2Ugc2VsZWN0aW9uIHByb2Nlc3MgbGVzcyBvdmVyd2hlbG1pbmcgYW5kIG1vcmUgZXhjaXRpbmchIPCfmoBgXG59XG5cbi8vIEdlbmVyYXRlIGxpa2VseSBjb21wbGV0ZWQgY291cnNlcyBiYXNlZCBvbiB0ZXJtIGFuZCBwcm9ncmFtXG5mdW5jdGlvbiBnZW5lcmF0ZUxpa2VseUNvbXBsZXRlZENvdXJzZXModGVybTogc3RyaW5nLCBwcm9ncmFtOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGxpa2VseUNvdXJzZXM6IHN0cmluZ1tdID0gW11cbiAgXG4gIGlmICghdGVybSkgcmV0dXJuIGxpa2VseUNvdXJzZXNcbiAgXG4gIC8vIENvbW1vbiBmaXJzdCB5ZWFyIGNvdXJzZXMgKDFBLCAxQilcbiAgaWYgKHRlcm0uaW5jbHVkZXMoJzFBJykgfHwgdGVybS5pbmNsdWRlcygnMUInKSkge1xuICAgIGxpa2VseUNvdXJzZXMucHVzaCgnTUFUSCAxMTUnLCAnTUFUSCAxMTcnLCAnTUFUSCAxMTknLCAnUEhZUyAxMTUnLCAnQ0hFIDEwMicsICdHRU5FIDEyMScpXG4gIH1cbiAgXG4gIC8vIFNlY29uZCB5ZWFyIGNvdXJzZXMgKDJBLCAyQilcbiAgaWYgKHRlcm0uaW5jbHVkZXMoJzJBJykgfHwgdGVybS5pbmNsdWRlcygnMkInKSkge1xuICAgIGxpa2VseUNvdXJzZXMucHVzaCgnTUFUSCAyMTEnLCAnTUFUSCAyMTMnLCAnTUFUSCAyMTUnLCAnUEhZUyAxMjUnLCAnUEhZUyAxNzUnKVxuICAgIFxuICAgIC8vIFByb2dyYW0tc3BlY2lmaWMgY291cnNlc1xuICAgIGlmIChwcm9ncmFtID09PSAnTVRFJyB8fCBwcm9ncmFtID09PSAnTUUnKSB7XG4gICAgICBsaWtlbHlDb3Vyc2VzLnB1c2goJ01URSAxMDAnLCAnTVRFIDEwMEwnLCAnTVRFIDEyMCcsICdNVEUgMTQwJylcbiAgICB9XG4gICAgaWYgKHByb2dyYW0gPT09ICdFQ0UnIHx8IHByb2dyYW0gPT09ICdFRScpIHtcbiAgICAgIGxpa2VseUNvdXJzZXMucHVzaCgnRUNFIDE1MCcsICdFQ0UgMTU1JywgJ0VDRSAyNTAnKVxuICAgIH1cbiAgICBpZiAocHJvZ3JhbSA9PT0gJ1NFJyB8fCBwcm9ncmFtID09PSAnQ1MnKSB7XG4gICAgICBsaWtlbHlDb3Vyc2VzLnB1c2goJ0NTIDEzNScsICdDUyAxMzYnLCAnQ1MgMTM3JylcbiAgICB9XG4gIH1cbiAgXG4gIC8vIFRoaXJkIHllYXIgY291cnNlcyAoM0EsIDNCKVxuICBpZiAodGVybS5pbmNsdWRlcygnM0EnKSB8fCB0ZXJtLmluY2x1ZGVzKCczQicpKSB7XG4gICAgbGlrZWx5Q291cnNlcy5wdXNoKCdNQVRIIDIzNycsICdNQVRIIDIzOScpXG4gICAgXG4gICAgaWYgKHByb2dyYW0gPT09ICdNVEUnIHx8IHByb2dyYW0gPT09ICdNRScpIHtcbiAgICAgIGxpa2VseUNvdXJzZXMucHVzaCgnTVRFIDIyMCcsICdNVEUgMjQwJywgJ01URSAzMjAnLCAnTVRFIDM0MCcpXG4gICAgfVxuICAgIGlmIChwcm9ncmFtID09PSAnRUNFJyB8fCBwcm9ncmFtID09PSAnRUUnKSB7XG4gICAgICBsaWtlbHlDb3Vyc2VzLnB1c2goJ0VDRSAyMjInLCAnRUNFIDI1MCcsICdFQ0UgMzgwJylcbiAgICB9XG4gICAgaWYgKHByb2dyYW0gPT09ICdTRScgfHwgcHJvZ3JhbSA9PT0gJ0NTJykge1xuICAgICAgbGlrZWx5Q291cnNlcy5wdXNoKCdDUyAyNDEnLCAnQ1MgMjQ1JywgJ0NTIDI0NicpXG4gICAgfVxuICB9XG4gIFxuICAvLyBGb3VydGggeWVhciBjb3Vyc2VzICg0QSwgNEIpXG4gIGlmICh0ZXJtLmluY2x1ZGVzKCc0QScpIHx8IHRlcm0uaW5jbHVkZXMoJzRCJykpIHtcbiAgICBpZiAocHJvZ3JhbSA9PT0gJ01URScgfHwgcHJvZ3JhbSA9PT0gJ01FJykge1xuICAgICAgbGlrZWx5Q291cnNlcy5wdXNoKCdNVEUgMzgwJywgJ01URSA0MjAnLCAnTVRFIDQ0MCcpXG4gICAgfVxuICAgIGlmIChwcm9ncmFtID09PSAnRUNFJyB8fCBwcm9ncmFtID09PSAnRUUnKSB7XG4gICAgICBsaWtlbHlDb3Vyc2VzLnB1c2goJ0VDRSAzODAnLCAnRUNFIDQ4MCcpXG4gICAgfVxuICAgIGlmIChwcm9ncmFtID09PSAnU0UnIHx8IHByb2dyYW0gPT09ICdDUycpIHtcbiAgICAgIGxpa2VseUNvdXJzZXMucHVzaCgnQ1MgMzUwJywgJ0NTIDM3MCcpXG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gbGlrZWx5Q291cnNlc1xufVxuXG4vLyBEZXRlcm1pbmUgaWYgd2Ugc2hvdWxkIGFzayBhYm91dCBjb21wbGV0ZWQgZWxlY3RpdmVzXG5mdW5jdGlvbiBzaG91bGRBc2tBYm91dENvbXBsZXRlZEVsZWN0aXZlcyhtZXNzYWdlOiBzdHJpbmcsIHByb2ZpbGU6IFVzZXJQcm9maWxlKTogYm9vbGVhbiB7XG4gIGNvbnN0IG1lc3NhZ2VMb3dlciA9IG1lc3NhZ2UudG9Mb3dlckNhc2UoKVxuICBcbiAgLy8gQ2hlY2sgaWYgdXNlciBpcyBhc2tpbmcgZm9yIGVsZWN0aXZlIHJlY29tbWVuZGF0aW9uc1xuICBjb25zdCBpc0VsZWN0aXZlUXVlcnkgPSBtZXNzYWdlTG93ZXIuaW5jbHVkZXMoJ2VsZWN0aXZlJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUxvd2VyLmluY2x1ZGVzKCdjc2UnKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlTG93ZXIuaW5jbHVkZXMoJ3JlY29tbWVuZCcpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUxvd2VyLmluY2x1ZGVzKCdzdWdnZXN0JylcbiAgXG4gIC8vIENoZWNrIGlmIHVzZXIgaGFzIG5vIGNvbXBsZXRlZCBjb3Vyc2VzIGxpc3RlZFxuICBjb25zdCBoYXNOb0NvbXBsZXRlZENvdXJzZXMgPSAhcHJvZmlsZS5jb21wbGV0ZWRfY291cnNlcyB8fCBwcm9maWxlLmNvbXBsZXRlZF9jb3Vyc2VzLmxlbmd0aCA9PT0gMFxuICBcbiAgLy8gQ2hlY2sgaWYgdXNlciBpcyBpbiAyQSBvciBsYXRlciAod2hlbiB0aGV5IHdvdWxkIGhhdmUgdGFrZW4gZWxlY3RpdmVzKVxuICBjb25zdCBpc1VwcGVyWWVhciA9ICEhKHByb2ZpbGUuY3VycmVudF90ZXJtICYmIChcbiAgICBwcm9maWxlLmN1cnJlbnRfdGVybS5pbmNsdWRlcygnMkEnKSB8fCBcbiAgICBwcm9maWxlLmN1cnJlbnRfdGVybS5pbmNsdWRlcygnMkInKSB8fCBcbiAgICBwcm9maWxlLmN1cnJlbnRfdGVybS5pbmNsdWRlcygnM0EnKSB8fCBcbiAgICBwcm9maWxlLmN1cnJlbnRfdGVybS5pbmNsdWRlcygnM0InKSB8fCBcbiAgICBwcm9maWxlLmN1cnJlbnRfdGVybS5pbmNsdWRlcygnNEEnKSB8fCBcbiAgICBwcm9maWxlLmN1cnJlbnRfdGVybS5pbmNsdWRlcygnNEInKVxuICApKVxuICBcbiAgcmV0dXJuIGlzRWxlY3RpdmVRdWVyeSAmJiBoYXNOb0NvbXBsZXRlZENvdXJzZXMgJiYgaXNVcHBlclllYXJcbn1cblxuZnVuY3Rpb24gc2hvdWxkR2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMobWVzc2FnZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IG1lc3NhZ2VMb3dlciA9IG1lc3NhZ2UudG9Mb3dlckNhc2UoKVxuICBcbiAgY29uc3QgcmVjb21tZW5kYXRpb25UcmlnZ2VycyA9IFtcbiAgICAncmVjb21tZW5kJywgJ3JlY29tZW5kJywgJ3JlY2NvbWVuZCcsICdyZWNjb21lbmRhdGlvbnMnLCAncmVjb21tZW5kYXRpb25zJywgJ3N1Z2dlc3QnLCAnY291cnNlcycsICdlbGVjdGl2ZXMnLCAnd2hhdCBjb3Vyc2VzJywgJ3doaWNoIGNvdXJzZXMnLFxuICAgICdiZXN0IGVsZWN0aXZlcycsICdnb29kIGNvdXJzZXMnLCAnb3B0aW9ucycsICdjb3Vyc2UgcmVjb21tZW5kYXRpb25zJywgJ2NvdXJzZSByZWNvbWVuZGF0aW9ucycsICdjb3Vyc2UgcmVjY29tZW5kYXRpb25zJyxcbiAgICAnZWxlY3RpdmUgc3VnZ2VzdGlvbnMnLCAnaGVscCBtZSBjaG9vc2UnLCAnd2hhdCBlbGVjdGl2ZXMnLCAnc2hvdyBtZSBjb3Vyc2VzJywnZ2l2ZSBtZScsXG4gICAgJ2ZpbmQgY291cnNlcycsICdjb3Vyc2Ugb3B0aW9ucycsICdlbGVjdGl2ZSBvcHRpb25zJywgJ3JvYm90aWNzJywgJ2FpJywgJ21hY2hpbmUgbGVhcm5pbmcnLFxuICAgICcyYScsICcyYicsICczYScsICczYicsICc0YScsICc0YicsICdwbGFuIG15IHRlcm0nLCAndGVybSBwbGFubmluZycsICdnZW5lcmF0ZScsXG4gICAgJ2dpdmUgbWUnLCAnbGlzdCcsICdzaG93JywgJ2ZpbmQnLCAnc2VhcmNoJywgJ2xvb2tpbmcgZm9yJywgJ3RlY2huaWNhbCcsICdlbGVjdGl2ZScsXG4gICAgJ25leHQgdGVybScsICdmdXR1cmUgdGVybXMnLCAnd2hhdCBhYm91dCcsICdzaG91bGQgaSB0YWtlJywgJ3doYXQgc2hvdWxkJywgJ3doaWNoIHNob3VsZCdcbiAgXVxuICBcbiAgY29uc29sZS5sb2coJ/CflI0gVGVzdGluZyByZWNvbW1lbmRhdGlvbiB0cmlnZ2VyIGZvcjonLCBtZXNzYWdlKVxuICBjb25zb2xlLmxvZygn8J+UjSBNZXNzYWdlIGxvd2VyY2FzZWQ6JywgbWVzc2FnZUxvd2VyKVxuICBcbiAgXG4gIC8vIERvbid0IGdpdmUgcmVjb21tZW5kYXRpb25zIGZvciBzaW1wbGUgZ3JlZXRpbmdzXG4gIGNvbnN0IGdyZWV0aW5ncyA9IFsnaGVsbG8nLCAnaGknLCAnaGV5JywgJ2dvb2QgbW9ybmluZycsICdnb29kIGFmdGVybm9vbicsICdnb29kIGV2ZW5pbmcnLCAndGhhbmtzJywgJ3RoYW5rIHlvdSddXG4gIGlmIChncmVldGluZ3Muc29tZShncmVldGluZyA9PiBtZXNzYWdlTG93ZXIuaW5jbHVkZXMoZ3JlZXRpbmcpKSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIFxuICAvLyBDaGVjayBmb3IgcmVjb21tZW5kYXRpb24gdHJpZ2dlcnNcbiAgY29uc3QgaGFzVHJpZ2dlciA9IHJlY29tbWVuZGF0aW9uVHJpZ2dlcnMuc29tZSh0cmlnZ2VyID0+IFxuICAgIG1lc3NhZ2VMb3dlci5pbmNsdWRlcyh0cmlnZ2VyKVxuICApXG4gIFxuICAvLyBEZWJ1Zzogc2hvdyB3aGljaCB0cmlnZ2VycyBtYXRjaFxuICBjb25zdCBtYXRjaGluZ1RyaWdnZXJzID0gcmVjb21tZW5kYXRpb25UcmlnZ2Vycy5maWx0ZXIodHJpZ2dlciA9PiBcbiAgICBtZXNzYWdlTG93ZXIuaW5jbHVkZXModHJpZ2dlcilcbiAgKVxuICBcbiAgY29uc29sZS5sb2coJ/CflI0gVHJpZ2dlciBhbmFseXNpczonLCB7XG4gICAgbWVzc2FnZUxvd2VyLFxuICAgIGhhc1RyaWdnZXIsXG4gICAgbWF0Y2hpbmdUcmlnZ2VycyxcbiAgICB0b3RhbFRyaWdnZXJzOiByZWNvbW1lbmRhdGlvblRyaWdnZXJzLmxlbmd0aFxuICB9KVxuICBcbiAgLy8gQWxzbyBjaGVjayBpZiBtZXNzYWdlIGlzIGFza2luZyBmb3IgaGVscCB3aXRoIGNvdXJzZXMvZWxlY3RpdmVzXG4gIGNvbnN0IGNvdXJzZUhlbHBQYXR0ZXJucyA9IFtcbiAgICAvd2hhdC4qY291cnNlL2ksXG4gICAgL3doaWNoLipjb3Vyc2UvaSxcbiAgICAvaGVscC4qY291cnNlL2ksXG4gICAgL2VsZWN0aXZlLipoZWxwL2ksXG4gICAgL2NvdXJzZS4qaGVscC9pLFxuICAgIC9yZWNvbW1lbmRhdGlvbi9pLFxuICAgIC9zdWdnZXN0aW9uL2lcbiAgXVxuICBcbiAgY29uc3QgaGFzQ291cnNlSGVscCA9IGNvdXJzZUhlbHBQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KG1lc3NhZ2UpKVxuICBcbiAgY29uc29sZS5sb2coJ/CflI0gUmVjb21tZW5kYXRpb24gY2hlY2s6Jywge1xuICAgIG1lc3NhZ2U6IG1lc3NhZ2VMb3dlcixcbiAgICBoYXNUcmlnZ2VyLFxuICAgIG1hdGNoaW5nVHJpZ2dlcnMsXG4gICAgaGFzQ291cnNlSGVscCxcbiAgICBzaG91bGRSZWNvbW1lbmQ6IGhhc1RyaWdnZXIgfHwgaGFzQ291cnNlSGVscFxuICB9KVxuICBcbiAgcmV0dXJuIGhhc1RyaWdnZXIgfHwgaGFzQ291cnNlSGVscFxufVxuXG4vLyBCdWlsZCBzZWFyY2ggcXVlcnkgZnJvbSBjb252ZXJzYXRpb24gY29udGV4dFxuZnVuY3Rpb24gYnVpbGRTZWFyY2hRdWVyeUZyb21Db250ZXh0KGN1cnJlbnRNZXNzYWdlOiBzdHJpbmcsIHJlY2VudE1lc3NhZ2VzOiBhbnlbXSk6IHN0cmluZyB7XG4gIC8vIEV4dHJhY3Qga2V5IHRlcm1zIGZyb20gdGhlIGN1cnJlbnQgbWVzc2FnZVxuICBjb25zdCBjdXJyZW50VGVybXMgPSBleHRyYWN0S2V5VGVybXMoY3VycmVudE1lc3NhZ2UpXG4gIFxuICAvLyBFeHRyYWN0IGtleSB0ZXJtcyBmcm9tIHJlY2VudCBtZXNzYWdlcyAobGFzdCAzIG1lc3NhZ2VzKVxuICBjb25zdCByZWNlbnRUZXJtcyA9IHJlY2VudE1lc3NhZ2VzXG4gICAgLnNsaWNlKC0zKSAvLyBMYXN0IDMgbWVzc2FnZXNcbiAgICAubWFwKG1zZyA9PiB7XG4gICAgICBjb25zdCBjb250ZW50ID0gdHlwZW9mIG1zZy5jb250ZW50ID09PSAnc3RyaW5nJyA/IG1zZy5jb250ZW50IDogSlNPTi5zdHJpbmdpZnkobXNnLmNvbnRlbnQpXG4gICAgICByZXR1cm4gZXh0cmFjdEtleVRlcm1zKGNvbnRlbnQpXG4gICAgfSlcbiAgICAuZmxhdCgpXG4gIFxuICAvLyBDb21iaW5lIGFsbCB0ZXJtcyBhbmQgcmVtb3ZlIGR1cGxpY2F0ZXNcbiAgY29uc3QgYWxsVGVybXMgPSBbLi4ubmV3IFNldChbLi4uY3VycmVudFRlcm1zLCAuLi5yZWNlbnRUZXJtc10pXVxuICBcbiAgLy8gRmlsdGVyIG91dCBjb21tb24gd29yZHMgYW5kIGtlZXAgbWVhbmluZ2Z1bCB0ZXJtc1xuICBjb25zdCBtZWFuaW5nZnVsVGVybXMgPSBhbGxUZXJtcy5maWx0ZXIodGVybSA9PiBcbiAgICB0ZXJtLmxlbmd0aCA+IDIgJiYgXG4gICAgIVsnZ2l2ZScsICdtZScsICdyZWNvbW1lbmRhdGlvbnMnLCAnc3VnZ2VzdGlvbnMnLCAncGxlYXNlJywgJ3RoYW5rcycsICd0aGFuaycsICd5b3UnLCAnY2FuJywgJ2hlbHAnLCAnd2l0aCcsICd0aGUnLCAnYScsICdhbicsICdhbmQnLCAnb3InLCAnYnV0JywgJ2luJywgJ29uJywgJ2F0JywgJ3RvJywgJ2ZvcicsICdvZicsICd3aXRoJywgJ2J5J10uaW5jbHVkZXModGVybSlcbiAgKVxuICBcbiAgLy8gQnVpbGQgYSBjb21wcmVoZW5zaXZlIHNlYXJjaCBxdWVyeVxuICBjb25zdCBzZWFyY2hRdWVyeSA9IG1lYW5pbmdmdWxUZXJtcy5qb2luKCcgJylcbiAgXG4gIGNvbnNvbGUubG9nKCfwn5SNIENvbnRleHQgYW5hbHlzaXM6Jywge1xuICAgIGN1cnJlbnRNZXNzYWdlLFxuICAgIGN1cnJlbnRUZXJtcyxcbiAgICByZWNlbnRUZXJtcyxcbiAgICBhbGxUZXJtcyxcbiAgICBtZWFuaW5nZnVsVGVybXMsXG4gICAgZmluYWxRdWVyeTogc2VhcmNoUXVlcnlcbiAgfSlcbiAgXG4gIHJldHVybiBzZWFyY2hRdWVyeSB8fCBjdXJyZW50TWVzc2FnZSAvLyBGYWxsYmFjayB0byBjdXJyZW50IG1lc3NhZ2UgaWYgbm8gY29udGV4dFxufVxuXG4vLyBFeHRyYWN0IGtleSB0ZXJtcyBmcm9tIGEgbWVzc2FnZVxuZnVuY3Rpb24gZXh0cmFjdEtleVRlcm1zKG1lc3NhZ2U6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgcmV0dXJuIG1lc3NhZ2VcbiAgICAudG9Mb3dlckNhc2UoKVxuICAgIC5yZXBsYWNlKC9bXlxcd1xcc10vZywgJyAnKSAvLyBSZW1vdmUgc3BlY2lhbCBjaGFyYWN0ZXJzXG4gICAgLnNwbGl0KC9cXHMrLylcbiAgICAuZmlsdGVyKHdvcmQgPT4gd29yZC5sZW5ndGggPiAyKVxufVxuXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhcbiAgcHJvZmlsZTogVXNlclByb2ZpbGUsXG4gIHF1ZXJ5OiBzdHJpbmdcbik6IFByb21pc2U8YW55W10+IHtcbiAgY29uc29sZS5sb2coJ/CflI0gZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMgY2FsbGVkIHdpdGg6JywgeyBxdWVyeSwgcHJvZmlsZTogcHJvZmlsZS5wcm9ncmFtLCB0ZXJtOiBwcm9maWxlLmN1cnJlbnRfdGVybSB9KVxuICBcbiAgLy8gU2VhcmNoIGZvciByZWxldmFudCBjb3Vyc2VzIChkb24ndCBmaWx0ZXIgYnkgdGVybSAtIHVzZSBpdCBhcyBndWlkYW5jZSBvbmx5KVxuICBjb25zdCBjb3Vyc2VzID0gYXdhaXQgc2VhcmNoQ291cnNlcyhxdWVyeSwge1xuICAgIC8vIERvbid0IGZpbHRlciBieSB0ZXJtIG9yIHNraWxscyBmb3IgZ2VuZXJhbCBzZWFyY2hlcyAtIGxldCB0aGUgdGV4dCBzZWFyY2ggaGFuZGxlIHJlbGV2YW5jZVxuICB9KVxuICBcbiAgY29uc29sZS5sb2coJ/Cfk5ogRm91bmQgY291cnNlczonLCBjb3Vyc2VzLmxlbmd0aCwgJ2NvdXJzZXMnKVxuICBpZiAoY291cnNlcy5sZW5ndGggPiAwKSB7XG4gICAgY29uc29sZS5sb2coJ/Cfk5ogU2FtcGxlIGNvdXJzZTonLCBjb3Vyc2VzWzBdLmlkLCBjb3Vyc2VzWzBdLnRpdGxlKVxuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIHNjb3JlcyBhbmQgZ2VuZXJhdGUgcmVjb21tZW5kYXRpb25zXG4gIGNvbnN0IHJlY29tbWVuZGF0aW9ucyA9IGNvdXJzZXNcbiAgICAubWFwKGNvdXJzZSA9PiB7XG4gICAgICBjb25zdCBzY29yZURhdGEgPSBjYWxjdWxhdGVDb3Vyc2VTY29yZShjb3Vyc2UsIHByb2ZpbGUsIHByb2ZpbGUuZ29hbF90YWdzKVxuICAgICAgY29uc29sZS5sb2coYPCfk4ogQ291cnNlICR7Y291cnNlLmlkfSBzY29yZTpgLCBzY29yZURhdGEuc2NvcmUpXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb3Vyc2UsXG4gICAgICAgIC4uLnNjb3JlRGF0YVxuICAgICAgfVxuICAgIH0pXG4gICAgLnNvcnQoKGEsIGIpID0+IGIuc2NvcmUgLSBhLnNjb3JlKVxuICAgIC5zbGljZSgwLCA1KVxuXG4gIGNvbnNvbGUubG9nKCfwn46vIEZpbmFsIHJlY29tbWVuZGF0aW9uczonLCByZWNvbW1lbmRhdGlvbnMubGVuZ3RoLCAncmVjb21tZW5kYXRpb25zJylcbiAgcmV0dXJuIHJlY29tbWVuZGF0aW9uc1xufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInN1cGFiYXNlIiwiZ2V0Q2hhdENvbXBsZXRpb24iLCJzZWFyY2hFbGVjdGl2ZURvY3MiLCJzZWFyY2hDb3Vyc2VzIiwic2VhcmNoU3BlY2lhbGl6YXRpb25zIiwic2VhcmNoQ2VydGlmaWNhdGVzIiwic2VhcmNoRGlwbG9tYXMiLCJjYWxjdWxhdGVDb3Vyc2VTY29yZSIsImV4dHJhY3RQcm9ncmFtRnJvbU1lc3NhZ2UiLCJtZXNzYWdlIiwicHJvZ3JhbUtleXdvcmRzIiwibWVzc2FnZUxvd2VyIiwidG9Mb3dlckNhc2UiLCJwcm9ncmFtIiwia2V5d29yZHMiLCJPYmplY3QiLCJlbnRyaWVzIiwic29tZSIsImtleXdvcmQiLCJpbmNsdWRlcyIsImdldFJlY2VudE1lc3NhZ2VzIiwiUE9TVCIsInJlcXVlc3QiLCJzZXNzaW9uSWQiLCJ1c2VySWQiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJjb25zb2xlIiwibG9nIiwicHJvZmlsZSIsImRhdGEiLCJwcm9maWxlcyIsInByb2ZpbGVFcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsInVzZXJfaWQiLCJ1c2VybmFtZSIsImN1cnJlbnRfdGVybSIsImNvbXBsZXRlZF9jb3Vyc2VzIiwicGxhbm5lZF9jb3Vyc2VzIiwiaW50ZXJlc3RzIiwiZ29hbF90YWdzIiwiYWRkaXRpb25hbF9jb21tZW50cyIsImdwYSIsImNvbnN0cmFpbnRzIiwibWF4X3dvcmtsb2FkIiwibW9ybmluZ19sYWJzIiwic2NoZWR1bGVfcHJlZmVyZW5jZXMiLCJsZW5ndGgiLCJyZWNlbnRNZXNzYWdlcyIsInNlYXJjaFJlc3VsdHMiLCJ0ZXJtIiwic2tpbGxzIiwiaWQiLCJ0aXRsZSIsImRlcHQiLCJudW1iZXIiLCJ1bml0cyIsImxldmVsIiwiZGVzY3JpcHRpb24iLCJ0ZXJtc19vZmZlcmVkIiwicHJlcmVxcyIsIndvcmtsb2FkIiwicmVhZGluZyIsImFzc2lnbm1lbnRzIiwicHJvamVjdHMiLCJsYWJzIiwiYXNzZXNzbWVudHMiLCJtaWR0ZXJtIiwiZmluYWwiLCJwcm9qZWN0Iiwic291cmNlX3VybCIsInByb2dyYW1Ub1NlYXJjaCIsInVwZGF0ZSIsInNwZWNpYWxpemF0aW9ucyIsImNlcnRpZmljYXRlcyIsImRpcGxvbWFzIiwiZG9jQ2h1bmtzIiwiY29udGV4dCIsImJ1aWxkQ29udGV4dCIsInNob3VsZEFza0Fib3V0RWxlY3RpdmVzIiwic2hvdWxkQXNrQWJvdXRDb21wbGV0ZWRFbGVjdGl2ZXMiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwiZ2V0U3lzdGVtUHJvbXB0IiwibWFwIiwibXNnIiwiX2dldFR5cGUiLCJKU09OIiwic3RyaW5naWZ5IiwiYWlSZXNwb25zZSIsImluc2VydCIsInNlc3Npb25faWQiLCJ0b2tlbnMiLCJNYXRoIiwiY2VpbCIsImNpdGF0aW9ucyIsImNodW5rIiwidXJsIiwidGV4dCIsInN1YnN0cmluZyIsInJlY29tbWVuZGF0aW9ucyIsInNob3VsZFJlY29tbWVuZCIsInNob3VsZEdlbmVyYXRlUmVjb21tZW5kYXRpb25zIiwiY29udGV4dFF1ZXJ5IiwiYnVpbGRTZWFyY2hRdWVyeUZyb21Db250ZXh0IiwiZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMiLCJyZXNwb25zZUxlbmd0aCIsInJlY29tbWVuZGF0aW9uc0NvdW50IiwiciIsImNvdXJzZSIsInNjb3JlIiwicmVzcG9uc2UiLCJzb3VyY2VzIiwidXNlZF93ZWJfc2VhcmNoIiwic2xpY2UiLCJmb3JFYWNoIiwiam9pbiIsInNwZWMiLCJpbmRleCIsIm5hbWUiLCJncmFkdWF0aW9uX3JlcXVpcmVtZW50cyIsImNvdXJzZV9yZXF1aXJlbWVudHMiLCJyZXF1aXJlZCIsImNob29zZV9mcm9tIiwiZXhhbXBsZXMiLCJjYXRlZ29yeSIsImNvdXJzZXMiLCJBcnJheSIsImlzQXJyYXkiLCJyZXBsYWNlIiwidG9VcHBlckNhc2UiLCJjZXJ0IiwiYWRtaW5pc3RlcmVkX2J5IiwicmVxdWlyZW1lbnRzIiwiZGlwbG9tYSIsInByb2dyYW1BYmJyZXZpYXRpb25zIiwiZnVsbFByb2dyYW1OYW1lIiwibGlrZWx5Q29tcGxldGVkQ291cnNlcyIsImdlbmVyYXRlTGlrZWx5Q29tcGxldGVkQ291cnNlcyIsImxpa2VseUNvdXJzZXMiLCJwdXNoIiwiaXNFbGVjdGl2ZVF1ZXJ5IiwiaGFzTm9Db21wbGV0ZWRDb3Vyc2VzIiwiaXNVcHBlclllYXIiLCJyZWNvbW1lbmRhdGlvblRyaWdnZXJzIiwiZ3JlZXRpbmdzIiwiZ3JlZXRpbmciLCJoYXNUcmlnZ2VyIiwidHJpZ2dlciIsIm1hdGNoaW5nVHJpZ2dlcnMiLCJmaWx0ZXIiLCJ0b3RhbFRyaWdnZXJzIiwiY291cnNlSGVscFBhdHRlcm5zIiwiaGFzQ291cnNlSGVscCIsInBhdHRlcm4iLCJ0ZXN0IiwiY3VycmVudE1lc3NhZ2UiLCJjdXJyZW50VGVybXMiLCJleHRyYWN0S2V5VGVybXMiLCJyZWNlbnRUZXJtcyIsImZsYXQiLCJhbGxUZXJtcyIsIlNldCIsIm1lYW5pbmdmdWxUZXJtcyIsInNlYXJjaFF1ZXJ5IiwiZmluYWxRdWVyeSIsInNwbGl0Iiwid29yZCIsInF1ZXJ5Iiwic2NvcmVEYXRhIiwic29ydCIsImEiLCJiIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/demo-data.ts":
/*!******************************!*\
  !*** ./src/lib/demo-data.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   demoCourses: () => (/* binding */ demoCourses),\n/* harmony export */   demoOptions: () => (/* binding */ demoOptions),\n/* harmony export */   demoProfile: () => (/* binding */ demoProfile)\n/* harmony export */ });\n// Demo data for when Supabase is not configured\nconst demoCourses = [\n    {\n        id: \"CS246\",\n        title: \"Data Structures and Data Management\",\n        dept: \"CS\",\n        number: 246,\n        units: 0.5,\n        level: 200,\n        description: \"Introduction to data structures, algorithms, and database management systems.\",\n        terms_offered: [\n            \"F\",\n            \"W\",\n            \"S\"\n        ],\n        prereqs: \"CS 136\",\n        skills: [\n            \"programming\",\n            \"data structures\",\n            \"algorithms\"\n        ],\n        workload: {\n            reading: 2,\n            assignments: 4,\n            projects: 1,\n            labs: 2\n        },\n        assessments: {\n            midterm: 25,\n            final: 35,\n            assignments: 30,\n            labs: 10\n        },\n        source_url: \"https://uwaterloo.ca/computer-science/undergraduate-studies/course-catalog/cs-246\"\n    },\n    {\n        id: \"ECE222\",\n        title: \"Digital Computers\",\n        dept: \"ECE\",\n        number: 222,\n        units: 0.5,\n        level: 200,\n        description: \"Introduction to digital computer organization and assembly language programming.\",\n        terms_offered: [\n            \"F\",\n            \"W\"\n        ],\n        prereqs: \"ECE 150\",\n        skills: [\n            \"computer organization\",\n            \"assembly\",\n            \"hardware\"\n        ],\n        workload: {\n            reading: 2,\n            assignments: 3,\n            projects: 1,\n            labs: 2\n        },\n        assessments: {\n            midterm: 30,\n            final: 40,\n            assignments: 20,\n            labs: 10\n        },\n        source_url: \"https://uwaterloo.ca/electrical-computer-engineering/undergraduate-studies/course-catalog/ece-222\"\n    },\n    {\n        id: \"ECE486\",\n        title: \"Robot Dynamics and Control\",\n        dept: \"ECE\",\n        number: 486,\n        units: 0.5,\n        level: 400,\n        description: \"Advanced course covering robot kinematics, dynamics, and control systems.\",\n        terms_offered: [\n            \"F\",\n            \"W\"\n        ],\n        prereqs: \"ECE 380, MATH 211\",\n        skills: [\n            \"robotics\",\n            \"control\",\n            \"dynamics\"\n        ],\n        workload: {\n            reading: 3,\n            assignments: 4,\n            projects: 2,\n            labs: 2\n        },\n        assessments: {\n            midterm: 30,\n            final: 40,\n            assignments: 20,\n            project: 10\n        },\n        source_url: \"https://uwaterloo.ca/electrical-computer-engineering/undergraduate-studies/course-catalog/ece-486\"\n    },\n    {\n        id: \"MTE380\",\n        title: \"Mechatronics Systems Modelling\",\n        dept: \"MTE\",\n        number: 380,\n        units: 0.5,\n        level: 300,\n        description: \"Introduction to modeling and simulation of mechatronic systems.\",\n        terms_offered: [\n            \"F\"\n        ],\n        prereqs: \"MATH 211, MTE 100\",\n        skills: [\n            \"modelling\",\n            \"simulation\",\n            \"control\"\n        ],\n        workload: {\n            reading: 2,\n            assignments: 3,\n            projects: 2,\n            labs: 1\n        },\n        assessments: {\n            midterm: 25,\n            final: 35,\n            assignments: 25,\n            project: 15\n        },\n        source_url: \"https://uwaterloo.ca/mechanical-mechatronics-engineering/undergraduate-studies/course-catalog/mte-380\"\n    },\n    {\n        id: \"ECE488\",\n        title: \"Computer Organization and Design\",\n        dept: \"ECE\",\n        number: 488,\n        units: 0.5,\n        level: 400,\n        description: \"Computer architecture and organization. Topics include instruction set design, processor implementation, memory systems.\",\n        terms_offered: [\n            \"F\",\n            \"W\"\n        ],\n        prereqs: \"ECE 150, ECE 222\",\n        skills: [\n            \"computer architecture\",\n            \"hardware\",\n            \"systems\"\n        ],\n        workload: {\n            reading: 3,\n            assignments: 4,\n            projects: 1,\n            labs: 3\n        },\n        assessments: {\n            midterm: 30,\n            final: 40,\n            assignments: 20,\n            labs: 10\n        },\n        source_url: \"https://uwaterloo.ca/electrical-computer-engineering/undergraduate-studies/course-catalog/ece-488\"\n    },\n    {\n        id: \"ECE457A\",\n        title: \"Artificial Intelligence\",\n        dept: \"ECE\",\n        number: 457,\n        units: 0.5,\n        level: 400,\n        description: \"Introduction to artificial intelligence concepts including search, knowledge representation, and machine learning.\",\n        terms_offered: [\n            \"F\",\n            \"W\"\n        ],\n        prereqs: \"ECE 250, STAT 206\",\n        skills: [\n            \"artificial intelligence\",\n            \"machine learning\",\n            \"algorithms\"\n        ],\n        workload: {\n            reading: 3,\n            assignments: 4,\n            projects: 2,\n            labs: 1\n        },\n        assessments: {\n            midterm: 25,\n            final: 35,\n            assignments: 30,\n            project: 10\n        },\n        source_url: \"https://uwaterloo.ca/electrical-computer-engineering/undergraduate-studies/course-catalog/ece-457a\"\n    },\n    {\n        id: \"CS486\",\n        title: \"Introduction to Artificial Intelligence\",\n        dept: \"CS\",\n        number: 486,\n        units: 0.5,\n        level: 400,\n        description: \"Introduction to artificial intelligence including machine learning, neural networks, and AI applications.\",\n        terms_offered: [\n            \"F\",\n            \"W\",\n            \"S\"\n        ],\n        prereqs: \"CS 241, STAT 206\",\n        skills: [\n            \"artificial intelligence\",\n            \"machine learning\",\n            \"neural networks\",\n            \"algorithms\"\n        ],\n        workload: {\n            reading: 3,\n            assignments: 4,\n            projects: 2,\n            labs: 1\n        },\n        assessments: {\n            midterm: 25,\n            final: 35,\n            assignments: 30,\n            project: 10\n        },\n        source_url: \"https://uwaterloo.ca/computer-science/undergraduate-studies/course-catalog/cs-486\"\n    },\n    {\n        id: \"CS448\",\n        title: \"Machine Learning\",\n        dept: \"CS\",\n        number: 448,\n        units: 0.5,\n        level: 400,\n        description: \"Introduction to machine learning algorithms, statistical learning, and data mining techniques.\",\n        terms_offered: [\n            \"F\",\n            \"W\"\n        ],\n        prereqs: \"CS 241, STAT 206, MATH 211\",\n        skills: [\n            \"machine learning\",\n            \"statistical learning\",\n            \"data mining\",\n            \"algorithms\"\n        ],\n        workload: {\n            reading: 4,\n            assignments: 4,\n            projects: 2,\n            labs: 1\n        },\n        assessments: {\n            midterm: 20,\n            final: 30,\n            assignments: 35,\n            project: 15\n        },\n        source_url: \"https://uwaterloo.ca/computer-science/undergraduate-studies/course-catalog/cs-448\"\n    },\n    {\n        id: \"STAT330\",\n        title: \"Introduction to Statistical Learning\",\n        dept: \"STAT\",\n        number: 330,\n        units: 0.5,\n        level: 300,\n        description: \"Statistical methods for machine learning including regression, classification, and model selection.\",\n        terms_offered: [\n            \"F\",\n            \"W\",\n            \"S\"\n        ],\n        prereqs: \"STAT 206, MATH 211\",\n        skills: [\n            \"statistical learning\",\n            \"regression\",\n            \"classification\",\n            \"statistics\"\n        ],\n        workload: {\n            reading: 3,\n            assignments: 3,\n            projects: 1,\n            labs: 1\n        },\n        assessments: {\n            midterm: 30,\n            final: 40,\n            assignments: 25,\n            project: 5\n        },\n        source_url: \"https://uwaterloo.ca/statistics-and-actuarial-science/undergraduate-studies/course-catalog/stat-330\"\n    },\n    {\n        id: \"SYDE522\",\n        title: \"Robotics and Control\",\n        dept: \"SYDE\",\n        number: 522,\n        units: 0.5,\n        level: 500,\n        description: \"Advanced robotics and control systems with focus on autonomous systems and human-robot interaction.\",\n        terms_offered: [\n            \"F\"\n        ],\n        prereqs: \"SYDE 352, MTE 380\",\n        skills: [\n            \"robotics\",\n            \"autonomous systems\",\n            \"control\",\n            \"human-robot interaction\"\n        ],\n        workload: {\n            reading: 4,\n            assignments: 3,\n            projects: 3,\n            labs: 2\n        },\n        assessments: {\n            midterm: 20,\n            final: 30,\n            assignments: 25,\n            project: 25\n        },\n        source_url: \"https://uwaterloo.ca/systems-design-engineering/undergraduate-studies/course-catalog/syde-522\"\n    }\n];\nconst demoOptions = [\n    {\n        id: \"robotics-option\",\n        name: \"Robotics Option\",\n        program: \"MTE\",\n        faculty: \"Engineering\",\n        required_courses: [\n            \"ECE486\"\n        ],\n        selective_rules: {\n            selectNfrom: [\n                \"MTE380\",\n                \"ECE488\",\n                \"SYDE522\"\n            ],\n            N: 2\n        },\n        description: \"Specialization in robotics and automation systems, covering control theory, robot dynamics, and mechatronic design.\",\n        source_url: \"https://uwaterloo.ca/mechanical-mechatronics-engineering/undergraduate-studies/options/robotics\"\n    },\n    {\n        id: \"ai-option\",\n        name: \"Artificial Intelligence Option\",\n        program: \"ECE\",\n        faculty: \"Engineering\",\n        required_courses: [\n            \"ECE457A\"\n        ],\n        selective_rules: {\n            selectNfrom: [\n                \"ECE457B\",\n                \"ECE457C\",\n                \"ECE457D\"\n            ],\n            N: 2\n        },\n        description: \"Focus on artificial intelligence, machine learning, and intelligent systems.\",\n        source_url: \"https://uwaterloo.ca/electrical-computer-engineering/undergraduate-studies/options/artificial-intelligence\"\n    }\n];\nconst demoProfile = {\n    user_id: \"demo-user\",\n    program: \"MTE\",\n    current_term: \"2A\",\n    completed_courses: [\n        \"ECE100\",\n        \"ECE150\",\n        \"MATH211\"\n    ],\n    planned_courses: [],\n    gpa: 3.5,\n    interests: [\n        \"robotics\",\n        \"control\",\n        \"embedded systems\"\n    ],\n    goal_tags: [\n        \"career_robotics\",\n        \"industry_work\"\n    ],\n    constraints: {\n        max_workload: 4,\n        morning_labs: false,\n        schedule_preferences: []\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGNBQWM7UUFDZEMsY0FBYztRQUNkQyxzQkFBc0IsRUFBRTtJQUMxQjtBQUNGLEVBQUMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcc2hpbG9cXEVsZWN0aXZlIENob29zZXJcXGZyb250ZW5kXFxzcmNcXGxpYlxcZGVtby1kYXRhLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIERlbW8gZGF0YSBmb3Igd2hlbiBTdXBhYmFzZSBpcyBub3QgY29uZmlndXJlZFxyXG5leHBvcnQgY29uc3QgZGVtb0NvdXJzZXMgPSBbXHJcbiAge1xyXG4gICAgaWQ6IFwiQ1MyNDZcIixcclxuICAgIHRpdGxlOiBcIkRhdGEgU3RydWN0dXJlcyBhbmQgRGF0YSBNYW5hZ2VtZW50XCIsXHJcbiAgICBkZXB0OiBcIkNTXCIsXHJcbiAgICBudW1iZXI6IDI0NixcclxuICAgIHVuaXRzOiAwLjUsXHJcbiAgICBsZXZlbDogMjAwLFxyXG4gICAgZGVzY3JpcHRpb246IFwiSW50cm9kdWN0aW9uIHRvIGRhdGEgc3RydWN0dXJlcywgYWxnb3JpdGhtcywgYW5kIGRhdGFiYXNlIG1hbmFnZW1lbnQgc3lzdGVtcy5cIixcclxuICAgIHRlcm1zX29mZmVyZWQ6IFtcIkZcIiwgXCJXXCIsIFwiU1wiXSxcclxuICAgIHByZXJlcXM6IFwiQ1MgMTM2XCIsXHJcbiAgICBza2lsbHM6IFtcInByb2dyYW1taW5nXCIsIFwiZGF0YSBzdHJ1Y3R1cmVzXCIsIFwiYWxnb3JpdGhtc1wiXSxcclxuICAgIHdvcmtsb2FkOiB7IHJlYWRpbmc6IDIsIGFzc2lnbm1lbnRzOiA0LCBwcm9qZWN0czogMSwgbGFiczogMiB9LFxyXG4gICAgYXNzZXNzbWVudHM6IHsgbWlkdGVybTogMjUsIGZpbmFsOiAzNSwgYXNzaWdubWVudHM6IDMwLCBsYWJzOiAxMCB9LFxyXG4gICAgc291cmNlX3VybDogXCJodHRwczovL3V3YXRlcmxvby5jYS9jb21wdXRlci1zY2llbmNlL3VuZGVyZ3JhZHVhdGUtc3R1ZGllcy9jb3Vyc2UtY2F0YWxvZy9jcy0yNDZcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6IFwiRUNFMjIyXCIsXHJcbiAgICB0aXRsZTogXCJEaWdpdGFsIENvbXB1dGVyc1wiLFxyXG4gICAgZGVwdDogXCJFQ0VcIixcclxuICAgIG51bWJlcjogMjIyLFxyXG4gICAgdW5pdHM6IDAuNSxcclxuICAgIGxldmVsOiAyMDAsXHJcbiAgICBkZXNjcmlwdGlvbjogXCJJbnRyb2R1Y3Rpb24gdG8gZGlnaXRhbCBjb21wdXRlciBvcmdhbml6YXRpb24gYW5kIGFzc2VtYmx5IGxhbmd1YWdlIHByb2dyYW1taW5nLlwiLFxyXG4gICAgdGVybXNfb2ZmZXJlZDogW1wiRlwiLCBcIldcIl0sXHJcbiAgICBwcmVyZXFzOiBcIkVDRSAxNTBcIixcclxuICAgIHNraWxsczogW1wiY29tcHV0ZXIgb3JnYW5pemF0aW9uXCIsIFwiYXNzZW1ibHlcIiwgXCJoYXJkd2FyZVwiXSxcclxuICAgIHdvcmtsb2FkOiB7IHJlYWRpbmc6IDIsIGFzc2lnbm1lbnRzOiAzLCBwcm9qZWN0czogMSwgbGFiczogMiB9LFxyXG4gICAgYXNzZXNzbWVudHM6IHsgbWlkdGVybTogMzAsIGZpbmFsOiA0MCwgYXNzaWdubWVudHM6IDIwLCBsYWJzOiAxMCB9LFxyXG4gICAgc291cmNlX3VybDogXCJodHRwczovL3V3YXRlcmxvby5jYS9lbGVjdHJpY2FsLWNvbXB1dGVyLWVuZ2luZWVyaW5nL3VuZGVyZ3JhZHVhdGUtc3R1ZGllcy9jb3Vyc2UtY2F0YWxvZy9lY2UtMjIyXCJcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiBcIkVDRTQ4NlwiLFxyXG4gICAgdGl0bGU6IFwiUm9ib3QgRHluYW1pY3MgYW5kIENvbnRyb2xcIixcclxuICAgIGRlcHQ6IFwiRUNFXCIsXHJcbiAgICBudW1iZXI6IDQ4NixcclxuICAgIHVuaXRzOiAwLjUsXHJcbiAgICBsZXZlbDogNDAwLFxyXG4gICAgZGVzY3JpcHRpb246IFwiQWR2YW5jZWQgY291cnNlIGNvdmVyaW5nIHJvYm90IGtpbmVtYXRpY3MsIGR5bmFtaWNzLCBhbmQgY29udHJvbCBzeXN0ZW1zLlwiLFxyXG4gICAgdGVybXNfb2ZmZXJlZDogW1wiRlwiLCBcIldcIl0sXHJcbiAgICBwcmVyZXFzOiBcIkVDRSAzODAsIE1BVEggMjExXCIsXHJcbiAgICBza2lsbHM6IFtcInJvYm90aWNzXCIsIFwiY29udHJvbFwiLCBcImR5bmFtaWNzXCJdLFxyXG4gICAgd29ya2xvYWQ6IHsgcmVhZGluZzogMywgYXNzaWdubWVudHM6IDQsIHByb2plY3RzOiAyLCBsYWJzOiAyIH0sXHJcbiAgICBhc3Nlc3NtZW50czogeyBtaWR0ZXJtOiAzMCwgZmluYWw6IDQwLCBhc3NpZ25tZW50czogMjAsIHByb2plY3Q6IDEwIH0sXHJcbiAgICBzb3VyY2VfdXJsOiBcImh0dHBzOi8vdXdhdGVybG9vLmNhL2VsZWN0cmljYWwtY29tcHV0ZXItZW5naW5lZXJpbmcvdW5kZXJncmFkdWF0ZS1zdHVkaWVzL2NvdXJzZS1jYXRhbG9nL2VjZS00ODZcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6IFwiTVRFMzgwXCIsXHJcbiAgICB0aXRsZTogXCJNZWNoYXRyb25pY3MgU3lzdGVtcyBNb2RlbGxpbmdcIixcclxuICAgIGRlcHQ6IFwiTVRFXCIsXHJcbiAgICBudW1iZXI6IDM4MCxcclxuICAgIHVuaXRzOiAwLjUsXHJcbiAgICBsZXZlbDogMzAwLFxyXG4gICAgZGVzY3JpcHRpb246IFwiSW50cm9kdWN0aW9uIHRvIG1vZGVsaW5nIGFuZCBzaW11bGF0aW9uIG9mIG1lY2hhdHJvbmljIHN5c3RlbXMuXCIsXHJcbiAgICB0ZXJtc19vZmZlcmVkOiBbXCJGXCJdLFxyXG4gICAgcHJlcmVxczogXCJNQVRIIDIxMSwgTVRFIDEwMFwiLFxyXG4gICAgc2tpbGxzOiBbXCJtb2RlbGxpbmdcIiwgXCJzaW11bGF0aW9uXCIsIFwiY29udHJvbFwiXSxcclxuICAgIHdvcmtsb2FkOiB7IHJlYWRpbmc6IDIsIGFzc2lnbm1lbnRzOiAzLCBwcm9qZWN0czogMiwgbGFiczogMSB9LFxyXG4gICAgYXNzZXNzbWVudHM6IHsgbWlkdGVybTogMjUsIGZpbmFsOiAzNSwgYXNzaWdubWVudHM6IDI1LCBwcm9qZWN0OiAxNSB9LFxyXG4gICAgc291cmNlX3VybDogXCJodHRwczovL3V3YXRlcmxvby5jYS9tZWNoYW5pY2FsLW1lY2hhdHJvbmljcy1lbmdpbmVlcmluZy91bmRlcmdyYWR1YXRlLXN0dWRpZXMvY291cnNlLWNhdGFsb2cvbXRlLTM4MFwiXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogXCJFQ0U0ODhcIixcclxuICAgIHRpdGxlOiBcIkNvbXB1dGVyIE9yZ2FuaXphdGlvbiBhbmQgRGVzaWduXCIsXHJcbiAgICBkZXB0OiBcIkVDRVwiLFxyXG4gICAgbnVtYmVyOiA0ODgsXHJcbiAgICB1bml0czogMC41LFxyXG4gICAgbGV2ZWw6IDQwMCxcclxuICAgIGRlc2NyaXB0aW9uOiBcIkNvbXB1dGVyIGFyY2hpdGVjdHVyZSBhbmQgb3JnYW5pemF0aW9uLiBUb3BpY3MgaW5jbHVkZSBpbnN0cnVjdGlvbiBzZXQgZGVzaWduLCBwcm9jZXNzb3IgaW1wbGVtZW50YXRpb24sIG1lbW9yeSBzeXN0ZW1zLlwiLFxyXG4gICAgdGVybXNfb2ZmZXJlZDogW1wiRlwiLCBcIldcIl0sXHJcbiAgICBwcmVyZXFzOiBcIkVDRSAxNTAsIEVDRSAyMjJcIixcclxuICAgIHNraWxsczogW1wiY29tcHV0ZXIgYXJjaGl0ZWN0dXJlXCIsIFwiaGFyZHdhcmVcIiwgXCJzeXN0ZW1zXCJdLFxyXG4gICAgd29ya2xvYWQ6IHsgcmVhZGluZzogMywgYXNzaWdubWVudHM6IDQsIHByb2plY3RzOiAxLCBsYWJzOiAzIH0sXHJcbiAgICBhc3Nlc3NtZW50czogeyBtaWR0ZXJtOiAzMCwgZmluYWw6IDQwLCBhc3NpZ25tZW50czogMjAsIGxhYnM6IDEwIH0sXHJcbiAgICBzb3VyY2VfdXJsOiBcImh0dHBzOi8vdXdhdGVybG9vLmNhL2VsZWN0cmljYWwtY29tcHV0ZXItZW5naW5lZXJpbmcvdW5kZXJncmFkdWF0ZS1zdHVkaWVzL2NvdXJzZS1jYXRhbG9nL2VjZS00ODhcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6IFwiRUNFNDU3QVwiLFxyXG4gICAgdGl0bGU6IFwiQXJ0aWZpY2lhbCBJbnRlbGxpZ2VuY2VcIixcclxuICAgIGRlcHQ6IFwiRUNFXCIsXHJcbiAgICBudW1iZXI6IDQ1NyxcclxuICAgIHVuaXRzOiAwLjUsXHJcbiAgICBsZXZlbDogNDAwLFxyXG4gICAgZGVzY3JpcHRpb246IFwiSW50cm9kdWN0aW9uIHRvIGFydGlmaWNpYWwgaW50ZWxsaWdlbmNlIGNvbmNlcHRzIGluY2x1ZGluZyBzZWFyY2gsIGtub3dsZWRnZSByZXByZXNlbnRhdGlvbiwgYW5kIG1hY2hpbmUgbGVhcm5pbmcuXCIsXHJcbiAgICB0ZXJtc19vZmZlcmVkOiBbXCJGXCIsIFwiV1wiXSxcclxuICAgIHByZXJlcXM6IFwiRUNFIDI1MCwgU1RBVCAyMDZcIixcclxuICAgIHNraWxsczogW1wiYXJ0aWZpY2lhbCBpbnRlbGxpZ2VuY2VcIiwgXCJtYWNoaW5lIGxlYXJuaW5nXCIsIFwiYWxnb3JpdGhtc1wiXSxcclxuICAgIHdvcmtsb2FkOiB7IHJlYWRpbmc6IDMsIGFzc2lnbm1lbnRzOiA0LCBwcm9qZWN0czogMiwgbGFiczogMSB9LFxyXG4gICAgYXNzZXNzbWVudHM6IHsgbWlkdGVybTogMjUsIGZpbmFsOiAzNSwgYXNzaWdubWVudHM6IDMwLCBwcm9qZWN0OiAxMCB9LFxyXG4gICAgc291cmNlX3VybDogXCJodHRwczovL3V3YXRlcmxvby5jYS9lbGVjdHJpY2FsLWNvbXB1dGVyLWVuZ2luZWVyaW5nL3VuZGVyZ3JhZHVhdGUtc3R1ZGllcy9jb3Vyc2UtY2F0YWxvZy9lY2UtNDU3YVwiXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogXCJDUzQ4NlwiLFxyXG4gICAgdGl0bGU6IFwiSW50cm9kdWN0aW9uIHRvIEFydGlmaWNpYWwgSW50ZWxsaWdlbmNlXCIsXHJcbiAgICBkZXB0OiBcIkNTXCIsXHJcbiAgICBudW1iZXI6IDQ4NixcclxuICAgIHVuaXRzOiAwLjUsXHJcbiAgICBsZXZlbDogNDAwLFxyXG4gICAgZGVzY3JpcHRpb246IFwiSW50cm9kdWN0aW9uIHRvIGFydGlmaWNpYWwgaW50ZWxsaWdlbmNlIGluY2x1ZGluZyBtYWNoaW5lIGxlYXJuaW5nLCBuZXVyYWwgbmV0d29ya3MsIGFuZCBBSSBhcHBsaWNhdGlvbnMuXCIsXHJcbiAgICB0ZXJtc19vZmZlcmVkOiBbXCJGXCIsIFwiV1wiLCBcIlNcIl0sXHJcbiAgICBwcmVyZXFzOiBcIkNTIDI0MSwgU1RBVCAyMDZcIixcclxuICAgIHNraWxsczogW1wiYXJ0aWZpY2lhbCBpbnRlbGxpZ2VuY2VcIiwgXCJtYWNoaW5lIGxlYXJuaW5nXCIsIFwibmV1cmFsIG5ldHdvcmtzXCIsIFwiYWxnb3JpdGhtc1wiXSxcclxuICAgIHdvcmtsb2FkOiB7IHJlYWRpbmc6IDMsIGFzc2lnbm1lbnRzOiA0LCBwcm9qZWN0czogMiwgbGFiczogMSB9LFxyXG4gICAgYXNzZXNzbWVudHM6IHsgbWlkdGVybTogMjUsIGZpbmFsOiAzNSwgYXNzaWdubWVudHM6IDMwLCBwcm9qZWN0OiAxMCB9LFxyXG4gICAgc291cmNlX3VybDogXCJodHRwczovL3V3YXRlcmxvby5jYS9jb21wdXRlci1zY2llbmNlL3VuZGVyZ3JhZHVhdGUtc3R1ZGllcy9jb3Vyc2UtY2F0YWxvZy9jcy00ODZcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgaWQ6IFwiQ1M0NDhcIixcclxuICAgIHRpdGxlOiBcIk1hY2hpbmUgTGVhcm5pbmdcIixcclxuICAgIGRlcHQ6IFwiQ1NcIixcclxuICAgIG51bWJlcjogNDQ4LFxyXG4gICAgdW5pdHM6IDAuNSxcclxuICAgIGxldmVsOiA0MDAsXHJcbiAgICBkZXNjcmlwdGlvbjogXCJJbnRyb2R1Y3Rpb24gdG8gbWFjaGluZSBsZWFybmluZyBhbGdvcml0aG1zLCBzdGF0aXN0aWNhbCBsZWFybmluZywgYW5kIGRhdGEgbWluaW5nIHRlY2huaXF1ZXMuXCIsXHJcbiAgICB0ZXJtc19vZmZlcmVkOiBbXCJGXCIsIFwiV1wiXSxcclxuICAgIHByZXJlcXM6IFwiQ1MgMjQxLCBTVEFUIDIwNiwgTUFUSCAyMTFcIixcclxuICAgIHNraWxsczogW1wibWFjaGluZSBsZWFybmluZ1wiLCBcInN0YXRpc3RpY2FsIGxlYXJuaW5nXCIsIFwiZGF0YSBtaW5pbmdcIiwgXCJhbGdvcml0aG1zXCJdLFxyXG4gICAgd29ya2xvYWQ6IHsgcmVhZGluZzogNCwgYXNzaWdubWVudHM6IDQsIHByb2plY3RzOiAyLCBsYWJzOiAxIH0sXHJcbiAgICBhc3Nlc3NtZW50czogeyBtaWR0ZXJtOiAyMCwgZmluYWw6IDMwLCBhc3NpZ25tZW50czogMzUsIHByb2plY3Q6IDE1IH0sXHJcbiAgICBzb3VyY2VfdXJsOiBcImh0dHBzOi8vdXdhdGVybG9vLmNhL2NvbXB1dGVyLXNjaWVuY2UvdW5kZXJncmFkdWF0ZS1zdHVkaWVzL2NvdXJzZS1jYXRhbG9nL2NzLTQ0OFwiXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogXCJTVEFUMzMwXCIsXHJcbiAgICB0aXRsZTogXCJJbnRyb2R1Y3Rpb24gdG8gU3RhdGlzdGljYWwgTGVhcm5pbmdcIixcclxuICAgIGRlcHQ6IFwiU1RBVFwiLFxyXG4gICAgbnVtYmVyOiAzMzAsXHJcbiAgICB1bml0czogMC41LFxyXG4gICAgbGV2ZWw6IDMwMCxcclxuICAgIGRlc2NyaXB0aW9uOiBcIlN0YXRpc3RpY2FsIG1ldGhvZHMgZm9yIG1hY2hpbmUgbGVhcm5pbmcgaW5jbHVkaW5nIHJlZ3Jlc3Npb24sIGNsYXNzaWZpY2F0aW9uLCBhbmQgbW9kZWwgc2VsZWN0aW9uLlwiLFxyXG4gICAgdGVybXNfb2ZmZXJlZDogW1wiRlwiLCBcIldcIiwgXCJTXCJdLFxyXG4gICAgcHJlcmVxczogXCJTVEFUIDIwNiwgTUFUSCAyMTFcIixcclxuICAgIHNraWxsczogW1wic3RhdGlzdGljYWwgbGVhcm5pbmdcIiwgXCJyZWdyZXNzaW9uXCIsIFwiY2xhc3NpZmljYXRpb25cIiwgXCJzdGF0aXN0aWNzXCJdLFxyXG4gICAgd29ya2xvYWQ6IHsgcmVhZGluZzogMywgYXNzaWdubWVudHM6IDMsIHByb2plY3RzOiAxLCBsYWJzOiAxIH0sXHJcbiAgICBhc3Nlc3NtZW50czogeyBtaWR0ZXJtOiAzMCwgZmluYWw6IDQwLCBhc3NpZ25tZW50czogMjUsIHByb2plY3Q6IDUgfSxcclxuICAgIHNvdXJjZV91cmw6IFwiaHR0cHM6Ly91d2F0ZXJsb28uY2Evc3RhdGlzdGljcy1hbmQtYWN0dWFyaWFsLXNjaWVuY2UvdW5kZXJncmFkdWF0ZS1zdHVkaWVzL2NvdXJzZS1jYXRhbG9nL3N0YXQtMzMwXCJcclxuICB9LFxyXG4gIHtcclxuICAgIGlkOiBcIlNZREU1MjJcIixcclxuICAgIHRpdGxlOiBcIlJvYm90aWNzIGFuZCBDb250cm9sXCIsXHJcbiAgICBkZXB0OiBcIlNZREVcIixcclxuICAgIG51bWJlcjogNTIyLFxyXG4gICAgdW5pdHM6IDAuNSxcclxuICAgIGxldmVsOiA1MDAsXHJcbiAgICBkZXNjcmlwdGlvbjogXCJBZHZhbmNlZCByb2JvdGljcyBhbmQgY29udHJvbCBzeXN0ZW1zIHdpdGggZm9jdXMgb24gYXV0b25vbW91cyBzeXN0ZW1zIGFuZCBodW1hbi1yb2JvdCBpbnRlcmFjdGlvbi5cIixcclxuICAgIHRlcm1zX29mZmVyZWQ6IFtcIkZcIl0sXHJcbiAgICBwcmVyZXFzOiBcIlNZREUgMzUyLCBNVEUgMzgwXCIsXHJcbiAgICBza2lsbHM6IFtcInJvYm90aWNzXCIsIFwiYXV0b25vbW91cyBzeXN0ZW1zXCIsIFwiY29udHJvbFwiLCBcImh1bWFuLXJvYm90IGludGVyYWN0aW9uXCJdLFxyXG4gICAgd29ya2xvYWQ6IHsgcmVhZGluZzogNCwgYXNzaWdubWVudHM6IDMsIHByb2plY3RzOiAzLCBsYWJzOiAyIH0sXHJcbiAgICBhc3Nlc3NtZW50czogeyBtaWR0ZXJtOiAyMCwgZmluYWw6IDMwLCBhc3NpZ25tZW50czogMjUsIHByb2plY3Q6IDI1IH0sXHJcbiAgICBzb3VyY2VfdXJsOiBcImh0dHBzOi8vdXdhdGVybG9vLmNhL3N5c3RlbXMtZGVzaWduLWVuZ2luZWVyaW5nL3VuZGVyZ3JhZHVhdGUtc3R1ZGllcy9jb3Vyc2UtY2F0YWxvZy9zeWRlLTUyMlwiXHJcbiAgfVxyXG5dXHJcblxyXG5leHBvcnQgY29uc3QgZGVtb09wdGlvbnMgPSBbXHJcbiAge1xyXG4gICAgaWQ6IFwicm9ib3RpY3Mtb3B0aW9uXCIsXHJcbiAgICBuYW1lOiBcIlJvYm90aWNzIE9wdGlvblwiLFxyXG4gICAgcHJvZ3JhbTogXCJNVEVcIixcclxuICAgIGZhY3VsdHk6IFwiRW5naW5lZXJpbmdcIixcclxuICAgIHJlcXVpcmVkX2NvdXJzZXM6IFtcIkVDRTQ4NlwiXSxcclxuICAgIHNlbGVjdGl2ZV9ydWxlczogeyBzZWxlY3ROZnJvbTogW1wiTVRFMzgwXCIsIFwiRUNFNDg4XCIsIFwiU1lERTUyMlwiXSwgTjogMiB9LFxyXG4gICAgZGVzY3JpcHRpb246IFwiU3BlY2lhbGl6YXRpb24gaW4gcm9ib3RpY3MgYW5kIGF1dG9tYXRpb24gc3lzdGVtcywgY292ZXJpbmcgY29udHJvbCB0aGVvcnksIHJvYm90IGR5bmFtaWNzLCBhbmQgbWVjaGF0cm9uaWMgZGVzaWduLlwiLFxyXG4gICAgc291cmNlX3VybDogXCJodHRwczovL3V3YXRlcmxvby5jYS9tZWNoYW5pY2FsLW1lY2hhdHJvbmljcy1lbmdpbmVlcmluZy91bmRlcmdyYWR1YXRlLXN0dWRpZXMvb3B0aW9ucy9yb2JvdGljc1wiXHJcbiAgfSxcclxuICB7XHJcbiAgICBpZDogXCJhaS1vcHRpb25cIixcclxuICAgIG5hbWU6IFwiQXJ0aWZpY2lhbCBJbnRlbGxpZ2VuY2UgT3B0aW9uXCIsXHJcbiAgICBwcm9ncmFtOiBcIkVDRVwiLFxyXG4gICAgZmFjdWx0eTogXCJFbmdpbmVlcmluZ1wiLFxyXG4gICAgcmVxdWlyZWRfY291cnNlczogW1wiRUNFNDU3QVwiXSxcclxuICAgIHNlbGVjdGl2ZV9ydWxlczogeyBzZWxlY3ROZnJvbTogW1wiRUNFNDU3QlwiLCBcIkVDRTQ1N0NcIiwgXCJFQ0U0NTdEXCJdLCBOOiAyIH0sXHJcbiAgICBkZXNjcmlwdGlvbjogXCJGb2N1cyBvbiBhcnRpZmljaWFsIGludGVsbGlnZW5jZSwgbWFjaGluZSBsZWFybmluZywgYW5kIGludGVsbGlnZW50IHN5c3RlbXMuXCIsXHJcbiAgICBzb3VyY2VfdXJsOiBcImh0dHBzOi8vdXdhdGVybG9vLmNhL2VsZWN0cmljYWwtY29tcHV0ZXItZW5naW5lZXJpbmcvdW5kZXJncmFkdWF0ZS1zdHVkaWVzL29wdGlvbnMvYXJ0aWZpY2lhbC1pbnRlbGxpZ2VuY2VcIlxyXG4gIH1cclxuXVxyXG5cclxuZXhwb3J0IGNvbnN0IGRlbW9Qcm9maWxlID0ge1xyXG4gIHVzZXJfaWQ6IFwiZGVtby11c2VyXCIsXHJcbiAgcHJvZ3JhbTogXCJNVEVcIixcclxuICBjdXJyZW50X3Rlcm06IFwiMkFcIixcclxuICBjb21wbGV0ZWRfY291cnNlczogW1wiRUNFMTAwXCIsIFwiRUNFMTUwXCIsIFwiTUFUSDIxMVwiXSxcclxuICBwbGFubmVkX2NvdXJzZXM6IFtdLFxyXG4gIGdwYTogMy41LFxyXG4gIGludGVyZXN0czogW1wicm9ib3RpY3NcIiwgXCJjb250cm9sXCIsIFwiZW1iZWRkZWQgc3lzdGVtc1wiXSxcclxuICBnb2FsX3RhZ3M6IFtcImNhcmVlcl9yb2JvdGljc1wiLCBcImluZHVzdHJ5X3dvcmtcIl0sXHJcbiAgY29uc3RyYWludHM6IHtcclxuICAgIG1heF93b3JrbG9hZDogNCxcclxuICAgIG1vcm5pbmdfbGFiczogZmFsc2UsXHJcbiAgICBzY2hlZHVsZV9wcmVmZXJlbmNlczogW11cclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImRlbW9Db3Vyc2VzIiwiaWQiLCJ0aXRsZSIsImRlcHQiLCJudW1iZXIiLCJ1bml0cyIsImxldmVsIiwiZGVzY3JpcHRpb24iLCJ0ZXJtc19vZmZlcmVkIiwicHJlcmVxcyIsInNraWxscyIsIndvcmtsb2FkIiwicmVhZGluZyIsImFzc2lnbm1lbnRzIiwicHJvamVjdHMiLCJsYWJzIiwiYXNzZXNzbWVudHMiLCJtaWR0ZXJtIiwiZmluYWwiLCJzb3VyY2VfdXJsIiwicHJvamVjdCIsImRlbW9PcHRpb25zIiwibmFtZSIsInByb2dyYW0iLCJmYWN1bHR5IiwicmVxdWlyZWRfY291cnNlcyIsInNlbGVjdGl2ZV9ydWxlcyIsInNlbGVjdE5mcm9tIiwiTiIsImRlbW9Qcm9maWxlIiwidXNlcl9pZCIsImN1cnJlbnRfdGVybSIsImNvbXBsZXRlZF9jb3Vyc2VzIiwicGxhbm5lZF9jb3Vyc2VzIiwiZ3BhIiwiaW50ZXJlc3RzIiwiZ29hbF90YWdzIiwiY29uc3RyYWludHMiLCJtYXhfd29ya2xvYWQiLCJtb3JuaW5nX2xhYnMiLCJzY2hlZHVsZV9wcmVmZXJlbmNlcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/demo-data.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/langchain-memory.ts":
/*!*************************************!*\
  !*** ./src/lib/langchain-memory.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SupabaseChatMessageHistory: () => (/* binding */ SupabaseChatMessageHistory),\n/* harmony export */   createChatMemory: () => (/* binding */ createChatMemory),\n/* harmony export */   getRecentMessages: () => (/* binding */ getRecentMessages)\n/* harmony export */ });\n/* harmony import */ var _langchain_core_chat_history__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/chat_history */ \"(rsc)/./node_modules/@langchain/core/chat_history.js\");\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/messages */ \"(rsc)/./node_modules/@langchain/core/messages.js\");\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./supabase */ \"(rsc)/./src/lib/supabase.ts\");\n\n\n\nclass SupabaseChatMessageHistory extends _langchain_core_chat_history__WEBPACK_IMPORTED_MODULE_0__.BaseChatMessageHistory {\n    constructor(sessionId, userId){\n        super();\n        this.sessionId = sessionId;\n        this.userId = userId;\n    }\n    async getMessages() {\n        const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.from('messages').select('*').eq('session_id', this.sessionId).order('created_at', {\n            ascending: true\n        });\n        if (error) {\n            console.error('Error fetching messages:', error);\n            return [];\n        }\n        return (data || []).map((msg)=>{\n            switch(msg.role){\n                case 'user':\n                    return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(msg.content);\n                case 'assistant':\n                    return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.AIMessage(msg.content);\n                case 'system':\n                    return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.SystemMessage(msg.content);\n                default:\n                    return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(msg.content);\n            }\n        });\n    }\n    async addMessage(message) {\n        const role = message._getType() === 'human' ? 'user' : message._getType() === 'ai' ? 'assistant' : 'system';\n        const { error } = await _supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.from('messages').insert({\n            session_id: this.sessionId,\n            role,\n            content: message.content,\n            tokens: this.estimateTokens(message.content)\n        });\n        if (error) {\n            console.error('Error adding message:', error);\n        }\n    }\n    async addUserMessage(message) {\n        await this.addMessage(new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(message));\n    }\n    async addAIMessage(message) {\n        await this.addMessage(new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.AIMessage(message));\n    }\n    async clear() {\n        const { error } = await _supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.from('messages').delete().eq('session_id', this.sessionId);\n        if (error) {\n            console.error('Error clearing messages:', error);\n        }\n    }\n    estimateTokens(text) {\n        // Rough estimation: 1 token ≈ 4 characters for English text\n        return Math.ceil(text.length / 4);\n    }\n}\n// Memory factory\nfunction createChatMemory(sessionId, userId) {\n    return new SupabaseChatMessageHistory(sessionId, userId);\n}\n// Get recent messages for context (last N messages)\nasync function getRecentMessages(sessionId, limit = 10) {\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_2__.supabase.from('messages').select('*').eq('session_id', sessionId).order('created_at', {\n        ascending: false\n    }).limit(limit);\n    if (error) {\n        console.error('Error fetching recent messages:', error);\n        return [];\n    }\n    return (data || []).reverse().map((msg)=>{\n        switch(msg.role){\n            case 'user':\n                return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(msg.content);\n            case 'assistant':\n                return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.AIMessage(msg.content);\n            case 'system':\n                return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.SystemMessage(msg.content);\n            default:\n                return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(msg.content);\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFDTEMsTUFBTSxDQUFDLEtBQ1BDLEVBQUUsQ0FBQyxjQUFjUCxXQUNqQlEsS0FBSyxDQUFDLGNBQWM7UUFBRUMsV0FBVztJQUFNLEdBQ3ZDdUIsS0FBSyxDQUFDQTtJQUVULElBQUk1QixPQUFPO1FBQ1RNLFFBQVFOLEtBQUssQ0FBQyxtQ0FBbUNBO1FBQ2pELE9BQU8sRUFBRTtJQUNYO0lBRUEsT0FBTyxDQUFDRCxRQUFRLEVBQUUsRUFBRThCLE9BQU8sR0FBR3RCLEdBQUcsQ0FBQ0MsQ0FBQUE7UUFDaEMsT0FBUUEsSUFBSUMsSUFBSTtZQUNkLEtBQUs7Z0JBQ0gsT0FBTyxJQUFJbEIsa0VBQVlBLENBQUNpQixJQUFJRSxPQUFPO1lBQ3JDLEtBQUs7Z0JBQ0gsT0FBTyxJQUFJbEIsK0RBQVNBLENBQUNnQixJQUFJRSxPQUFPO1lBQ2xDLEtBQUs7Z0JBQ0gsT0FBTyxJQUFJakIsbUVBQWFBLENBQUNlLElBQUlFLE9BQU87WUFDdEM7Z0JBQ0UsT0FBTyxJQUFJbkIsa0VBQVlBLENBQUNpQixJQUFJRSxPQUFPO1FBQ3ZDO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxzaGlsb1xcRWxlY3RpdmUgQ2hvb3NlclxcZnJvbnRlbmRcXHNyY1xcbGliXFxsYW5nY2hhaW4tbWVtb3J5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VDaGF0TWVzc2FnZUhpc3RvcnkgfSBmcm9tICdAbGFuZ2NoYWluL2NvcmUvY2hhdF9oaXN0b3J5J1xyXG5pbXBvcnQgeyBCYXNlTWVzc2FnZSwgSHVtYW5NZXNzYWdlLCBBSU1lc3NhZ2UsIFN5c3RlbU1lc3NhZ2UgfSBmcm9tICdAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXMnXHJcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAnLi9zdXBhYmFzZSdcclxuXHJcbmV4cG9ydCBjbGFzcyBTdXBhYmFzZUNoYXRNZXNzYWdlSGlzdG9yeSBleHRlbmRzIEJhc2VDaGF0TWVzc2FnZUhpc3Rvcnkge1xyXG4gIHB1YmxpYyBzZXNzaW9uSWQ6IHN0cmluZ1xyXG4gIHB1YmxpYyB1c2VySWQ6IHN0cmluZ1xyXG5cclxuICBjb25zdHJ1Y3RvcihzZXNzaW9uSWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpIHtcclxuICAgIHN1cGVyKClcclxuICAgIHRoaXMuc2Vzc2lvbklkID0gc2Vzc2lvbklkXHJcbiAgICB0aGlzLnVzZXJJZCA9IHVzZXJJZFxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0TWVzc2FnZXMoKTogUHJvbWlzZTxCYXNlTWVzc2FnZVtdPiB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnbWVzc2FnZXMnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLmVxKCdzZXNzaW9uX2lkJywgdGhpcy5zZXNzaW9uSWQpXHJcbiAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiB0cnVlIH0pXHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG1lc3NhZ2VzOicsIGVycm9yKVxyXG4gICAgICByZXR1cm4gW11cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gKGRhdGEgfHwgW10pLm1hcChtc2cgPT4ge1xyXG4gICAgICBzd2l0Y2ggKG1zZy5yb2xlKSB7XHJcbiAgICAgICAgY2FzZSAndXNlcic6XHJcbiAgICAgICAgICByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZShtc2cuY29udGVudClcclxuICAgICAgICBjYXNlICdhc3Npc3RhbnQnOlxyXG4gICAgICAgICAgcmV0dXJuIG5ldyBBSU1lc3NhZ2UobXNnLmNvbnRlbnQpXHJcbiAgICAgICAgY2FzZSAnc3lzdGVtJzpcclxuICAgICAgICAgIHJldHVybiBuZXcgU3lzdGVtTWVzc2FnZShtc2cuY29udGVudClcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2UobXNnLmNvbnRlbnQpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBhc3luYyBhZGRNZXNzYWdlKG1lc3NhZ2U6IEJhc2VNZXNzYWdlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCByb2xlID0gbWVzc2FnZS5fZ2V0VHlwZSgpID09PSAnaHVtYW4nID8gJ3VzZXInIDogXHJcbiAgICAgICAgICAgICAgICAgbWVzc2FnZS5fZ2V0VHlwZSgpID09PSAnYWknID8gJ2Fzc2lzdGFudCcgOiAnc3lzdGVtJ1xyXG4gICAgXHJcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnbWVzc2FnZXMnKVxyXG4gICAgICAuaW5zZXJ0KHtcclxuICAgICAgICBzZXNzaW9uX2lkOiB0aGlzLnNlc3Npb25JZCxcclxuICAgICAgICByb2xlLFxyXG4gICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UuY29udGVudCxcclxuICAgICAgICB0b2tlbnM6IHRoaXMuZXN0aW1hdGVUb2tlbnMobWVzc2FnZS5jb250ZW50KVxyXG4gICAgICB9KVxyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhZGRpbmcgbWVzc2FnZTonLCBlcnJvcilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGFkZFVzZXJNZXNzYWdlKG1lc3NhZ2U6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgYXdhaXQgdGhpcy5hZGRNZXNzYWdlKG5ldyBIdW1hbk1lc3NhZ2UobWVzc2FnZSkpXHJcbiAgfVxyXG5cclxuICBhc3luYyBhZGRBSU1lc3NhZ2UobWVzc2FnZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBhd2FpdCB0aGlzLmFkZE1lc3NhZ2UobmV3IEFJTWVzc2FnZShtZXNzYWdlKSlcclxuICB9XHJcblxyXG4gIGFzeW5jIGNsZWFyKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ21lc3NhZ2VzJylcclxuICAgICAgLmRlbGV0ZSgpXHJcbiAgICAgIC5lcSgnc2Vzc2lvbl9pZCcsIHRoaXMuc2Vzc2lvbklkKVxyXG5cclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjbGVhcmluZyBtZXNzYWdlczonLCBlcnJvcilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZXN0aW1hdGVUb2tlbnModGV4dDogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgIC8vIFJvdWdoIGVzdGltYXRpb246IDEgdG9rZW4g4omIIDQgY2hhcmFjdGVycyBmb3IgRW5nbGlzaCB0ZXh0XHJcbiAgICByZXR1cm4gTWF0aC5jZWlsKHRleHQubGVuZ3RoIC8gNClcclxuICB9XHJcbn1cclxuXHJcbi8vIE1lbW9yeSBmYWN0b3J5XHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDaGF0TWVtb3J5KHNlc3Npb25JZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZyk6IFN1cGFiYXNlQ2hhdE1lc3NhZ2VIaXN0b3J5IHtcclxuICByZXR1cm4gbmV3IFN1cGFiYXNlQ2hhdE1lc3NhZ2VIaXN0b3J5KHNlc3Npb25JZCwgdXNlcklkKVxyXG59XHJcblxyXG4vLyBHZXQgcmVjZW50IG1lc3NhZ2VzIGZvciBjb250ZXh0IChsYXN0IE4gbWVzc2FnZXMpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSZWNlbnRNZXNzYWdlcyhcclxuICBzZXNzaW9uSWQ6IHN0cmluZywgXHJcbiAgbGltaXQ6IG51bWJlciA9IDEwXHJcbik6IFByb21pc2U8QmFzZU1lc3NhZ2VbXT4ge1xyXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnbWVzc2FnZXMnKVxyXG4gICAgLnNlbGVjdCgnKicpXHJcbiAgICAuZXEoJ3Nlc3Npb25faWQnLCBzZXNzaW9uSWQpXHJcbiAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcclxuICAgIC5saW1pdChsaW1pdClcclxuXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyByZWNlbnQgbWVzc2FnZXM6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gW11cclxuICB9XHJcblxyXG4gIHJldHVybiAoZGF0YSB8fCBbXSkucmV2ZXJzZSgpLm1hcChtc2cgPT4ge1xyXG4gICAgc3dpdGNoIChtc2cucm9sZSkge1xyXG4gICAgICBjYXNlICd1c2VyJzpcclxuICAgICAgICByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZShtc2cuY29udGVudClcclxuICAgICAgY2FzZSAnYXNzaXN0YW50JzpcclxuICAgICAgICByZXR1cm4gbmV3IEFJTWVzc2FnZShtc2cuY29udGVudClcclxuICAgICAgY2FzZSAnc3lzdGVtJzpcclxuICAgICAgICByZXR1cm4gbmV3IFN5c3RlbU1lc3NhZ2UobXNnLmNvbnRlbnQpXHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2UobXNnLmNvbnRlbnQpXHJcbiAgICB9XHJcbiAgfSlcclxufVxyXG4iXSwibmFtZXMiOlsiQmFzZUNoYXRNZXNzYWdlSGlzdG9yeSIsIkh1bWFuTWVzc2FnZSIsIkFJTWVzc2FnZSIsIlN5c3RlbU1lc3NhZ2UiLCJzdXBhYmFzZSIsIlN1cGFiYXNlQ2hhdE1lc3NhZ2VIaXN0b3J5Iiwic2Vzc2lvbklkIiwidXNlcklkIiwiZ2V0TWVzc2FnZXMiLCJkYXRhIiwiZXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJvcmRlciIsImFzY2VuZGluZyIsImNvbnNvbGUiLCJtYXAiLCJtc2ciLCJyb2xlIiwiY29udGVudCIsImFkZE1lc3NhZ2UiLCJtZXNzYWdlIiwiX2dldFR5cGUiLCJpbnNlcnQiLCJzZXNzaW9uX2lkIiwidG9rZW5zIiwiZXN0aW1hdGVUb2tlbnMiLCJhZGRVc2VyTWVzc2FnZSIsImFkZEFJTWVzc2FnZSIsImNsZWFyIiwiZGVsZXRlIiwidGV4dCIsIk1hdGgiLCJjZWlsIiwibGVuZ3RoIiwiY3JlYXRlQ2hhdE1lbW9yeSIsImdldFJlY2VudE1lc3NhZ2VzIiwibGltaXQiLCJyZXZlcnNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/langchain-memory.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/openai.ts":
/*!***************************!*\
  !*** ./src/lib/openai.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getChatCompletion: () => (/* binding */ getChatCompletion),\n/* harmony export */   getEmbedding: () => (/* binding */ getEmbedding),\n/* harmony export */   openai: () => (/* binding */ openai)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\n// Check OpenAI configuration\nconst openaiApiKey = process.env.OPENAI_API_KEY;\nconsole.log('🔧 OpenAI Configuration:');\nconsole.log('  OPENAI_API_KEY:', openaiApiKey ? '✅ SET' : '❌ NOT SET');\nif (!openaiApiKey) {\n    console.warn('⚠️ OpenAI API key not set. Please add OPENAI_API_KEY to your .env.local file');\n}\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n    apiKey: openaiApiKey\n});\n\n// Embedding function for RAG\nasync function getEmbedding(text) {\n    const response = await openai.embeddings.create({\n        model: 'text-embedding-3-large',\n        input: text\n    });\n    return response.data[0].embedding;\n}\n// Chat completion for the chatbot\nasync function getChatCompletion(messages, temperature = 0.2) {\n    const response = await openai.chat.completions.create({\n        model: 'gpt-4o-mini',\n        messages,\n        temperature,\n        max_tokens: 1000\n    });\n    return response.choices[0].message.content || '';\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL29wZW5haS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTJCO0FBRTNCLDZCQUE2QjtBQUM3QixNQUFNQyxlQUFlQyxRQUFRQyxHQUFHLENBQUNDLGNBQWM7QUFDL0NDLFFBQVFDLEdBQUcsQ0FBQztBQUNaRCxRQUFRQyxHQUFHLENBQUMscUJBQXFCTCxlQUFlLFVBQVU7QUFFMUQsSUFBSSxDQUFDQSxjQUFjO0lBQ2pCSSxRQUFRRSxJQUFJLENBQUM7QUFDZjtBQUVBLE1BQU1DLFNBQVMsSUFBSVIsOENBQU1BLENBQUM7SUFDeEJTLFFBQVFSO0FBQ1Y7QUFFaUI7QUFFakIsNkJBQTZCO0FBQ3RCLGVBQWVTLGFBQWFDLElBQVk7SUFDN0MsTUFBTUMsV0FBVyxNQUFNSixPQUFPSyxVQUFVLENBQUNDLE1BQU0sQ0FBQztRQUM5Q0MsT0FBTztRQUNQQyxPQUFPTDtJQUNUO0lBRUEsT0FBT0MsU0FBU0ssSUFBSSxDQUFDLEVBQUUsQ0FBQ0MsU0FBUztBQUNuQztBQUVBLGtDQUFrQztBQUMzQixlQUFlQyxrQkFDcEJDLFFBQTJFLEVBQzNFQyxjQUFzQixHQUFHO0lBRXpCLE1BQU1ULFdBQVcsTUFBTUosT0FBT2MsSUFBSSxDQUFDQyxXQUFXLENBQUNULE1BQU0sQ0FBQztRQUNwREMsT0FBTztRQUNQSztRQUNBQztRQUNBRyxZQUFZO0lBQ2Q7SUFFQSxPQUFPWixTQUFTYSxPQUFPLENBQUMsRUFBRSxDQUFDQyxPQUFPLENBQUNDLE9BQU8sSUFBSTtBQUNoRCIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxzaGlsb1xcRWxlY3RpdmUgQ2hvb3NlclxcZnJvbnRlbmRcXHNyY1xcbGliXFxvcGVuYWkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE9wZW5BSSBmcm9tICdvcGVuYWknXHJcblxyXG4vLyBDaGVjayBPcGVuQUkgY29uZmlndXJhdGlvblxyXG5jb25zdCBvcGVuYWlBcGlLZXkgPSBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWVxyXG5jb25zb2xlLmxvZygn8J+UpyBPcGVuQUkgQ29uZmlndXJhdGlvbjonKVxyXG5jb25zb2xlLmxvZygnICBPUEVOQUlfQVBJX0tFWTonLCBvcGVuYWlBcGlLZXkgPyAn4pyFIFNFVCcgOiAn4p2MIE5PVCBTRVQnKVxyXG5cclxuaWYgKCFvcGVuYWlBcGlLZXkpIHtcclxuICBjb25zb2xlLndhcm4oJ+KaoO+4jyBPcGVuQUkgQVBJIGtleSBub3Qgc2V0LiBQbGVhc2UgYWRkIE9QRU5BSV9BUElfS0VZIHRvIHlvdXIgLmVudi5sb2NhbCBmaWxlJylcclxufVxyXG5cclxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XHJcbiAgYXBpS2V5OiBvcGVuYWlBcGlLZXksXHJcbn0pXHJcblxyXG5leHBvcnQgeyBvcGVuYWkgfVxyXG5cclxuLy8gRW1iZWRkaW5nIGZ1bmN0aW9uIGZvciBSQUdcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEVtYmVkZGluZyh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcltdPiB7XHJcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcGVuYWkuZW1iZWRkaW5ncy5jcmVhdGUoe1xyXG4gICAgbW9kZWw6ICd0ZXh0LWVtYmVkZGluZy0zLWxhcmdlJyxcclxuICAgIGlucHV0OiB0ZXh0LFxyXG4gIH0pXHJcbiAgXHJcbiAgcmV0dXJuIHJlc3BvbnNlLmRhdGFbMF0uZW1iZWRkaW5nXHJcbn1cclxuXHJcbi8vIENoYXQgY29tcGxldGlvbiBmb3IgdGhlIGNoYXRib3RcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENoYXRDb21wbGV0aW9uKFxyXG4gIG1lc3NhZ2VzOiBBcnJheTx7IHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnIHwgJ3N5c3RlbSc7IGNvbnRlbnQ6IHN0cmluZyB9PixcclxuICB0ZW1wZXJhdHVyZTogbnVtYmVyID0gMC4yXHJcbik6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xyXG4gICAgbW9kZWw6ICdncHQtNG8tbWluaScsXHJcbiAgICBtZXNzYWdlcyxcclxuICAgIHRlbXBlcmF0dXJlLFxyXG4gICAgbWF4X3Rva2VuczogMTAwMCxcclxuICB9KVxyXG4gIFxyXG4gIHJldHVybiByZXNwb25zZS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudCB8fCAnJ1xyXG59XHJcbiJdLCJuYW1lcyI6WyJPcGVuQUkiLCJvcGVuYWlBcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJjb25zb2xlIiwibG9nIiwid2FybiIsIm9wZW5haSIsImFwaUtleSIsImdldEVtYmVkZGluZyIsInRleHQiLCJyZXNwb25zZSIsImVtYmVkZGluZ3MiLCJjcmVhdGUiLCJtb2RlbCIsImlucHV0IiwiZGF0YSIsImVtYmVkZGluZyIsImdldENoYXRDb21wbGV0aW9uIiwibWVzc2FnZXMiLCJ0ZW1wZXJhdHVyZSIsImNoYXQiLCJjb21wbGV0aW9ucyIsIm1heF90b2tlbnMiLCJjaG9pY2VzIiwibWVzc2FnZSIsImNvbnRlbnQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/openai.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/search.ts":
/*!***************************!*\
  !*** ./src/lib/search.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateCourseScore: () => (/* binding */ calculateCourseScore),\n/* harmony export */   searchCertificates: () => (/* binding */ searchCertificates),\n/* harmony export */   searchCourses: () => (/* binding */ searchCourses),\n/* harmony export */   searchDiplomas: () => (/* binding */ searchDiplomas),\n/* harmony export */   searchElectiveDocs: () => (/* binding */ searchElectiveDocs),\n/* harmony export */   searchSpecializations: () => (/* binding */ searchSpecializations)\n/* harmony export */ });\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./supabase */ \"(rsc)/./src/lib/supabase.ts\");\n/* harmony import */ var _openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./openai */ \"(rsc)/./src/lib/openai.ts\");\n/* harmony import */ var _demo_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./demo-data */ \"(rsc)/./src/lib/demo-data.ts\");\n\n\n\n// Map program abbreviations to full names\nconst PROGRAM_ABBREVIATIONS = {\n    'ARCH': 'Architecture',\n    'AE': 'Architectural Engineering',\n    'BME': 'Biomedical Engineering',\n    'CHE': 'Chemical Engineering',\n    'CIVE': 'Civil Engineering',\n    'ECE': 'Computer Engineering',\n    'EE': 'Electrical Engineering',\n    'ENVE': 'Environmental Engineering',\n    'GEOE': 'Geological Engineering',\n    'MGT': 'Management Engineering',\n    'ME': 'Mechanical Engineering',\n    'MTE': 'Mechatronics Engineering',\n    'NANO': 'Nanotechnology Engineering',\n    'SE': 'Software Engineering',\n    'SYDE': 'Systems Design Engineering'\n};\n// Convert program abbreviation to full name\nfunction getFullProgramName(abbreviation) {\n    return PROGRAM_ABBREVIATIONS[abbreviation] || abbreviation;\n}\n// Vector similarity search for RAG\nasync function searchElectiveDocs(query, threshold = 0.5, limit = 10) {\n    const queryEmbedding = await (0,_openai__WEBPACK_IMPORTED_MODULE_1__.getEmbedding)(query);\n    const { data, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.rpc('search_elective_docs', {\n        query_embedding: queryEmbedding,\n        match_threshold: threshold,\n        match_count: limit\n    });\n    if (error) {\n        console.error('Vector search error:', error);\n        return [];\n    }\n    return data || [];\n}\n// Course search with filters\nasync function searchCourses(query, filters = {}, limit = 20) {\n    console.log('🔍 searchCourses called with:', {\n        query,\n        filters,\n        limit\n    });\n    console.log('🔍 NEW VERSION - Updated search function is running!');\n    // Check if this is a CSE elective query (only when explicitly mentioned)\n    const isCSEQuery = query.toLowerCase().includes('cse') || query.toLowerCase().includes('complementary studies');\n    if (isCSEQuery) {\n        console.log('🔍 Detected CSE query, searching courses table for CSE electives');\n        try {\n            // Search for courses that are CSE electives (typically 100-200 level non-engineering courses)\n            const { data: cseCourses, error: cseError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('courses').select('*').or('title.ilike.%ethics%,title.ilike.%society%,title.ilike.%sustainability%,title.ilike.%social%,title.ilike.%environment%').limit(limit);\n            if (!cseError && cseCourses && cseCourses.length > 0) {\n                console.log('✅ Found CSE electives:', cseCourses.length);\n                return cseCourses;\n            } else {\n                console.log('⚠️ No CSE electives found in courses table');\n            }\n        } catch (error) {\n            console.log('⚠️ CSE search failed:', error);\n        }\n    }\n    // Skip vector search for now - use text search directly\n    console.log('🔍 Skipping vector search, using text search directly');\n    // Fallback to text search\n    let supabaseQuery = _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('courses').select('*').limit(limit);\n    // Apply text search\n    if (query) {\n        // Extract key terms from the query for better matching\n        const keyTerms = query.toLowerCase().replace(/[^\\w\\s]/g, ' ') // Remove special characters including commas\n        .split(/\\s+/).filter((term)=>term.length > 2 && ![\n                'what',\n                'can',\n                'i',\n                'choose',\n                'to',\n                'do',\n                'want',\n                'the',\n                'and',\n                'or',\n                'for',\n                'with',\n                'about',\n                'from',\n                'are',\n                'is',\n                'in',\n                'on',\n                'at',\n                'by',\n                'of',\n                'a',\n                'an',\n                'havent',\n                'taken',\n                'any',\n                'give',\n                'me',\n                'please'\n            ].includes(term)).slice(0, 3) // Take top 3 key terms\n        ;\n        console.log('🔍 Extracted key terms:', keyTerms);\n        if (keyTerms.length > 0) {\n            // Build search conditions for each key term\n            const searchConditions = keyTerms.map((term)=>{\n                const cleanTerm = term.replace(/[%_]/g, '\\\\$&');\n                return `title.ilike.%${cleanTerm}%,description.ilike.%${cleanTerm}%,skills.cs.[\"${cleanTerm}\"]`;\n            }).join(',');\n            supabaseQuery = supabaseQuery.or(searchConditions);\n        } else {\n            // Fallback to searching for common elective terms\n            supabaseQuery = supabaseQuery.or(`title.ilike.%elective%,description.ilike.%elective%,title.ilike.%course%,description.ilike.%course%`);\n        }\n        // If no results found, try broader search terms\n        if (keyTerms.includes('machine') || keyTerms.includes('learning')) {\n            console.log('🔍 Adding AI/ML related search terms');\n            supabaseQuery = supabaseQuery.or(`title.ilike.%artificial%,title.ilike.%intelligence%,title.ilike.%ai%,title.ilike.%ml%,description.ilike.%artificial%,description.ilike.%intelligence%,description.ilike.%ai%,description.ilike.%ml%`);\n        }\n    }\n    // Apply filters (but don't restrict by term - use it as guidance only)\n    if (filters.term) {\n        console.log('🔍 Term filter provided but not applied - showing courses for all terms');\n    // Note: We don't filter by term to allow future course recommendations\n    }\n    if (filters.dept && filters.dept.length > 0) {\n        supabaseQuery = supabaseQuery.in('dept', filters.dept);\n    }\n    if (filters.level && filters.level.length > 0) {\n        supabaseQuery = supabaseQuery.in('level', filters.level);\n    }\n    if (filters.skills && filters.skills.length > 0) {\n        console.log('🔍 Applying skills filter:', filters.skills);\n        // Use the correct JSONB operator for array intersection\n        supabaseQuery = supabaseQuery.filter('skills', 'cs', `[\"${filters.skills.join('\",\"')}\"]`);\n    }\n    if (filters.max_workload) {\n        // Assuming workload is stored as a composite score\n        supabaseQuery = supabaseQuery.lte('workload->total', filters.max_workload);\n    }\n    console.log('🔍 Executing database query...');\n    console.log('🔍 Query details:', {\n        query,\n        filters,\n        limit\n    });\n    // First, let's test if we can query the database at all\n    const { data: testData, error: testError } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('courses').select('id, title').limit(3);\n    console.log('🔍 Database connectivity test:', {\n        testFound: testData?.length || 0,\n        testError: testError?.message || 'None',\n        sampleCourses: testData?.slice(0, 2).map((c)=>({\n                id: c.id,\n                title: c.title\n            })) || []\n    });\n    const { data, error } = await supabaseQuery;\n    if (error) {\n        console.error('❌ Course search error:', error);\n        return [];\n    }\n    console.log('📚 Database search result:', {\n        found: data?.length || 0,\n        query,\n        filters\n    });\n    if (data && data.length > 0) {\n        console.log('📚 Sample courses found:', data.slice(0, 3).map((c)=>({\n                id: c.id,\n                title: c.title\n            })));\n    }\n    // If no data found in database, fall back to demo data\n    if (!data || data.length === 0) {\n        console.log('📚 No courses found in database, using demo data');\n        const demoResults = filterDemoCourses(query, filters, limit);\n        console.log('📚 Demo data results:', demoResults.length);\n        return demoResults;\n    }\n    console.log('✅ Database search returned', data.length, 'courses');\n    return data || [];\n}\n// Extract meaningful keywords from query\nfunction extractSearchKeywords(query) {\n    // Remove common words and extract meaningful terms\n    const stopWords = [\n        'i',\n        'havent',\n        'have',\n        'taken',\n        'any',\n        'can',\n        'you',\n        'give',\n        'me',\n        'recommendations',\n        'for',\n        'please',\n        'the',\n        'a',\n        'an',\n        'and',\n        'or',\n        'but',\n        'in',\n        'on',\n        'at',\n        'to',\n        'for',\n        'of',\n        'with',\n        'by'\n    ];\n    return query.toLowerCase().replace(/[^\\w\\s]/g, ' ') // Remove special characters\n    .split(/\\s+/).filter((word)=>word.length > 2 && !stopWords.includes(word)).slice(0, 3) // Take top 3 keywords\n    ;\n}\n// Search specializations\nasync function searchSpecializations(query, program, limit = 3) {\n    let supabaseQuery = _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('specializations').select('*').limit(limit);\n    // Apply text search with extracted keywords\n    if (query) {\n        const keywords = extractSearchKeywords(query);\n        if (keywords.length > 0) {\n            const searchConditions = keywords.map((keyword)=>{\n                const cleanKeyword = keyword.replace(/[%_]/g, '\\\\$&');\n                return `name.ilike.%${cleanKeyword}%,description.ilike.%${cleanKeyword}%`;\n            }).join(',');\n            supabaseQuery = supabaseQuery.or(searchConditions);\n        }\n    }\n    // Filter by program if specified - convert abbreviation to full name\n    if (program) {\n        const fullProgramName = getFullProgramName(program);\n        console.log(`🔍 Searching specializations for program: \"${program}\" -> \"${fullProgramName}\"`);\n        supabaseQuery = supabaseQuery.eq('program', fullProgramName);\n    }\n    const { data, error } = await supabaseQuery;\n    if (error) {\n        console.error('Specialization search error:', error);\n        return [];\n    }\n    console.log(`✅ Found ${data?.length || 0} specializations for program: ${program}`);\n    return data || [];\n}\n// Search certificates\nasync function searchCertificates(query, program, limit = 3) {\n    let supabaseQuery = _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('certificates').select('*').eq('uw_engineering_listed', true) // Only show engineering-listed certificates\n    .limit(limit);\n    // Apply text search with extracted keywords\n    if (query) {\n        const keywords = extractSearchKeywords(query);\n        if (keywords.length > 0) {\n            const searchConditions = keywords.map((keyword)=>{\n                const cleanKeyword = keyword.replace(/[%_]/g, '\\\\$&');\n                return `name.ilike.%${cleanKeyword}%,description.ilike.%${cleanKeyword}%`;\n            }).join(',');\n            supabaseQuery = supabaseQuery.or(searchConditions);\n        }\n    }\n    // Note: certificates table doesn't have program column, so we skip program filtering\n    if (program) {\n        console.log(`🔍 Searching certificates (no program filter available)`);\n    }\n    const { data, error } = await supabaseQuery;\n    if (error) {\n        console.error('Certificate search error:', error);\n        return [];\n    }\n    console.log(`✅ Found ${data?.length || 0} certificates for program: ${program}`);\n    return data || [];\n}\n// Search diplomas\nasync function searchDiplomas(query, program, limit = 3) {\n    let supabaseQuery = _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from('diplomas').select('*').eq('uw_engineering_listed', true) // Only show engineering-listed diplomas\n    .limit(limit);\n    // Apply text search with extracted keywords\n    if (query) {\n        const keywords = extractSearchKeywords(query);\n        if (keywords.length > 0) {\n            const searchConditions = keywords.map((keyword)=>{\n                const cleanKeyword = keyword.replace(/[%_]/g, '\\\\$&');\n                return `name.ilike.%${cleanKeyword}%,description.ilike.%${cleanKeyword}%`;\n            }).join(',');\n            supabaseQuery = supabaseQuery.or(searchConditions);\n        }\n    }\n    // Note: diplomas table doesn't have program column, so we skip program filtering\n    if (program) {\n        console.log(`🔍 Searching diplomas (no program filter available)`);\n    }\n    const { data, error } = await supabaseQuery;\n    if (error) {\n        console.error('Diploma search error:', error);\n        return [];\n    }\n    console.log(`✅ Found ${data?.length || 0} diplomas for program: ${program}`);\n    return data || [];\n}\n// Filter demo courses based on query and filters\nfunction filterDemoCourses(query, filters = {}, limit = 20) {\n    let filteredCourses = [\n        ..._demo_data__WEBPACK_IMPORTED_MODULE_2__.demoCourses\n    ];\n    // Apply text search\n    if (query) {\n        const queryLower = query.toLowerCase();\n        // Handle common query patterns\n        const isElectiveQuery = queryLower.includes('elective') || queryLower.includes('course') || queryLower.includes('2a') || queryLower.includes('2b') || queryLower.includes('3a') || queryLower.includes('3b');\n        const isCSEQuery = queryLower.includes('cse') || queryLower.includes('complementary studies');\n        if (isCSEQuery) {\n            // For CSE queries, show courses that match CSE themes\n            filteredCourses = filteredCourses.filter((course)=>course.title.toLowerCase().includes(queryLower) || course.description.toLowerCase().includes(queryLower) || course.skills.some((skill)=>skill.toLowerCase().includes(queryLower)) || course.id.toLowerCase().includes(queryLower) || // Show courses that match CSE themes\n                course.skills.some((skill)=>[\n                        'ethics',\n                        'society',\n                        'sustainability',\n                        'social',\n                        'environment',\n                        'complementary studies'\n                    ].some((theme)=>skill.toLowerCase().includes(theme))) || course.title.toLowerCase().includes('ethics') || course.title.toLowerCase().includes('society') || course.title.toLowerCase().includes('sustainability') || course.title.toLowerCase().includes('social') || course.title.toLowerCase().includes('environment'));\n        } else if (isElectiveQuery) {\n            // For elective queries, be more permissive and show relevant courses\n            filteredCourses = filteredCourses.filter((course)=>course.title.toLowerCase().includes(queryLower) || course.description.toLowerCase().includes(queryLower) || course.skills.some((skill)=>skill.toLowerCase().includes(queryLower)) || course.id.toLowerCase().includes(queryLower) || // Show courses that match common elective themes\n                course.skills.some((skill)=>[\n                        'programming',\n                        'software',\n                        'ai',\n                        'robotics',\n                        'data',\n                        'algorithms',\n                        'systems'\n                    ].some((theme)=>skill.toLowerCase().includes(theme))));\n        } else {\n            // For specific queries, use exact matching\n            filteredCourses = filteredCourses.filter((course)=>course.title.toLowerCase().includes(queryLower) || course.description.toLowerCase().includes(queryLower) || course.skills.some((skill)=>skill.toLowerCase().includes(queryLower)) || course.id.toLowerCase().includes(queryLower));\n        }\n    }\n    // Apply filters (but don't restrict by term - use it as guidance only)\n    if (filters.term) {\n        console.log('🔍 Demo data: Term filter provided but not applied - showing courses for all terms');\n    // Note: We don't filter by term to allow future course recommendations\n    }\n    if (filters.dept && filters.dept.length > 0) {\n        filteredCourses = filteredCourses.filter((course)=>filters.dept.includes(course.dept));\n    }\n    if (filters.level && filters.level.length > 0) {\n        filteredCourses = filteredCourses.filter((course)=>filters.level.includes(course.level));\n    }\n    if (filters.skills && filters.skills.length > 0) {\n        filteredCourses = filteredCourses.filter((course)=>course.skills.some((skill)=>filters.skills.some((filterSkill)=>skill.toLowerCase().includes(filterSkill.toLowerCase()) || filterSkill.toLowerCase().includes(skill.toLowerCase()))));\n    }\n    return filteredCourses.slice(0, limit);\n}\n// Calculate course recommendation score\nfunction calculateCourseScore(course, profile, goalTags) {\n    let score = 0;\n    const explanation = [];\n    const counts_toward = [];\n    let prereqs_met = true;\n    const next_offered = [];\n    let workload_score = 5 // Default to medium workload\n    ;\n    // Goal match (0-40 points)\n    const goalMatch = calculateGoalMatch(course, goalTags);\n    score += goalMatch.score;\n    explanation.push(...goalMatch.explanations);\n    // Program fit (0-15 points)\n    const programFit = calculateProgramFit(course, profile);\n    score += programFit.score;\n    explanation.push(...programFit.explanations);\n    // Prerequisites check (0-15 points)\n    const prereqCheck = checkPrerequisites(course, profile.completed_courses);\n    score += prereqCheck.score;\n    prereqs_met = prereqCheck.met;\n    explanation.push(...prereqCheck.explanations);\n    // Term availability (0-10 points)\n    const termCheck = checkTermAvailability(course, profile.current_term);\n    score += termCheck.score;\n    next_offered.push(...termCheck.offered_terms);\n    explanation.push(...termCheck.explanations);\n    // Workload alignment (0-10 points)\n    const workloadCheck = checkWorkloadAlignment(course, profile.constraints);\n    score += workloadCheck.score;\n    workload_score = workloadCheck.score;\n    explanation.push(...workloadCheck.explanations);\n    // Level progression (0-10 points)\n    const levelCheck = checkLevelProgression(course, profile.current_term);\n    score += levelCheck.score;\n    explanation.push(...levelCheck.explanations);\n    return {\n        score: Math.round(score),\n        explanation,\n        counts_toward,\n        prereqs_met,\n        next_offered,\n        workload_score\n    };\n}\nfunction calculateGoalMatch(course, goalTags) {\n    let score = 0;\n    const explanations = [];\n    const courseSkills = course.skills.map((s)=>s.toLowerCase());\n    const goalSkills = goalTags.map((g)=>g.toLowerCase());\n    const matches = courseSkills.filter((skill)=>goalSkills.some((goal)=>skill.includes(goal) || goal.includes(skill)));\n    if (matches.length > 0) {\n        score = Math.min(40, matches.length * 10);\n        explanations.push(`Matches your goals: ${matches.join(', ')}`);\n    } else {\n        explanations.push('Limited alignment with your stated goals');\n    }\n    return {\n        score,\n        explanations\n    };\n}\nfunction calculateProgramFit(course, profile) {\n    let score = 0;\n    const explanations = [];\n    // Check if course is from same department\n    if (profile.program && course.dept === profile.program) {\n        score += 10;\n        explanations.push(`Same department as your program (${profile.program})`);\n    } else if (profile.program) {\n        score += 5;\n        explanations.push(`Cross-departmental course (${course.dept})`);\n    }\n    // Check if course level is appropriate\n    if (profile.current_term) {\n        const termLevel = getTermLevel(profile.current_term);\n        if (course.level >= termLevel) {\n            score += 5;\n            explanations.push(`Appropriate level for ${profile.current_term}`);\n        }\n    }\n    return {\n        score,\n        explanations\n    };\n}\nfunction checkPrerequisites(course, completedCourses) {\n    let score = 0;\n    const explanations = [];\n    if (!course.prereqs) {\n        score = 15;\n        explanations.push('No prerequisites required');\n        return {\n            score,\n            met: true,\n            explanations\n        };\n    }\n    // Simple prerequisite checking - in reality, this would be more sophisticated\n    const prereqList = course.prereqs.split(',').map((p)=>p.trim());\n    const metPrereqs = prereqList.filter((prereq)=>completedCourses.some((completed)=>completed.toLowerCase().includes(prereq.toLowerCase())));\n    if (metPrereqs.length === prereqList.length) {\n        score = 15;\n        explanations.push('All prerequisites met');\n    } else if (metPrereqs.length > 0) {\n        score = 8;\n        explanations.push(`Some prerequisites met (${metPrereqs.length}/${prereqList.length})`);\n    } else {\n        score = 0;\n        explanations.push(`Prerequisites not met: ${course.prereqs}`);\n    }\n    return {\n        score,\n        met: metPrereqs.length === prereqList.length,\n        explanations\n    };\n}\nfunction checkTermAvailability(course, currentTerm) {\n    let score = 0;\n    const explanations = [];\n    const offered_terms = [];\n    if (!course.terms_offered || course.terms_offered.length === 0) {\n        explanations.push('Term availability unknown');\n        return {\n            score: 5,\n            offered_terms,\n            explanations\n        };\n    }\n    offered_terms.push(...course.terms_offered);\n    if (currentTerm) {\n        const nextTerm = getNextTerm(currentTerm);\n        if (course.terms_offered.includes(nextTerm)) {\n            score = 10;\n            explanations.push(`Offered next term (${nextTerm})`);\n        } else if (course.terms_offered.length > 0) {\n            score = 5;\n            explanations.push(`Offered in: ${course.terms_offered.join(', ')}`);\n        }\n    } else {\n        score = 5;\n        explanations.push(`Offered in: ${course.terms_offered.join(', ')}`);\n    }\n    return {\n        score,\n        offered_terms,\n        explanations\n    };\n}\nfunction checkWorkloadAlignment(course, constraints) {\n    let score = 5 // Default medium\n    ;\n    const explanations = [];\n    if (!course.workload || !constraints?.max_workload) {\n        return {\n            score,\n            explanations\n        };\n    }\n    const totalWorkload = Object.values(course.workload).reduce((sum, val)=>sum + val, 0);\n    if (totalWorkload <= constraints.max_workload) {\n        score = 10;\n        explanations.push(`Workload fits your constraints (${totalWorkload}/week)`);\n    } else {\n        score = 2;\n        explanations.push(`Heavy workload (${totalWorkload}/week)`);\n    }\n    return {\n        score,\n        explanations\n    };\n}\nfunction checkLevelProgression(course, currentTerm) {\n    let score = 5 // Default\n    ;\n    const explanations = [];\n    if (!currentTerm) {\n        return {\n            score,\n            explanations\n        };\n    }\n    const termLevel = getTermLevel(currentTerm);\n    if (course.level >= termLevel && course.level <= termLevel + 100) {\n        score = 10;\n        explanations.push(`Appropriate level for ${currentTerm}`);\n    } else if (course.level < termLevel) {\n        score = 3;\n        explanations.push(`Lower level course (${course.level}xx)`);\n    } else {\n        score = 7;\n        explanations.push(`Advanced course (${course.level}xx)`);\n    }\n    return {\n        score,\n        explanations\n    };\n}\n// Helper functions\nfunction getTermLevel(term) {\n    const termMap = {\n        '1A': 100,\n        '1B': 100,\n        '2A': 200,\n        '2B': 200,\n        '3A': 300,\n        '3B': 300,\n        '4A': 400,\n        '4B': 400\n    };\n    return termMap[term] || 200;\n}\nfunction getNextTerm(currentTerm) {\n    const termMap = {\n        '1A': '1B',\n        '1B': '2A',\n        '2A': '2B',\n        '2B': '3A',\n        '3A': '3B',\n        '3B': '4A',\n        '4A': '4B',\n        '4B': '4B'\n    };\n    return termMap[currentTerm] || '2A';\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBUzBCLGFBQWFsRixJQUFZO0lBQ2hDLE1BQU1zRyxVQUFxQztRQUN6QyxNQUFNO1FBQUssTUFBTTtRQUNqQixNQUFNO1FBQUssTUFBTTtRQUNqQixNQUFNO1FBQUssTUFBTTtRQUNqQixNQUFNO1FBQUssTUFBTTtJQUNuQjtJQUNBLE9BQU9BLE9BQU8sQ0FBQ3RHLEtBQUssSUFBSTtBQUMxQjtBQUVBLFNBQVM4RixZQUFZSCxXQUFtQjtJQUN0QyxNQUFNVyxVQUFxQztRQUN6QyxNQUFNO1FBQU0sTUFBTTtRQUNsQixNQUFNO1FBQU0sTUFBTTtRQUNsQixNQUFNO1FBQU0sTUFBTTtRQUNsQixNQUFNO1FBQU0sTUFBTTtJQUNwQjtJQUNBLE9BQU9BLE9BQU8sQ0FBQ1gsWUFBWSxJQUFJO0FBQ2pDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHNoaWxvXFxFbGVjdGl2ZSBDaG9vc2VyXFxmcm9udGVuZFxcc3JjXFxsaWJcXHNlYXJjaC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJy4vc3VwYWJhc2UnXG5pbXBvcnQgeyBnZXRFbWJlZGRpbmcgfSBmcm9tICcuL29wZW5haSdcbmltcG9ydCB7IENvdXJzZSwgQ291cnNlUmVjb21tZW5kYXRpb24sIFNlYXJjaEZpbHRlcnMsIFVzZXJQcm9maWxlIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IGRlbW9Db3Vyc2VzIH0gZnJvbSAnLi9kZW1vLWRhdGEnXG5cbi8vIE1hcCBwcm9ncmFtIGFiYnJldmlhdGlvbnMgdG8gZnVsbCBuYW1lc1xuY29uc3QgUFJPR1JBTV9BQkJSRVZJQVRJT05TOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAnQVJDSCc6ICdBcmNoaXRlY3R1cmUnLFxuICAnQUUnOiAnQXJjaGl0ZWN0dXJhbCBFbmdpbmVlcmluZycsXG4gICdCTUUnOiAnQmlvbWVkaWNhbCBFbmdpbmVlcmluZycsXG4gICdDSEUnOiAnQ2hlbWljYWwgRW5naW5lZXJpbmcnLFxuICAnQ0lWRSc6ICdDaXZpbCBFbmdpbmVlcmluZycsXG4gICdFQ0UnOiAnQ29tcHV0ZXIgRW5naW5lZXJpbmcnLFxuICAnRUUnOiAnRWxlY3RyaWNhbCBFbmdpbmVlcmluZycsXG4gICdFTlZFJzogJ0Vudmlyb25tZW50YWwgRW5naW5lZXJpbmcnLFxuICAnR0VPRSc6ICdHZW9sb2dpY2FsIEVuZ2luZWVyaW5nJyxcbiAgJ01HVCc6ICdNYW5hZ2VtZW50IEVuZ2luZWVyaW5nJyxcbiAgJ01FJzogJ01lY2hhbmljYWwgRW5naW5lZXJpbmcnLFxuICAnTVRFJzogJ01lY2hhdHJvbmljcyBFbmdpbmVlcmluZycsXG4gICdOQU5PJzogJ05hbm90ZWNobm9sb2d5IEVuZ2luZWVyaW5nJyxcbiAgJ1NFJzogJ1NvZnR3YXJlIEVuZ2luZWVyaW5nJyxcbiAgJ1NZREUnOiAnU3lzdGVtcyBEZXNpZ24gRW5naW5lZXJpbmcnXG59XG5cbi8vIENvbnZlcnQgcHJvZ3JhbSBhYmJyZXZpYXRpb24gdG8gZnVsbCBuYW1lXG5mdW5jdGlvbiBnZXRGdWxsUHJvZ3JhbU5hbWUoYWJicmV2aWF0aW9uOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gUFJPR1JBTV9BQkJSRVZJQVRJT05TW2FiYnJldmlhdGlvbl0gfHwgYWJicmV2aWF0aW9uXG59XG5cbi8vIFZlY3RvciBzaW1pbGFyaXR5IHNlYXJjaCBmb3IgUkFHXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VhcmNoRWxlY3RpdmVEb2NzKFxuICBxdWVyeTogc3RyaW5nLFxuICB0aHJlc2hvbGQ6IG51bWJlciA9IDAuNSxcbiAgbGltaXQ6IG51bWJlciA9IDEwXG4pOiBQcm9taXNlPEFycmF5PHsgdGV4dDogc3RyaW5nOyBzb3VyY2VfdXJsOiBzdHJpbmc7IHNpbWlsYXJpdHk6IG51bWJlciB9Pj4ge1xuICBjb25zdCBxdWVyeUVtYmVkZGluZyA9IGF3YWl0IGdldEVtYmVkZGluZyhxdWVyeSlcbiAgXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnJwYygnc2VhcmNoX2VsZWN0aXZlX2RvY3MnLCB7XG4gICAgcXVlcnlfZW1iZWRkaW5nOiBxdWVyeUVtYmVkZGluZyxcbiAgICBtYXRjaF90aHJlc2hvbGQ6IHRocmVzaG9sZCxcbiAgICBtYXRjaF9jb3VudDogbGltaXRcbiAgfSlcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1ZlY3RvciBzZWFyY2ggZXJyb3I6JywgZXJyb3IpXG4gICAgcmV0dXJuIFtdXG4gIH1cbiAgXG4gIHJldHVybiBkYXRhIHx8IFtdXG59XG5cbi8vIENvdXJzZSBzZWFyY2ggd2l0aCBmaWx0ZXJzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VhcmNoQ291cnNlcyhcbiAgcXVlcnk6IHN0cmluZyxcbiAgZmlsdGVyczogU2VhcmNoRmlsdGVycyA9IHt9LFxuICBsaW1pdDogbnVtYmVyID0gMjBcbik6IFByb21pc2U8Q291cnNlW10+IHtcbiAgY29uc29sZS5sb2coJ/CflI0gc2VhcmNoQ291cnNlcyBjYWxsZWQgd2l0aDonLCB7IHF1ZXJ5LCBmaWx0ZXJzLCBsaW1pdCB9KVxuICBjb25zb2xlLmxvZygn8J+UjSBORVcgVkVSU0lPTiAtIFVwZGF0ZWQgc2VhcmNoIGZ1bmN0aW9uIGlzIHJ1bm5pbmchJylcbiAgXG4gICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBDU0UgZWxlY3RpdmUgcXVlcnkgKG9ubHkgd2hlbiBleHBsaWNpdGx5IG1lbnRpb25lZClcbiAgICAgICAgY29uc3QgaXNDU0VRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2NzZScpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnY29tcGxlbWVudGFyeSBzdHVkaWVzJylcbiAgXG4gIGlmIChpc0NTRVF1ZXJ5KSB7XG4gICAgY29uc29sZS5sb2coJ/CflI0gRGV0ZWN0ZWQgQ1NFIHF1ZXJ5LCBzZWFyY2hpbmcgY291cnNlcyB0YWJsZSBmb3IgQ1NFIGVsZWN0aXZlcycpXG4gICAgdHJ5IHtcbiAgICAgIC8vIFNlYXJjaCBmb3IgY291cnNlcyB0aGF0IGFyZSBDU0UgZWxlY3RpdmVzICh0eXBpY2FsbHkgMTAwLTIwMCBsZXZlbCBub24tZW5naW5lZXJpbmcgY291cnNlcylcbiAgICAgIGNvbnN0IHsgZGF0YTogY3NlQ291cnNlcywgZXJyb3I6IGNzZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnY291cnNlcycpXG4gICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAub3IoJ3RpdGxlLmlsaWtlLiVldGhpY3MlLHRpdGxlLmlsaWtlLiVzb2NpZXR5JSx0aXRsZS5pbGlrZS4lc3VzdGFpbmFiaWxpdHklLHRpdGxlLmlsaWtlLiVzb2NpYWwlLHRpdGxlLmlsaWtlLiVlbnZpcm9ubWVudCUnKVxuICAgICAgICAubGltaXQobGltaXQpXG4gICAgICBcbiAgICAgIGlmICghY3NlRXJyb3IgJiYgY3NlQ291cnNlcyAmJiBjc2VDb3Vyc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBGb3VuZCBDU0UgZWxlY3RpdmVzOicsIGNzZUNvdXJzZXMubGVuZ3RoKVxuICAgICAgICByZXR1cm4gY3NlQ291cnNlc1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBObyBDU0UgZWxlY3RpdmVzIGZvdW5kIGluIGNvdXJzZXMgdGFibGUnKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygn4pqg77iPIENTRSBzZWFyY2ggZmFpbGVkOicsIGVycm9yKVxuICAgIH1cbiAgfVxuICBcbiAgLy8gU2tpcCB2ZWN0b3Igc2VhcmNoIGZvciBub3cgLSB1c2UgdGV4dCBzZWFyY2ggZGlyZWN0bHlcbiAgY29uc29sZS5sb2coJ/CflI0gU2tpcHBpbmcgdmVjdG9yIHNlYXJjaCwgdXNpbmcgdGV4dCBzZWFyY2ggZGlyZWN0bHknKVxuICBcbiAgLy8gRmFsbGJhY2sgdG8gdGV4dCBzZWFyY2hcbiAgbGV0IHN1cGFiYXNlUXVlcnkgPSBzdXBhYmFzZVxuICAgIC5mcm9tKCdjb3Vyc2VzJylcbiAgICAuc2VsZWN0KCcqJylcbiAgICAubGltaXQobGltaXQpXG4gIFxuICAvLyBBcHBseSB0ZXh0IHNlYXJjaFxuICBpZiAocXVlcnkpIHtcbiAgICAvLyBFeHRyYWN0IGtleSB0ZXJtcyBmcm9tIHRoZSBxdWVyeSBmb3IgYmV0dGVyIG1hdGNoaW5nXG4gICAgY29uc3Qga2V5VGVybXMgPSBxdWVyeVxuICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgIC5yZXBsYWNlKC9bXlxcd1xcc10vZywgJyAnKSAvLyBSZW1vdmUgc3BlY2lhbCBjaGFyYWN0ZXJzIGluY2x1ZGluZyBjb21tYXNcbiAgICAgIC5zcGxpdCgvXFxzKy8pXG4gICAgICAuZmlsdGVyKHRlcm0gPT4gXG4gICAgICAgIHRlcm0ubGVuZ3RoID4gMiAmJiBcbiAgICAgICAgIVsnd2hhdCcsICdjYW4nLCAnaScsICdjaG9vc2UnLCAndG8nLCAnZG8nLCAnd2FudCcsICd0aGUnLCAnYW5kJywgJ29yJywgJ2ZvcicsICd3aXRoJywgJ2Fib3V0JywgJ2Zyb20nLCAnYXJlJywgJ2lzJywgJ2luJywgJ29uJywgJ2F0JywgJ2J5JywgJ29mJywgJ2EnLCAnYW4nLCAnaGF2ZW50JywgJ3Rha2VuJywgJ2FueScsICdnaXZlJywgJ21lJywgJ3BsZWFzZSddLmluY2x1ZGVzKHRlcm0pXG4gICAgICApXG4gICAgICAuc2xpY2UoMCwgMykgLy8gVGFrZSB0b3AgMyBrZXkgdGVybXNcbiAgICBcbiAgICBjb25zb2xlLmxvZygn8J+UjSBFeHRyYWN0ZWQga2V5IHRlcm1zOicsIGtleVRlcm1zKVxuICAgIFxuICAgIGlmIChrZXlUZXJtcy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBCdWlsZCBzZWFyY2ggY29uZGl0aW9ucyBmb3IgZWFjaCBrZXkgdGVybVxuICAgICAgY29uc3Qgc2VhcmNoQ29uZGl0aW9ucyA9IGtleVRlcm1zLm1hcCh0ZXJtID0+IHtcbiAgICAgICAgY29uc3QgY2xlYW5UZXJtID0gdGVybS5yZXBsYWNlKC9bJV9dL2csICdcXFxcJCYnKVxuICAgICAgICByZXR1cm4gYHRpdGxlLmlsaWtlLiUke2NsZWFuVGVybX0lLGRlc2NyaXB0aW9uLmlsaWtlLiUke2NsZWFuVGVybX0lLHNraWxscy5jcy5bXCIke2NsZWFuVGVybX1cIl1gXG4gICAgICB9KS5qb2luKCcsJylcbiAgICAgIFxuICAgICAgc3VwYWJhc2VRdWVyeSA9IHN1cGFiYXNlUXVlcnkub3Ioc2VhcmNoQ29uZGl0aW9ucylcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRmFsbGJhY2sgdG8gc2VhcmNoaW5nIGZvciBjb21tb24gZWxlY3RpdmUgdGVybXNcbiAgICAgIHN1cGFiYXNlUXVlcnkgPSBzdXBhYmFzZVF1ZXJ5Lm9yKFxuICAgICAgICBgdGl0bGUuaWxpa2UuJWVsZWN0aXZlJSxkZXNjcmlwdGlvbi5pbGlrZS4lZWxlY3RpdmUlLHRpdGxlLmlsaWtlLiVjb3Vyc2UlLGRlc2NyaXB0aW9uLmlsaWtlLiVjb3Vyc2UlYFxuICAgICAgKVxuICAgIH1cbiAgICBcbiAgICAvLyBJZiBubyByZXN1bHRzIGZvdW5kLCB0cnkgYnJvYWRlciBzZWFyY2ggdGVybXNcbiAgICBpZiAoa2V5VGVybXMuaW5jbHVkZXMoJ21hY2hpbmUnKSB8fCBrZXlUZXJtcy5pbmNsdWRlcygnbGVhcm5pbmcnKSkge1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gQWRkaW5nIEFJL01MIHJlbGF0ZWQgc2VhcmNoIHRlcm1zJylcbiAgICAgIHN1cGFiYXNlUXVlcnkgPSBzdXBhYmFzZVF1ZXJ5Lm9yKFxuICAgICAgICBgdGl0bGUuaWxpa2UuJWFydGlmaWNpYWwlLHRpdGxlLmlsaWtlLiVpbnRlbGxpZ2VuY2UlLHRpdGxlLmlsaWtlLiVhaSUsdGl0bGUuaWxpa2UuJW1sJSxkZXNjcmlwdGlvbi5pbGlrZS4lYXJ0aWZpY2lhbCUsZGVzY3JpcHRpb24uaWxpa2UuJWludGVsbGlnZW5jZSUsZGVzY3JpcHRpb24uaWxpa2UuJWFpJSxkZXNjcmlwdGlvbi5pbGlrZS4lbWwlYFxuICAgICAgKVxuICAgIH1cbiAgfVxuICBcbiAgLy8gQXBwbHkgZmlsdGVycyAoYnV0IGRvbid0IHJlc3RyaWN0IGJ5IHRlcm0gLSB1c2UgaXQgYXMgZ3VpZGFuY2Ugb25seSlcbiAgaWYgKGZpbHRlcnMudGVybSkge1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIFRlcm0gZmlsdGVyIHByb3ZpZGVkIGJ1dCBub3QgYXBwbGllZCAtIHNob3dpbmcgY291cnNlcyBmb3IgYWxsIHRlcm1zJylcbiAgICAvLyBOb3RlOiBXZSBkb24ndCBmaWx0ZXIgYnkgdGVybSB0byBhbGxvdyBmdXR1cmUgY291cnNlIHJlY29tbWVuZGF0aW9uc1xuICB9XG4gIFxuICBpZiAoZmlsdGVycy5kZXB0ICYmIGZpbHRlcnMuZGVwdC5sZW5ndGggPiAwKSB7XG4gICAgc3VwYWJhc2VRdWVyeSA9IHN1cGFiYXNlUXVlcnkuaW4oJ2RlcHQnLCBmaWx0ZXJzLmRlcHQpXG4gIH1cbiAgXG4gIGlmIChmaWx0ZXJzLmxldmVsICYmIGZpbHRlcnMubGV2ZWwubGVuZ3RoID4gMCkge1xuICAgIHN1cGFiYXNlUXVlcnkgPSBzdXBhYmFzZVF1ZXJ5LmluKCdsZXZlbCcsIGZpbHRlcnMubGV2ZWwpXG4gIH1cbiAgXG4gIGlmIChmaWx0ZXJzLnNraWxscyAmJiBmaWx0ZXJzLnNraWxscy5sZW5ndGggPiAwKSB7XG4gICAgY29uc29sZS5sb2coJ/CflI0gQXBwbHlpbmcgc2tpbGxzIGZpbHRlcjonLCBmaWx0ZXJzLnNraWxscylcbiAgICAvLyBVc2UgdGhlIGNvcnJlY3QgSlNPTkIgb3BlcmF0b3IgZm9yIGFycmF5IGludGVyc2VjdGlvblxuICAgIHN1cGFiYXNlUXVlcnkgPSBzdXBhYmFzZVF1ZXJ5LmZpbHRlcignc2tpbGxzJywgJ2NzJywgYFtcIiR7ZmlsdGVycy5za2lsbHMuam9pbignXCIsXCInKX1cIl1gKVxuICB9XG4gIFxuICBpZiAoZmlsdGVycy5tYXhfd29ya2xvYWQpIHtcbiAgICAvLyBBc3N1bWluZyB3b3JrbG9hZCBpcyBzdG9yZWQgYXMgYSBjb21wb3NpdGUgc2NvcmVcbiAgICBzdXBhYmFzZVF1ZXJ5ID0gc3VwYWJhc2VRdWVyeS5sdGUoJ3dvcmtsb2FkLT50b3RhbCcsIGZpbHRlcnMubWF4X3dvcmtsb2FkKVxuICB9XG4gIFxuICBjb25zb2xlLmxvZygn8J+UjSBFeGVjdXRpbmcgZGF0YWJhc2UgcXVlcnkuLi4nKVxuICBjb25zb2xlLmxvZygn8J+UjSBRdWVyeSBkZXRhaWxzOicsIHsgcXVlcnksIGZpbHRlcnMsIGxpbWl0IH0pXG4gIFxuICAvLyBGaXJzdCwgbGV0J3MgdGVzdCBpZiB3ZSBjYW4gcXVlcnkgdGhlIGRhdGFiYXNlIGF0IGFsbFxuICBjb25zdCB7IGRhdGE6IHRlc3REYXRhLCBlcnJvcjogdGVzdEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdjb3Vyc2VzJylcbiAgICAuc2VsZWN0KCdpZCwgdGl0bGUnKVxuICAgIC5saW1pdCgzKVxuICBcbiAgY29uc29sZS5sb2coJ/CflI0gRGF0YWJhc2UgY29ubmVjdGl2aXR5IHRlc3Q6JywgeyBcbiAgICB0ZXN0Rm91bmQ6IHRlc3REYXRhPy5sZW5ndGggfHwgMCwgXG4gICAgdGVzdEVycm9yOiB0ZXN0RXJyb3I/Lm1lc3NhZ2UgfHwgJ05vbmUnLFxuICAgIHNhbXBsZUNvdXJzZXM6IHRlc3REYXRhPy5zbGljZSgwLCAyKS5tYXAoYyA9PiAoeyBpZDogYy5pZCwgdGl0bGU6IGMudGl0bGUgfSkpIHx8IFtdXG4gIH0pXG4gIFxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVF1ZXJ5XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgQ291cnNlIHNlYXJjaCBlcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gW11cbiAgfVxuICBcbiAgY29uc29sZS5sb2coJ/Cfk5ogRGF0YWJhc2Ugc2VhcmNoIHJlc3VsdDonLCB7IGZvdW5kOiBkYXRhPy5sZW5ndGggfHwgMCwgcXVlcnksIGZpbHRlcnMgfSlcbiAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgY29uc29sZS5sb2coJ/Cfk5ogU2FtcGxlIGNvdXJzZXMgZm91bmQ6JywgZGF0YS5zbGljZSgwLCAzKS5tYXAoYyA9PiAoeyBpZDogYy5pZCwgdGl0bGU6IGMudGl0bGUgfSkpKVxuICB9XG4gIFxuICAvLyBJZiBubyBkYXRhIGZvdW5kIGluIGRhdGFiYXNlLCBmYWxsIGJhY2sgdG8gZGVtbyBkYXRhXG4gIGlmICghZGF0YSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgIGNvbnNvbGUubG9nKCfwn5OaIE5vIGNvdXJzZXMgZm91bmQgaW4gZGF0YWJhc2UsIHVzaW5nIGRlbW8gZGF0YScpXG4gICAgY29uc3QgZGVtb1Jlc3VsdHMgPSBmaWx0ZXJEZW1vQ291cnNlcyhxdWVyeSwgZmlsdGVycywgbGltaXQpXG4gICAgY29uc29sZS5sb2coJ/Cfk5ogRGVtbyBkYXRhIHJlc3VsdHM6JywgZGVtb1Jlc3VsdHMubGVuZ3RoKVxuICAgIHJldHVybiBkZW1vUmVzdWx0c1xuICB9XG4gIFxuICBjb25zb2xlLmxvZygn4pyFIERhdGFiYXNlIHNlYXJjaCByZXR1cm5lZCcsIGRhdGEubGVuZ3RoLCAnY291cnNlcycpXG4gIHJldHVybiBkYXRhIHx8IFtdXG59XG5cbi8vIEV4dHJhY3QgbWVhbmluZ2Z1bCBrZXl3b3JkcyBmcm9tIHF1ZXJ5XG5mdW5jdGlvbiBleHRyYWN0U2VhcmNoS2V5d29yZHMocXVlcnk6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgLy8gUmVtb3ZlIGNvbW1vbiB3b3JkcyBhbmQgZXh0cmFjdCBtZWFuaW5nZnVsIHRlcm1zXG4gIGNvbnN0IHN0b3BXb3JkcyA9IFsnaScsICdoYXZlbnQnLCAnaGF2ZScsICd0YWtlbicsICdhbnknLCAnY2FuJywgJ3lvdScsICdnaXZlJywgJ21lJywgJ3JlY29tbWVuZGF0aW9ucycsICdmb3InLCAncGxlYXNlJywgJ3RoZScsICdhJywgJ2FuJywgJ2FuZCcsICdvcicsICdidXQnLCAnaW4nLCAnb24nLCAnYXQnLCAndG8nLCAnZm9yJywgJ29mJywgJ3dpdGgnLCAnYnknXVxuICBcbiAgcmV0dXJuIHF1ZXJ5XG4gICAgLnRvTG93ZXJDYXNlKClcbiAgICAucmVwbGFjZSgvW15cXHdcXHNdL2csICcgJykgLy8gUmVtb3ZlIHNwZWNpYWwgY2hhcmFjdGVyc1xuICAgIC5zcGxpdCgvXFxzKy8pXG4gICAgLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMiAmJiAhc3RvcFdvcmRzLmluY2x1ZGVzKHdvcmQpKVxuICAgIC5zbGljZSgwLCAzKSAvLyBUYWtlIHRvcCAzIGtleXdvcmRzXG59XG5cbi8vIFNlYXJjaCBzcGVjaWFsaXphdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hTcGVjaWFsaXphdGlvbnMoXG4gIHF1ZXJ5OiBzdHJpbmcsXG4gIHByb2dyYW0/OiBzdHJpbmcsXG4gIGxpbWl0OiBudW1iZXIgPSAzXG4pOiBQcm9taXNlPGFueVtdPiB7XG4gIGxldCBzdXBhYmFzZVF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAuZnJvbSgnc3BlY2lhbGl6YXRpb25zJylcbiAgICAuc2VsZWN0KCcqJylcbiAgICAubGltaXQobGltaXQpXG4gIFxuICAvLyBBcHBseSB0ZXh0IHNlYXJjaCB3aXRoIGV4dHJhY3RlZCBrZXl3b3Jkc1xuICBpZiAocXVlcnkpIHtcbiAgICBjb25zdCBrZXl3b3JkcyA9IGV4dHJhY3RTZWFyY2hLZXl3b3JkcyhxdWVyeSlcbiAgICBpZiAoa2V5d29yZHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3Qgc2VhcmNoQ29uZGl0aW9ucyA9IGtleXdvcmRzLm1hcChrZXl3b3JkID0+IHtcbiAgICAgICAgY29uc3QgY2xlYW5LZXl3b3JkID0ga2V5d29yZC5yZXBsYWNlKC9bJV9dL2csICdcXFxcJCYnKVxuICAgICAgICByZXR1cm4gYG5hbWUuaWxpa2UuJSR7Y2xlYW5LZXl3b3JkfSUsZGVzY3JpcHRpb24uaWxpa2UuJSR7Y2xlYW5LZXl3b3JkfSVgXG4gICAgICB9KS5qb2luKCcsJylcbiAgICAgIHN1cGFiYXNlUXVlcnkgPSBzdXBhYmFzZVF1ZXJ5Lm9yKHNlYXJjaENvbmRpdGlvbnMpXG4gICAgfVxuICB9XG4gIFxuICAvLyBGaWx0ZXIgYnkgcHJvZ3JhbSBpZiBzcGVjaWZpZWQgLSBjb252ZXJ0IGFiYnJldmlhdGlvbiB0byBmdWxsIG5hbWVcbiAgaWYgKHByb2dyYW0pIHtcbiAgICBjb25zdCBmdWxsUHJvZ3JhbU5hbWUgPSBnZXRGdWxsUHJvZ3JhbU5hbWUocHJvZ3JhbSlcbiAgICBjb25zb2xlLmxvZyhg8J+UjSBTZWFyY2hpbmcgc3BlY2lhbGl6YXRpb25zIGZvciBwcm9ncmFtOiBcIiR7cHJvZ3JhbX1cIiAtPiBcIiR7ZnVsbFByb2dyYW1OYW1lfVwiYClcbiAgICBzdXBhYmFzZVF1ZXJ5ID0gc3VwYWJhc2VRdWVyeS5lcSgncHJvZ3JhbScsIGZ1bGxQcm9ncmFtTmFtZSlcbiAgfVxuICBcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VRdWVyeVxuICBcbiAgaWYgKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3BlY2lhbGl6YXRpb24gc2VhcmNoIGVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiBbXVxuICB9XG4gIFxuICBjb25zb2xlLmxvZyhg4pyFIEZvdW5kICR7ZGF0YT8ubGVuZ3RoIHx8IDB9IHNwZWNpYWxpemF0aW9ucyBmb3IgcHJvZ3JhbTogJHtwcm9ncmFtfWApXG4gIHJldHVybiBkYXRhIHx8IFtdXG59XG5cbi8vIFNlYXJjaCBjZXJ0aWZpY2F0ZXNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hDZXJ0aWZpY2F0ZXMoXG4gIHF1ZXJ5OiBzdHJpbmcsXG4gIHByb2dyYW0/OiBzdHJpbmcsXG4gIGxpbWl0OiBudW1iZXIgPSAzXG4pOiBQcm9taXNlPGFueVtdPiB7XG4gIGxldCBzdXBhYmFzZVF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAuZnJvbSgnY2VydGlmaWNhdGVzJylcbiAgICAuc2VsZWN0KCcqJylcbiAgICAuZXEoJ3V3X2VuZ2luZWVyaW5nX2xpc3RlZCcsIHRydWUpIC8vIE9ubHkgc2hvdyBlbmdpbmVlcmluZy1saXN0ZWQgY2VydGlmaWNhdGVzXG4gICAgLmxpbWl0KGxpbWl0KVxuICBcbiAgLy8gQXBwbHkgdGV4dCBzZWFyY2ggd2l0aCBleHRyYWN0ZWQga2V5d29yZHNcbiAgaWYgKHF1ZXJ5KSB7XG4gICAgY29uc3Qga2V5d29yZHMgPSBleHRyYWN0U2VhcmNoS2V5d29yZHMocXVlcnkpXG4gICAgaWYgKGtleXdvcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHNlYXJjaENvbmRpdGlvbnMgPSBrZXl3b3Jkcy5tYXAoa2V5d29yZCA9PiB7XG4gICAgICAgIGNvbnN0IGNsZWFuS2V5d29yZCA9IGtleXdvcmQucmVwbGFjZSgvWyVfXS9nLCAnXFxcXCQmJylcbiAgICAgICAgcmV0dXJuIGBuYW1lLmlsaWtlLiUke2NsZWFuS2V5d29yZH0lLGRlc2NyaXB0aW9uLmlsaWtlLiUke2NsZWFuS2V5d29yZH0lYFxuICAgICAgfSkuam9pbignLCcpXG4gICAgICBzdXBhYmFzZVF1ZXJ5ID0gc3VwYWJhc2VRdWVyeS5vcihzZWFyY2hDb25kaXRpb25zKVxuICAgIH1cbiAgfVxuICBcbiAgLy8gTm90ZTogY2VydGlmaWNhdGVzIHRhYmxlIGRvZXNuJ3QgaGF2ZSBwcm9ncmFtIGNvbHVtbiwgc28gd2Ugc2tpcCBwcm9ncmFtIGZpbHRlcmluZ1xuICBpZiAocHJvZ3JhbSkge1xuICAgIGNvbnNvbGUubG9nKGDwn5SNIFNlYXJjaGluZyBjZXJ0aWZpY2F0ZXMgKG5vIHByb2dyYW0gZmlsdGVyIGF2YWlsYWJsZSlgKVxuICB9XG4gIFxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVF1ZXJ5XG4gIFxuICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdDZXJ0aWZpY2F0ZSBzZWFyY2ggZXJyb3I6JywgZXJyb3IpXG4gICAgcmV0dXJuIFtdXG4gIH1cbiAgXG4gIGNvbnNvbGUubG9nKGDinIUgRm91bmQgJHtkYXRhPy5sZW5ndGggfHwgMH0gY2VydGlmaWNhdGVzIGZvciBwcm9ncmFtOiAke3Byb2dyYW19YClcbiAgcmV0dXJuIGRhdGEgfHwgW11cbn1cblxuLy8gU2VhcmNoIGRpcGxvbWFzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VhcmNoRGlwbG9tYXMoXG4gIHF1ZXJ5OiBzdHJpbmcsXG4gIHByb2dyYW0/OiBzdHJpbmcsXG4gIGxpbWl0OiBudW1iZXIgPSAzXG4pOiBQcm9taXNlPGFueVtdPiB7XG4gIGxldCBzdXBhYmFzZVF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAuZnJvbSgnZGlwbG9tYXMnKVxuICAgIC5zZWxlY3QoJyonKVxuICAgIC5lcSgndXdfZW5naW5lZXJpbmdfbGlzdGVkJywgdHJ1ZSkgLy8gT25seSBzaG93IGVuZ2luZWVyaW5nLWxpc3RlZCBkaXBsb21hc1xuICAgIC5saW1pdChsaW1pdClcbiAgXG4gIC8vIEFwcGx5IHRleHQgc2VhcmNoIHdpdGggZXh0cmFjdGVkIGtleXdvcmRzXG4gIGlmIChxdWVyeSkge1xuICAgIGNvbnN0IGtleXdvcmRzID0gZXh0cmFjdFNlYXJjaEtleXdvcmRzKHF1ZXJ5KVxuICAgIGlmIChrZXl3b3Jkcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBzZWFyY2hDb25kaXRpb25zID0ga2V5d29yZHMubWFwKGtleXdvcmQgPT4ge1xuICAgICAgICBjb25zdCBjbGVhbktleXdvcmQgPSBrZXl3b3JkLnJlcGxhY2UoL1slX10vZywgJ1xcXFwkJicpXG4gICAgICAgIHJldHVybiBgbmFtZS5pbGlrZS4lJHtjbGVhbktleXdvcmR9JSxkZXNjcmlwdGlvbi5pbGlrZS4lJHtjbGVhbktleXdvcmR9JWBcbiAgICAgIH0pLmpvaW4oJywnKVxuICAgICAgc3VwYWJhc2VRdWVyeSA9IHN1cGFiYXNlUXVlcnkub3Ioc2VhcmNoQ29uZGl0aW9ucylcbiAgICB9XG4gIH1cbiAgXG4gIC8vIE5vdGU6IGRpcGxvbWFzIHRhYmxlIGRvZXNuJ3QgaGF2ZSBwcm9ncmFtIGNvbHVtbiwgc28gd2Ugc2tpcCBwcm9ncmFtIGZpbHRlcmluZ1xuICBpZiAocHJvZ3JhbSkge1xuICAgIGNvbnNvbGUubG9nKGDwn5SNIFNlYXJjaGluZyBkaXBsb21hcyAobm8gcHJvZ3JhbSBmaWx0ZXIgYXZhaWxhYmxlKWApXG4gIH1cbiAgXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlUXVlcnlcbiAgXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0RpcGxvbWEgc2VhcmNoIGVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiBbXVxuICB9XG4gIFxuICBjb25zb2xlLmxvZyhg4pyFIEZvdW5kICR7ZGF0YT8ubGVuZ3RoIHx8IDB9IGRpcGxvbWFzIGZvciBwcm9ncmFtOiAke3Byb2dyYW19YClcbiAgcmV0dXJuIGRhdGEgfHwgW11cbn1cblxuLy8gRmlsdGVyIGRlbW8gY291cnNlcyBiYXNlZCBvbiBxdWVyeSBhbmQgZmlsdGVyc1xuZnVuY3Rpb24gZmlsdGVyRGVtb0NvdXJzZXMoXG4gIHF1ZXJ5OiBzdHJpbmcsXG4gIGZpbHRlcnM6IFNlYXJjaEZpbHRlcnMgPSB7fSxcbiAgbGltaXQ6IG51bWJlciA9IDIwXG4pOiBDb3Vyc2VbXSB7XG4gIGxldCBmaWx0ZXJlZENvdXJzZXMgPSBbLi4uZGVtb0NvdXJzZXNdXG4gIFxuICAvLyBBcHBseSB0ZXh0IHNlYXJjaFxuICBpZiAocXVlcnkpIHtcbiAgICBjb25zdCBxdWVyeUxvd2VyID0gcXVlcnkudG9Mb3dlckNhc2UoKVxuICAgIFxuICAgIC8vIEhhbmRsZSBjb21tb24gcXVlcnkgcGF0dGVybnNcbiAgICBjb25zdCBpc0VsZWN0aXZlUXVlcnkgPSBxdWVyeUxvd2VyLmluY2x1ZGVzKCdlbGVjdGl2ZScpIHx8IHF1ZXJ5TG93ZXIuaW5jbHVkZXMoJ2NvdXJzZScpIHx8IHF1ZXJ5TG93ZXIuaW5jbHVkZXMoJzJhJykgfHwgcXVlcnlMb3dlci5pbmNsdWRlcygnMmInKSB8fCBxdWVyeUxvd2VyLmluY2x1ZGVzKCczYScpIHx8IHF1ZXJ5TG93ZXIuaW5jbHVkZXMoJzNiJylcbiAgICBjb25zdCBpc0NTRVF1ZXJ5ID0gcXVlcnlMb3dlci5pbmNsdWRlcygnY3NlJykgfHwgcXVlcnlMb3dlci5pbmNsdWRlcygnY29tcGxlbWVudGFyeSBzdHVkaWVzJylcbiAgICBcbiAgICBpZiAoaXNDU0VRdWVyeSkge1xuICAgICAgLy8gRm9yIENTRSBxdWVyaWVzLCBzaG93IGNvdXJzZXMgdGhhdCBtYXRjaCBDU0UgdGhlbWVzXG4gICAgICBmaWx0ZXJlZENvdXJzZXMgPSBmaWx0ZXJlZENvdXJzZXMuZmlsdGVyKGNvdXJzZSA9PiBcbiAgICAgICAgY291cnNlLnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnlMb3dlcikgfHxcbiAgICAgICAgY291cnNlLmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnlMb3dlcikgfHxcbiAgICAgICAgY291cnNlLnNraWxscy5zb21lKHNraWxsID0+IHNraWxsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnlMb3dlcikpIHx8XG4gICAgICAgIGNvdXJzZS5pZC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5TG93ZXIpIHx8XG4gICAgICAgIC8vIFNob3cgY291cnNlcyB0aGF0IG1hdGNoIENTRSB0aGVtZXNcbiAgICAgICAgY291cnNlLnNraWxscy5zb21lKHNraWxsID0+IFxuICAgICAgICAgIFsnZXRoaWNzJywgJ3NvY2lldHknLCAnc3VzdGFpbmFiaWxpdHknLCAnc29jaWFsJywgJ2Vudmlyb25tZW50JywgJ2NvbXBsZW1lbnRhcnkgc3R1ZGllcyddLnNvbWUodGhlbWUgPT4gXG4gICAgICAgICAgICBza2lsbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRoZW1lKVxuICAgICAgICAgIClcbiAgICAgICAgKSB8fFxuICAgICAgICBjb3Vyc2UudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZXRoaWNzJykgfHxcbiAgICAgICAgY291cnNlLnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3NvY2lldHknKSB8fFxuICAgICAgICBjb3Vyc2UudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc3VzdGFpbmFiaWxpdHknKSB8fFxuICAgICAgICBjb3Vyc2UudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc29jaWFsJykgfHxcbiAgICAgICAgY291cnNlLnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2Vudmlyb25tZW50JylcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGlzRWxlY3RpdmVRdWVyeSkge1xuICAgICAgLy8gRm9yIGVsZWN0aXZlIHF1ZXJpZXMsIGJlIG1vcmUgcGVybWlzc2l2ZSBhbmQgc2hvdyByZWxldmFudCBjb3Vyc2VzXG4gICAgICBmaWx0ZXJlZENvdXJzZXMgPSBmaWx0ZXJlZENvdXJzZXMuZmlsdGVyKGNvdXJzZSA9PiBcbiAgICAgICAgY291cnNlLnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnlMb3dlcikgfHxcbiAgICAgICAgY291cnNlLmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnlMb3dlcikgfHxcbiAgICAgICAgY291cnNlLnNraWxscy5zb21lKHNraWxsID0+IHNraWxsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnlMb3dlcikpIHx8XG4gICAgICAgIGNvdXJzZS5pZC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5TG93ZXIpIHx8XG4gICAgICAgIC8vIFNob3cgY291cnNlcyB0aGF0IG1hdGNoIGNvbW1vbiBlbGVjdGl2ZSB0aGVtZXNcbiAgICAgICAgY291cnNlLnNraWxscy5zb21lKHNraWxsID0+IFxuICAgICAgICAgIFsncHJvZ3JhbW1pbmcnLCAnc29mdHdhcmUnLCAnYWknLCAncm9ib3RpY3MnLCAnZGF0YScsICdhbGdvcml0aG1zJywgJ3N5c3RlbXMnXS5zb21lKHRoZW1lID0+IFxuICAgICAgICAgICAgc2tpbGwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0aGVtZSlcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRm9yIHNwZWNpZmljIHF1ZXJpZXMsIHVzZSBleGFjdCBtYXRjaGluZ1xuICAgICAgZmlsdGVyZWRDb3Vyc2VzID0gZmlsdGVyZWRDb3Vyc2VzLmZpbHRlcihjb3Vyc2UgPT4gXG4gICAgICAgIGNvdXJzZS50aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5TG93ZXIpIHx8XG4gICAgICAgIGNvdXJzZS5kZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5TG93ZXIpIHx8XG4gICAgICAgIGNvdXJzZS5za2lsbHMuc29tZShza2lsbCA9PiBza2lsbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5TG93ZXIpKSB8fFxuICAgICAgICBjb3Vyc2UuaWQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeUxvd2VyKVxuICAgICAgKVxuICAgIH1cbiAgfVxuICBcbiAgLy8gQXBwbHkgZmlsdGVycyAoYnV0IGRvbid0IHJlc3RyaWN0IGJ5IHRlcm0gLSB1c2UgaXQgYXMgZ3VpZGFuY2Ugb25seSlcbiAgaWYgKGZpbHRlcnMudGVybSkge1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIERlbW8gZGF0YTogVGVybSBmaWx0ZXIgcHJvdmlkZWQgYnV0IG5vdCBhcHBsaWVkIC0gc2hvd2luZyBjb3Vyc2VzIGZvciBhbGwgdGVybXMnKVxuICAgIC8vIE5vdGU6IFdlIGRvbid0IGZpbHRlciBieSB0ZXJtIHRvIGFsbG93IGZ1dHVyZSBjb3Vyc2UgcmVjb21tZW5kYXRpb25zXG4gIH1cbiAgXG4gIGlmIChmaWx0ZXJzLmRlcHQgJiYgZmlsdGVycy5kZXB0Lmxlbmd0aCA+IDApIHtcbiAgICBmaWx0ZXJlZENvdXJzZXMgPSBmaWx0ZXJlZENvdXJzZXMuZmlsdGVyKGNvdXJzZSA9PiBcbiAgICAgIGZpbHRlcnMuZGVwdCEuaW5jbHVkZXMoY291cnNlLmRlcHQpXG4gICAgKVxuICB9XG4gIFxuICBpZiAoZmlsdGVycy5sZXZlbCAmJiBmaWx0ZXJzLmxldmVsLmxlbmd0aCA+IDApIHtcbiAgICBmaWx0ZXJlZENvdXJzZXMgPSBmaWx0ZXJlZENvdXJzZXMuZmlsdGVyKGNvdXJzZSA9PiBcbiAgICAgIGZpbHRlcnMubGV2ZWwhLmluY2x1ZGVzKGNvdXJzZS5sZXZlbClcbiAgICApXG4gIH1cbiAgXG4gIGlmIChmaWx0ZXJzLnNraWxscyAmJiBmaWx0ZXJzLnNraWxscy5sZW5ndGggPiAwKSB7XG4gICAgZmlsdGVyZWRDb3Vyc2VzID0gZmlsdGVyZWRDb3Vyc2VzLmZpbHRlcihjb3Vyc2UgPT4gXG4gICAgICBjb3Vyc2Uuc2tpbGxzLnNvbWUoc2tpbGwgPT4gXG4gICAgICAgIGZpbHRlcnMuc2tpbGxzIS5zb21lKGZpbHRlclNraWxsID0+IFxuICAgICAgICAgIHNraWxsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZmlsdGVyU2tpbGwudG9Mb3dlckNhc2UoKSkgfHxcbiAgICAgICAgICBmaWx0ZXJTa2lsbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNraWxsLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgIClcbiAgICAgIClcbiAgICApXG4gIH1cbiAgXG4gIHJldHVybiBmaWx0ZXJlZENvdXJzZXMuc2xpY2UoMCwgbGltaXQpXG59XG5cbi8vIENhbGN1bGF0ZSBjb3Vyc2UgcmVjb21tZW5kYXRpb24gc2NvcmVcbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVDb3Vyc2VTY29yZShcbiAgY291cnNlOiBDb3Vyc2UsXG4gIHByb2ZpbGU6IFVzZXJQcm9maWxlLFxuICBnb2FsVGFnczogc3RyaW5nW11cbik6IHtcbiAgc2NvcmU6IG51bWJlclxuICBleHBsYW5hdGlvbjogc3RyaW5nW11cbiAgY291bnRzX3Rvd2FyZDogc3RyaW5nW11cbiAgcHJlcmVxc19tZXQ6IGJvb2xlYW5cbiAgbmV4dF9vZmZlcmVkOiBzdHJpbmdbXVxuICB3b3JrbG9hZF9zY29yZTogbnVtYmVyXG59IHtcbiAgbGV0IHNjb3JlID0gMFxuICBjb25zdCBleHBsYW5hdGlvbjogc3RyaW5nW10gPSBbXVxuICBjb25zdCBjb3VudHNfdG93YXJkOiBzdHJpbmdbXSA9IFtdXG4gIGxldCBwcmVyZXFzX21ldCA9IHRydWVcbiAgY29uc3QgbmV4dF9vZmZlcmVkOiBzdHJpbmdbXSA9IFtdXG4gIGxldCB3b3JrbG9hZF9zY29yZSA9IDUgLy8gRGVmYXVsdCB0byBtZWRpdW0gd29ya2xvYWRcbiAgXG4gIC8vIEdvYWwgbWF0Y2ggKDAtNDAgcG9pbnRzKVxuICBjb25zdCBnb2FsTWF0Y2ggPSBjYWxjdWxhdGVHb2FsTWF0Y2goY291cnNlLCBnb2FsVGFncylcbiAgc2NvcmUgKz0gZ29hbE1hdGNoLnNjb3JlXG4gIGV4cGxhbmF0aW9uLnB1c2goLi4uZ29hbE1hdGNoLmV4cGxhbmF0aW9ucylcbiAgXG4gIC8vIFByb2dyYW0gZml0ICgwLTE1IHBvaW50cylcbiAgY29uc3QgcHJvZ3JhbUZpdCA9IGNhbGN1bGF0ZVByb2dyYW1GaXQoY291cnNlLCBwcm9maWxlKVxuICBzY29yZSArPSBwcm9ncmFtRml0LnNjb3JlXG4gIGV4cGxhbmF0aW9uLnB1c2goLi4ucHJvZ3JhbUZpdC5leHBsYW5hdGlvbnMpXG4gIFxuICAvLyBQcmVyZXF1aXNpdGVzIGNoZWNrICgwLTE1IHBvaW50cylcbiAgY29uc3QgcHJlcmVxQ2hlY2sgPSBjaGVja1ByZXJlcXVpc2l0ZXMoY291cnNlLCBwcm9maWxlLmNvbXBsZXRlZF9jb3Vyc2VzKVxuICBzY29yZSArPSBwcmVyZXFDaGVjay5zY29yZVxuICBwcmVyZXFzX21ldCA9IHByZXJlcUNoZWNrLm1ldFxuICBleHBsYW5hdGlvbi5wdXNoKC4uLnByZXJlcUNoZWNrLmV4cGxhbmF0aW9ucylcbiAgXG4gIC8vIFRlcm0gYXZhaWxhYmlsaXR5ICgwLTEwIHBvaW50cylcbiAgY29uc3QgdGVybUNoZWNrID0gY2hlY2tUZXJtQXZhaWxhYmlsaXR5KGNvdXJzZSwgcHJvZmlsZS5jdXJyZW50X3Rlcm0pXG4gIHNjb3JlICs9IHRlcm1DaGVjay5zY29yZVxuICBuZXh0X29mZmVyZWQucHVzaCguLi50ZXJtQ2hlY2sub2ZmZXJlZF90ZXJtcylcbiAgZXhwbGFuYXRpb24ucHVzaCguLi50ZXJtQ2hlY2suZXhwbGFuYXRpb25zKVxuICBcbiAgLy8gV29ya2xvYWQgYWxpZ25tZW50ICgwLTEwIHBvaW50cylcbiAgY29uc3Qgd29ya2xvYWRDaGVjayA9IGNoZWNrV29ya2xvYWRBbGlnbm1lbnQoY291cnNlLCBwcm9maWxlLmNvbnN0cmFpbnRzKVxuICBzY29yZSArPSB3b3JrbG9hZENoZWNrLnNjb3JlXG4gIHdvcmtsb2FkX3Njb3JlID0gd29ya2xvYWRDaGVjay5zY29yZVxuICBleHBsYW5hdGlvbi5wdXNoKC4uLndvcmtsb2FkQ2hlY2suZXhwbGFuYXRpb25zKVxuICBcbiAgLy8gTGV2ZWwgcHJvZ3Jlc3Npb24gKDAtMTAgcG9pbnRzKVxuICBjb25zdCBsZXZlbENoZWNrID0gY2hlY2tMZXZlbFByb2dyZXNzaW9uKGNvdXJzZSwgcHJvZmlsZS5jdXJyZW50X3Rlcm0pXG4gIHNjb3JlICs9IGxldmVsQ2hlY2suc2NvcmVcbiAgZXhwbGFuYXRpb24ucHVzaCguLi5sZXZlbENoZWNrLmV4cGxhbmF0aW9ucylcbiAgXG4gIHJldHVybiB7XG4gICAgc2NvcmU6IE1hdGgucm91bmQoc2NvcmUpLFxuICAgIGV4cGxhbmF0aW9uLFxuICAgIGNvdW50c190b3dhcmQsXG4gICAgcHJlcmVxc19tZXQsXG4gICAgbmV4dF9vZmZlcmVkLFxuICAgIHdvcmtsb2FkX3Njb3JlXG4gIH1cbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlR29hbE1hdGNoKGNvdXJzZTogQ291cnNlLCBnb2FsVGFnczogc3RyaW5nW10pOiB7XG4gIHNjb3JlOiBudW1iZXJcbiAgZXhwbGFuYXRpb25zOiBzdHJpbmdbXVxufSB7XG4gIGxldCBzY29yZSA9IDBcbiAgY29uc3QgZXhwbGFuYXRpb25zOiBzdHJpbmdbXSA9IFtdXG4gIFxuICBjb25zdCBjb3Vyc2VTa2lsbHMgPSBjb3Vyc2Uuc2tpbGxzLm1hcChzID0+IHMudG9Mb3dlckNhc2UoKSlcbiAgY29uc3QgZ29hbFNraWxscyA9IGdvYWxUYWdzLm1hcChnID0+IGcudG9Mb3dlckNhc2UoKSlcbiAgXG4gIGNvbnN0IG1hdGNoZXMgPSBjb3Vyc2VTa2lsbHMuZmlsdGVyKHNraWxsID0+IFxuICAgIGdvYWxTa2lsbHMuc29tZShnb2FsID0+IFxuICAgICAgc2tpbGwuaW5jbHVkZXMoZ29hbCkgfHwgZ29hbC5pbmNsdWRlcyhza2lsbClcbiAgICApXG4gIClcbiAgXG4gIGlmIChtYXRjaGVzLmxlbmd0aCA+IDApIHtcbiAgICBzY29yZSA9IE1hdGgubWluKDQwLCBtYXRjaGVzLmxlbmd0aCAqIDEwKVxuICAgIGV4cGxhbmF0aW9ucy5wdXNoKGBNYXRjaGVzIHlvdXIgZ29hbHM6ICR7bWF0Y2hlcy5qb2luKCcsICcpfWApXG4gIH0gZWxzZSB7XG4gICAgZXhwbGFuYXRpb25zLnB1c2goJ0xpbWl0ZWQgYWxpZ25tZW50IHdpdGggeW91ciBzdGF0ZWQgZ29hbHMnKVxuICB9XG4gIFxuICByZXR1cm4geyBzY29yZSwgZXhwbGFuYXRpb25zIH1cbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlUHJvZ3JhbUZpdChjb3Vyc2U6IENvdXJzZSwgcHJvZmlsZTogVXNlclByb2ZpbGUpOiB7XG4gIHNjb3JlOiBudW1iZXJcbiAgZXhwbGFuYXRpb25zOiBzdHJpbmdbXVxufSB7XG4gIGxldCBzY29yZSA9IDBcbiAgY29uc3QgZXhwbGFuYXRpb25zOiBzdHJpbmdbXSA9IFtdXG4gIFxuICAvLyBDaGVjayBpZiBjb3Vyc2UgaXMgZnJvbSBzYW1lIGRlcGFydG1lbnRcbiAgaWYgKHByb2ZpbGUucHJvZ3JhbSAmJiBjb3Vyc2UuZGVwdCA9PT0gcHJvZmlsZS5wcm9ncmFtKSB7XG4gICAgc2NvcmUgKz0gMTBcbiAgICBleHBsYW5hdGlvbnMucHVzaChgU2FtZSBkZXBhcnRtZW50IGFzIHlvdXIgcHJvZ3JhbSAoJHtwcm9maWxlLnByb2dyYW19KWApXG4gIH0gZWxzZSBpZiAocHJvZmlsZS5wcm9ncmFtKSB7XG4gICAgc2NvcmUgKz0gNVxuICAgIGV4cGxhbmF0aW9ucy5wdXNoKGBDcm9zcy1kZXBhcnRtZW50YWwgY291cnNlICgke2NvdXJzZS5kZXB0fSlgKVxuICB9XG4gIFxuICAvLyBDaGVjayBpZiBjb3Vyc2UgbGV2ZWwgaXMgYXBwcm9wcmlhdGVcbiAgaWYgKHByb2ZpbGUuY3VycmVudF90ZXJtKSB7XG4gICAgY29uc3QgdGVybUxldmVsID0gZ2V0VGVybUxldmVsKHByb2ZpbGUuY3VycmVudF90ZXJtKVxuICAgIGlmIChjb3Vyc2UubGV2ZWwgPj0gdGVybUxldmVsKSB7XG4gICAgICBzY29yZSArPSA1XG4gICAgICBleHBsYW5hdGlvbnMucHVzaChgQXBwcm9wcmlhdGUgbGV2ZWwgZm9yICR7cHJvZmlsZS5jdXJyZW50X3Rlcm19YClcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiB7IHNjb3JlLCBleHBsYW5hdGlvbnMgfVxufVxuXG5mdW5jdGlvbiBjaGVja1ByZXJlcXVpc2l0ZXMoY291cnNlOiBDb3Vyc2UsIGNvbXBsZXRlZENvdXJzZXM6IHN0cmluZ1tdKToge1xuICBzY29yZTogbnVtYmVyXG4gIG1ldDogYm9vbGVhblxuICBleHBsYW5hdGlvbnM6IHN0cmluZ1tdXG59IHtcbiAgbGV0IHNjb3JlID0gMFxuICBjb25zdCBleHBsYW5hdGlvbnM6IHN0cmluZ1tdID0gW11cbiAgXG4gIGlmICghY291cnNlLnByZXJlcXMpIHtcbiAgICBzY29yZSA9IDE1XG4gICAgZXhwbGFuYXRpb25zLnB1c2goJ05vIHByZXJlcXVpc2l0ZXMgcmVxdWlyZWQnKVxuICAgIHJldHVybiB7IHNjb3JlLCBtZXQ6IHRydWUsIGV4cGxhbmF0aW9ucyB9XG4gIH1cbiAgXG4gIC8vIFNpbXBsZSBwcmVyZXF1aXNpdGUgY2hlY2tpbmcgLSBpbiByZWFsaXR5LCB0aGlzIHdvdWxkIGJlIG1vcmUgc29waGlzdGljYXRlZFxuICBjb25zdCBwcmVyZXFMaXN0ID0gY291cnNlLnByZXJlcXMuc3BsaXQoJywnKS5tYXAocCA9PiBwLnRyaW0oKSlcbiAgY29uc3QgbWV0UHJlcmVxcyA9IHByZXJlcUxpc3QuZmlsdGVyKHByZXJlcSA9PiBcbiAgICBjb21wbGV0ZWRDb3Vyc2VzLnNvbWUoY29tcGxldGVkID0+IFxuICAgICAgY29tcGxldGVkLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocHJlcmVxLnRvTG93ZXJDYXNlKCkpXG4gICAgKVxuICApXG4gIFxuICBpZiAobWV0UHJlcmVxcy5sZW5ndGggPT09IHByZXJlcUxpc3QubGVuZ3RoKSB7XG4gICAgc2NvcmUgPSAxNVxuICAgIGV4cGxhbmF0aW9ucy5wdXNoKCdBbGwgcHJlcmVxdWlzaXRlcyBtZXQnKVxuICB9IGVsc2UgaWYgKG1ldFByZXJlcXMubGVuZ3RoID4gMCkge1xuICAgIHNjb3JlID0gOFxuICAgIGV4cGxhbmF0aW9ucy5wdXNoKGBTb21lIHByZXJlcXVpc2l0ZXMgbWV0ICgke21ldFByZXJlcXMubGVuZ3RofS8ke3ByZXJlcUxpc3QubGVuZ3RofSlgKVxuICB9IGVsc2Uge1xuICAgIHNjb3JlID0gMFxuICAgIGV4cGxhbmF0aW9ucy5wdXNoKGBQcmVyZXF1aXNpdGVzIG5vdCBtZXQ6ICR7Y291cnNlLnByZXJlcXN9YClcbiAgfVxuICBcbiAgcmV0dXJuIHsgXG4gICAgc2NvcmUsIFxuICAgIG1ldDogbWV0UHJlcmVxcy5sZW5ndGggPT09IHByZXJlcUxpc3QubGVuZ3RoLCBcbiAgICBleHBsYW5hdGlvbnMgXG4gIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tUZXJtQXZhaWxhYmlsaXR5KGNvdXJzZTogQ291cnNlLCBjdXJyZW50VGVybT86IHN0cmluZyk6IHtcbiAgc2NvcmU6IG51bWJlclxuICBvZmZlcmVkX3Rlcm1zOiBzdHJpbmdbXVxuICBleHBsYW5hdGlvbnM6IHN0cmluZ1tdXG59IHtcbiAgbGV0IHNjb3JlID0gMFxuICBjb25zdCBleHBsYW5hdGlvbnM6IHN0cmluZ1tdID0gW11cbiAgY29uc3Qgb2ZmZXJlZF90ZXJtczogc3RyaW5nW10gPSBbXVxuICBcbiAgaWYgKCFjb3Vyc2UudGVybXNfb2ZmZXJlZCB8fCBjb3Vyc2UudGVybXNfb2ZmZXJlZC5sZW5ndGggPT09IDApIHtcbiAgICBleHBsYW5hdGlvbnMucHVzaCgnVGVybSBhdmFpbGFiaWxpdHkgdW5rbm93bicpXG4gICAgcmV0dXJuIHsgc2NvcmU6IDUsIG9mZmVyZWRfdGVybXMsIGV4cGxhbmF0aW9ucyB9XG4gIH1cbiAgXG4gIG9mZmVyZWRfdGVybXMucHVzaCguLi5jb3Vyc2UudGVybXNfb2ZmZXJlZClcbiAgXG4gIGlmIChjdXJyZW50VGVybSkge1xuICAgIGNvbnN0IG5leHRUZXJtID0gZ2V0TmV4dFRlcm0oY3VycmVudFRlcm0pXG4gICAgaWYgKGNvdXJzZS50ZXJtc19vZmZlcmVkLmluY2x1ZGVzKG5leHRUZXJtKSkge1xuICAgICAgc2NvcmUgPSAxMFxuICAgICAgZXhwbGFuYXRpb25zLnB1c2goYE9mZmVyZWQgbmV4dCB0ZXJtICgke25leHRUZXJtfSlgKVxuICAgIH0gZWxzZSBpZiAoY291cnNlLnRlcm1zX29mZmVyZWQubGVuZ3RoID4gMCkge1xuICAgICAgc2NvcmUgPSA1XG4gICAgICBleHBsYW5hdGlvbnMucHVzaChgT2ZmZXJlZCBpbjogJHtjb3Vyc2UudGVybXNfb2ZmZXJlZC5qb2luKCcsICcpfWApXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHNjb3JlID0gNVxuICAgIGV4cGxhbmF0aW9ucy5wdXNoKGBPZmZlcmVkIGluOiAke2NvdXJzZS50ZXJtc19vZmZlcmVkLmpvaW4oJywgJyl9YClcbiAgfVxuICBcbiAgcmV0dXJuIHsgc2NvcmUsIG9mZmVyZWRfdGVybXMsIGV4cGxhbmF0aW9ucyB9XG59XG5cbmZ1bmN0aW9uIGNoZWNrV29ya2xvYWRBbGlnbm1lbnQoY291cnNlOiBDb3Vyc2UsIGNvbnN0cmFpbnRzPzogYW55KToge1xuICBzY29yZTogbnVtYmVyXG4gIGV4cGxhbmF0aW9uczogc3RyaW5nW11cbn0ge1xuICBsZXQgc2NvcmUgPSA1IC8vIERlZmF1bHQgbWVkaXVtXG4gIGNvbnN0IGV4cGxhbmF0aW9uczogc3RyaW5nW10gPSBbXVxuICBcbiAgaWYgKCFjb3Vyc2Uud29ya2xvYWQgfHwgIWNvbnN0cmFpbnRzPy5tYXhfd29ya2xvYWQpIHtcbiAgICByZXR1cm4geyBzY29yZSwgZXhwbGFuYXRpb25zIH1cbiAgfVxuICBcbiAgY29uc3QgdG90YWxXb3JrbG9hZCA9IE9iamVjdC52YWx1ZXMoY291cnNlLndvcmtsb2FkKS5yZWR1Y2UoKHN1bTogbnVtYmVyLCB2YWw6IGFueSkgPT4gc3VtICsgdmFsLCAwKVxuICBcbiAgaWYgKHRvdGFsV29ya2xvYWQgPD0gY29uc3RyYWludHMubWF4X3dvcmtsb2FkKSB7XG4gICAgc2NvcmUgPSAxMFxuICAgIGV4cGxhbmF0aW9ucy5wdXNoKGBXb3JrbG9hZCBmaXRzIHlvdXIgY29uc3RyYWludHMgKCR7dG90YWxXb3JrbG9hZH0vd2VlaylgKVxuICB9IGVsc2Uge1xuICAgIHNjb3JlID0gMlxuICAgIGV4cGxhbmF0aW9ucy5wdXNoKGBIZWF2eSB3b3JrbG9hZCAoJHt0b3RhbFdvcmtsb2FkfS93ZWVrKWApXG4gIH1cbiAgXG4gIHJldHVybiB7IHNjb3JlLCBleHBsYW5hdGlvbnMgfVxufVxuXG5mdW5jdGlvbiBjaGVja0xldmVsUHJvZ3Jlc3Npb24oY291cnNlOiBDb3Vyc2UsIGN1cnJlbnRUZXJtPzogc3RyaW5nKToge1xuICBzY29yZTogbnVtYmVyXG4gIGV4cGxhbmF0aW9uczogc3RyaW5nW11cbn0ge1xuICBsZXQgc2NvcmUgPSA1IC8vIERlZmF1bHRcbiAgY29uc3QgZXhwbGFuYXRpb25zOiBzdHJpbmdbXSA9IFtdXG4gIFxuICBpZiAoIWN1cnJlbnRUZXJtKSB7XG4gICAgcmV0dXJuIHsgc2NvcmUsIGV4cGxhbmF0aW9ucyB9XG4gIH1cbiAgXG4gIGNvbnN0IHRlcm1MZXZlbCA9IGdldFRlcm1MZXZlbChjdXJyZW50VGVybSlcbiAgXG4gIGlmIChjb3Vyc2UubGV2ZWwgPj0gdGVybUxldmVsICYmIGNvdXJzZS5sZXZlbCA8PSB0ZXJtTGV2ZWwgKyAxMDApIHtcbiAgICBzY29yZSA9IDEwXG4gICAgZXhwbGFuYXRpb25zLnB1c2goYEFwcHJvcHJpYXRlIGxldmVsIGZvciAke2N1cnJlbnRUZXJtfWApXG4gIH0gZWxzZSBpZiAoY291cnNlLmxldmVsIDwgdGVybUxldmVsKSB7XG4gICAgc2NvcmUgPSAzXG4gICAgZXhwbGFuYXRpb25zLnB1c2goYExvd2VyIGxldmVsIGNvdXJzZSAoJHtjb3Vyc2UubGV2ZWx9eHgpYClcbiAgfSBlbHNlIHtcbiAgICBzY29yZSA9IDdcbiAgICBleHBsYW5hdGlvbnMucHVzaChgQWR2YW5jZWQgY291cnNlICgke2NvdXJzZS5sZXZlbH14eClgKVxuICB9XG4gIFxuICByZXR1cm4geyBzY29yZSwgZXhwbGFuYXRpb25zIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uc1xuZnVuY3Rpb24gZ2V0VGVybUxldmVsKHRlcm06IHN0cmluZyk6IG51bWJlciB7XG4gIGNvbnN0IHRlcm1NYXA6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7XG4gICAgJzFBJzogMTAwLCAnMUInOiAxMDAsXG4gICAgJzJBJzogMjAwLCAnMkInOiAyMDAsXG4gICAgJzNBJzogMzAwLCAnM0InOiAzMDAsXG4gICAgJzRBJzogNDAwLCAnNEInOiA0MDBcbiAgfVxuICByZXR1cm4gdGVybU1hcFt0ZXJtXSB8fCAyMDBcbn1cblxuZnVuY3Rpb24gZ2V0TmV4dFRlcm0oY3VycmVudFRlcm06IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHRlcm1NYXA6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XG4gICAgJzFBJzogJzFCJywgJzFCJzogJzJBJyxcbiAgICAnMkEnOiAnMkInLCAnMkInOiAnM0EnLFxuICAgICczQSc6ICczQicsICczQic6ICc0QScsXG4gICAgJzRBJzogJzRCJywgJzRCJzogJzRCJ1xuICB9XG4gIHJldHVybiB0ZXJtTWFwW2N1cnJlbnRUZXJtXSB8fCAnMkEnXG59XG4iXSwibmFtZXMiOlsic3VwYWJhc2UiLCJnZXRFbWJlZGRpbmciLCJkZW1vQ291cnNlcyIsIlBST0dSQU1fQUJCUkVWSUFUSU9OUyIsImdldEZ1bGxQcm9ncmFtTmFtZSIsImFiYnJldmlhdGlvbiIsInNlYXJjaEVsZWN0aXZlRG9jcyIsInF1ZXJ5IiwidGhyZXNob2xkIiwibGltaXQiLCJxdWVyeUVtYmVkZGluZyIsImRhdGEiLCJlcnJvciIsInJwYyIsInF1ZXJ5X2VtYmVkZGluZyIsIm1hdGNoX3RocmVzaG9sZCIsIm1hdGNoX2NvdW50IiwiY29uc29sZSIsInNlYXJjaENvdXJzZXMiLCJmaWx0ZXJzIiwibG9nIiwiaXNDU0VRdWVyeSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJjc2VDb3Vyc2VzIiwiY3NlRXJyb3IiLCJmcm9tIiwic2VsZWN0Iiwib3IiLCJsZW5ndGgiLCJzdXBhYmFzZVF1ZXJ5Iiwia2V5VGVybXMiLCJyZXBsYWNlIiwic3BsaXQiLCJmaWx0ZXIiLCJ0ZXJtIiwic2xpY2UiLCJzZWFyY2hDb25kaXRpb25zIiwibWFwIiwiY2xlYW5UZXJtIiwiam9pbiIsImRlcHQiLCJpbiIsImxldmVsIiwic2tpbGxzIiwibWF4X3dvcmtsb2FkIiwibHRlIiwidGVzdERhdGEiLCJ0ZXN0RXJyb3IiLCJ0ZXN0Rm91bmQiLCJtZXNzYWdlIiwic2FtcGxlQ291cnNlcyIsImMiLCJpZCIsInRpdGxlIiwiZm91bmQiLCJkZW1vUmVzdWx0cyIsImZpbHRlckRlbW9Db3Vyc2VzIiwiZXh0cmFjdFNlYXJjaEtleXdvcmRzIiwic3RvcFdvcmRzIiwid29yZCIsInNlYXJjaFNwZWNpYWxpemF0aW9ucyIsInByb2dyYW0iLCJrZXl3b3JkcyIsImtleXdvcmQiLCJjbGVhbktleXdvcmQiLCJmdWxsUHJvZ3JhbU5hbWUiLCJlcSIsInNlYXJjaENlcnRpZmljYXRlcyIsInNlYXJjaERpcGxvbWFzIiwiZmlsdGVyZWRDb3Vyc2VzIiwicXVlcnlMb3dlciIsImlzRWxlY3RpdmVRdWVyeSIsImNvdXJzZSIsImRlc2NyaXB0aW9uIiwic29tZSIsInNraWxsIiwidGhlbWUiLCJmaWx0ZXJTa2lsbCIsImNhbGN1bGF0ZUNvdXJzZVNjb3JlIiwicHJvZmlsZSIsImdvYWxUYWdzIiwic2NvcmUiLCJleHBsYW5hdGlvbiIsImNvdW50c190b3dhcmQiLCJwcmVyZXFzX21ldCIsIm5leHRfb2ZmZXJlZCIsIndvcmtsb2FkX3Njb3JlIiwiZ29hbE1hdGNoIiwiY2FsY3VsYXRlR29hbE1hdGNoIiwicHVzaCIsImV4cGxhbmF0aW9ucyIsInByb2dyYW1GaXQiLCJjYWxjdWxhdGVQcm9ncmFtRml0IiwicHJlcmVxQ2hlY2siLCJjaGVja1ByZXJlcXVpc2l0ZXMiLCJjb21wbGV0ZWRfY291cnNlcyIsIm1ldCIsInRlcm1DaGVjayIsImNoZWNrVGVybUF2YWlsYWJpbGl0eSIsImN1cnJlbnRfdGVybSIsIm9mZmVyZWRfdGVybXMiLCJ3b3JrbG9hZENoZWNrIiwiY2hlY2tXb3JrbG9hZEFsaWdubWVudCIsImNvbnN0cmFpbnRzIiwibGV2ZWxDaGVjayIsImNoZWNrTGV2ZWxQcm9ncmVzc2lvbiIsIk1hdGgiLCJyb3VuZCIsImNvdXJzZVNraWxscyIsInMiLCJnb2FsU2tpbGxzIiwiZyIsIm1hdGNoZXMiLCJnb2FsIiwibWluIiwidGVybUxldmVsIiwiZ2V0VGVybUxldmVsIiwiY29tcGxldGVkQ291cnNlcyIsInByZXJlcXMiLCJwcmVyZXFMaXN0IiwicCIsInRyaW0iLCJtZXRQcmVyZXFzIiwicHJlcmVxIiwiY29tcGxldGVkIiwiY3VycmVudFRlcm0iLCJ0ZXJtc19vZmZlcmVkIiwibmV4dFRlcm0iLCJnZXROZXh0VGVybSIsIndvcmtsb2FkIiwidG90YWxXb3JrbG9hZCIsIk9iamVjdCIsInZhbHVlcyIsInJlZHVjZSIsInN1bSIsInZhbCIsInRlcm1NYXAiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/search.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase.ts":
/*!*****************************!*\
  !*** ./src/lib/supabase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n// Client-side environment variables (must be prefixed with NEXT_PUBLIC_)\nconst supabaseUrl = \"https://ldjhtpdidpruzeyuxdfo.supabase.co\" || 0 || 0;\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxkamh0cGRpZHBydXpleXV4ZGZvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0NDk5ODksImV4cCI6MjA3MzAyNTk4OX0.G9z3wtweZXO0GcT2Ov0Zt9cng6lUeqA0w9KK5YYTcN4\" || 0 || 0;\n// Server-side environment variables (for API routes)\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || 'placeholder-service-key';\n// Detailed configuration logging\nconsole.log('🔧 Client-side Configuration Status:');\nconsole.log('  NEXT_PUBLIC_SUPABASE_URL:',  true ? '✅ SET' : 0);\nconsole.log('  NEXT_PUBLIC_SUPABASE_ANON_KEY:',  true ? '✅ SET' : 0);\nconsole.log('  Fallback SUPABASE_URL:', process.env.SUPABASE_URL ? '✅ SET' : '❌ NOT SET');\nconsole.log('  Fallback SUPABASE_KEY:', process.env.SUPABASE_KEY ? '✅ SET' : '❌ NOT SET');\n// Check if environment variables are properly set\nif (supabaseUrl === 'https://placeholder.supabase.co' || supabaseAnonKey === 'placeholder-key') {\n    console.warn('⚠️ Supabase environment variables not configured for client-side.');\n    console.warn('📝 Required variables for client-side:');\n    console.warn('   NEXT_PUBLIC_SUPABASE_URL=your_supabase_url');\n    console.warn('   NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key');\n    console.warn('📝 Or add the non-prefixed versions to your .env file');\n} else {\n    console.log('✅ Supabase client configured successfully!');\n}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n    auth: {\n        persistSession: false\n    }\n});\n// For server-side operations that need elevated permissions\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey, {\n    auth: {\n        persistSession: false\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFvRDtBQUVwRCx5RUFBeUU7QUFDekUsTUFBTUMsY0FBc0JDLDBDQUFvQyxJQUFJQSxDQUF3QixJQUFJLENBQWlDO0FBQ2pJLE1BQU1JLGtCQUEwQkosa05BQXlDLElBQUlBLENBQXdCLElBQUksQ0FBaUI7QUFFMUgscURBQXFEO0FBQ3JELE1BQU1PLHFCQUE2QlAsUUFBUUMsR0FBRyxDQUFDTyx5QkFBeUIsSUFBSTtBQUU1RSxpQ0FBaUM7QUFDakNDLFFBQVFDLEdBQUcsQ0FBQztBQUNaRCxRQUFRQyxHQUFHLENBQUMsK0JBQStCVixLQUFvQyxHQUFHLFVBQVUsQ0FBVztBQUN2R1MsUUFBUUMsR0FBRyxDQUFDLG9DQUFvQ1YsS0FBeUMsR0FBRyxVQUFVLENBQVc7QUFDakhTLFFBQVFDLEdBQUcsQ0FBQyw0QkFBNEJWLFFBQVFDLEdBQUcsQ0FBQ0UsWUFBWSxHQUFHLFVBQVU7QUFDN0VNLFFBQVFDLEdBQUcsQ0FBQyw0QkFBNEJWLFFBQVFDLEdBQUcsQ0FBQ0ssWUFBWSxHQUFHLFVBQVU7QUFFN0Usa0RBQWtEO0FBQ2xELElBQUlQLGdCQUFnQixxQ0FBcUNLLG9CQUFvQixtQkFBbUI7SUFDOUZLLFFBQVFFLElBQUksQ0FBQztJQUNiRixRQUFRRSxJQUFJLENBQUM7SUFDYkYsUUFBUUUsSUFBSSxDQUFDO0lBQ2JGLFFBQVFFLElBQUksQ0FBQztJQUNiRixRQUFRRSxJQUFJLENBQUM7QUFDZixPQUFPO0lBQ0xGLFFBQVFDLEdBQUcsQ0FBQztBQUNkO0FBRU8sTUFBTUUsV0FBV2QsbUVBQVlBLENBQUNDLGFBQWFLLGlCQUFpQjtJQUNqRVMsTUFBTTtRQUNKQyxnQkFBZ0I7SUFDbEI7QUFDRixHQUFFO0FBRUYsNERBQTREO0FBQ3JELE1BQU1DLGdCQUFnQmpCLG1FQUFZQSxDQUN2Q0MsYUFDQVEsb0JBQ0E7SUFDRU0sTUFBTTtRQUNKQyxnQkFBZ0I7SUFDbEI7QUFDRixHQUNEIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHNoaWxvXFxFbGVjdGl2ZSBDaG9vc2VyXFxmcm9udGVuZFxcc3JjXFxsaWJcXHN1cGFiYXNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcblxuLy8gQ2xpZW50LXNpZGUgZW52aXJvbm1lbnQgdmFyaWFibGVzIChtdXN0IGJlIHByZWZpeGVkIHdpdGggTkVYVF9QVUJMSUNfKVxuY29uc3Qgc3VwYWJhc2VVcmw6IHN0cmluZyA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCB8fCBwcm9jZXNzLmVudi5TVVBBQkFTRV9VUkwgfHwgJ2h0dHBzOi8vcGxhY2Vob2xkZXIuc3VwYWJhc2UuY28nXG5jb25zdCBzdXBhYmFzZUFub25LZXk6IHN0cmluZyA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIHx8IHByb2Nlc3MuZW52LlNVUEFCQVNFX0tFWSB8fCAncGxhY2Vob2xkZXIta2V5J1xuXG4vLyBTZXJ2ZXItc2lkZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgKGZvciBBUEkgcm91dGVzKVxuY29uc3Qgc3VwYWJhc2VTZXJ2aWNlS2V5OiBzdHJpbmcgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIHx8ICdwbGFjZWhvbGRlci1zZXJ2aWNlLWtleSdcblxuLy8gRGV0YWlsZWQgY29uZmlndXJhdGlvbiBsb2dnaW5nXG5jb25zb2xlLmxvZygn8J+UpyBDbGllbnQtc2lkZSBDb25maWd1cmF0aW9uIFN0YXR1czonKVxuY29uc29sZS5sb2coJyAgTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMOicsIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCA/ICfinIUgU0VUJyA6ICfinYwgTk9UIFNFVCcpXG5jb25zb2xlLmxvZygnICBORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTonLCBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSA/ICfinIUgU0VUJyA6ICfinYwgTk9UIFNFVCcpXG5jb25zb2xlLmxvZygnICBGYWxsYmFjayBTVVBBQkFTRV9VUkw6JywgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfVVJMID8gJ+KchSBTRVQnIDogJ+KdjCBOT1QgU0VUJylcbmNvbnNvbGUubG9nKCcgIEZhbGxiYWNrIFNVUEFCQVNFX0tFWTonLCBwcm9jZXNzLmVudi5TVVBBQkFTRV9LRVkgPyAn4pyFIFNFVCcgOiAn4p2MIE5PVCBTRVQnKVxuXG4vLyBDaGVjayBpZiBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHByb3Blcmx5IHNldFxuaWYgKHN1cGFiYXNlVXJsID09PSAnaHR0cHM6Ly9wbGFjZWhvbGRlci5zdXBhYmFzZS5jbycgfHwgc3VwYWJhc2VBbm9uS2V5ID09PSAncGxhY2Vob2xkZXIta2V5Jykge1xuICBjb25zb2xlLndhcm4oJ+KaoO+4jyBTdXBhYmFzZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgbm90IGNvbmZpZ3VyZWQgZm9yIGNsaWVudC1zaWRlLicpXG4gIGNvbnNvbGUud2Fybign8J+TnSBSZXF1aXJlZCB2YXJpYWJsZXMgZm9yIGNsaWVudC1zaWRlOicpXG4gIGNvbnNvbGUud2FybignICAgTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMPXlvdXJfc3VwYWJhc2VfdXJsJylcbiAgY29uc29sZS53YXJuKCcgICBORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWT15b3VyX3N1cGFiYXNlX2Fub25fa2V5JylcbiAgY29uc29sZS53YXJuKCfwn5OdIE9yIGFkZCB0aGUgbm9uLXByZWZpeGVkIHZlcnNpb25zIHRvIHlvdXIgLmVudiBmaWxlJylcbn0gZWxzZSB7XG4gIGNvbnNvbGUubG9nKCfinIUgU3VwYWJhc2UgY2xpZW50IGNvbmZpZ3VyZWQgc3VjY2Vzc2Z1bGx5IScpXG59XG5cbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5LCB7XG4gIGF1dGg6IHtcbiAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2VcbiAgfVxufSlcblxuLy8gRm9yIHNlcnZlci1zaWRlIG9wZXJhdGlvbnMgdGhhdCBuZWVkIGVsZXZhdGVkIHBlcm1pc3Npb25zXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudChcbiAgc3VwYWJhc2VVcmwsXG4gIHN1cGFiYXNlU2VydmljZUtleSxcbiAge1xuICAgIGF1dGg6IHtcbiAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZVxuICAgIH1cbiAgfVxuKVxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiU1VQQUJBU0VfS0VZIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImNvbnNvbGUiLCJsb2ciLCJ3YXJuIiwic3VwYWJhc2UiLCJhdXRoIiwicGVyc2lzdFNlc3Npb24iLCJzdXBhYmFzZUFkbWluIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase.ts\n");

/***/ }),

/***/ "(ssr)/../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*******************************************************************************************************!*\
  !*** ../node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions","vendor-chunks/formdata-node","vendor-chunks/openai","vendor-chunks/@langchain","vendor-chunks/semver","vendor-chunks/zod-to-json-schema","vendor-chunks/langsmith","vendor-chunks/zod","vendor-chunks/form-data-encoder","vendor-chunks/uuid","vendor-chunks/@cfworker","vendor-chunks/agentkeepalive","vendor-chunks/retry","vendor-chunks/p-queue","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/p-timeout","vendor-chunks/p-retry","vendor-chunks/p-finally","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/eventemitter3","vendor-chunks/event-target-shim","vendor-chunks/decamelize","vendor-chunks/camelcase","vendor-chunks/ansi-styles","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/../node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2Froute&page=%2Fapi%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2Froute.ts&appDir=C%3A%5CUsers%5Cshilo%5CElective%20Chooser%5Cfrontend%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cshilo%5CElective%20Chooser%5Cfrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();